var Live2dWidget=function(){"use strict";var ne;(function(c){var i,s=function(){function V(){}return V.getVersion=function(){return D.ccall("csmGetVersion","number",[],[])},V.getLatestMocVersion=function(){return D.ccall("csmGetLatestMocVersion","number",[],[])},V.getMocVersion=function(A,G){return D.ccall("csmGetMocVersion","number",["number","number"],[A,G])},V.getSizeofModel=function(A){return D.ccall("csmGetSizeofModel","number",["number"],[A])},V.reviveMocInPlace=function(A,G){return D.ccall("csmReviveMocInPlace","number",["number","number"],[A,G])},V.initializeModelInPlace=function(A,G,Z){return D.ccall("csmInitializeModelInPlace","number",["number","number","number"],[A,G,Z])},V.hasMocConsistency=function(A,G){return D.ccall("csmHasMocConsistency","number",["number","number"],[A,G])},V.getParameterCount=function(A){return D.ccall("csmGetParameterCount","number",["number"],[A])},V.getParameterIds=function(A){return D.ccall("csmGetParameterIds","number",["number"],[A])},V.getParameterMinimumValues=function(A){return D.ccall("csmGetParameterMinimumValues","number",["number"],[A])},V.getParameterTypes=function(A){return D.ccall("csmGetParameterTypes","number",["number"],[A])},V.getParameterMaximumValues=function(A){return D.ccall("csmGetParameterMaximumValues","number",["number"],[A])},V.getParameterDefaultValues=function(A){return D.ccall("csmGetParameterDefaultValues","number",["number"],[A])},V.getParameterValues=function(A){return D.ccall("csmGetParameterValues","number",["number"],[A])},V.getParameterKeyCounts=function(A){return D.ccall("csmGetParameterKeyCounts","number",["number"],[A])},V.getParameterKeyValues=function(A){return D.ccall("csmGetParameterKeyValues","number",["number"],[A])},V.getPartCount=function(A){return D.ccall("csmGetPartCount","number",["number"],[A])},V.getPartIds=function(A){return D.ccall("csmGetPartIds","number",["number"],[A])},V.getPartOpacities=function(A){return D.ccall("csmGetPartOpacities","number",["number"],[A])},V.getPartParentPartIndices=function(A){return D.ccall("csmGetPartParentPartIndices","number",["number"],[A])},V.getDrawableCount=function(A){return D.ccall("csmGetDrawableCount","number",["number"],[A])},V.getDrawableIds=function(A){return D.ccall("csmGetDrawableIds","number",["number"],[A])},V.getDrawableConstantFlags=function(A){return D.ccall("csmGetDrawableConstantFlags","number",["number"],[A])},V.getDrawableDynamicFlags=function(A){return D.ccall("csmGetDrawableDynamicFlags","number",["number"],[A])},V.getDrawableTextureIndices=function(A){return D.ccall("csmGetDrawableTextureIndices","number",["number"],[A])},V.getDrawableDrawOrders=function(A){return D.ccall("csmGetDrawableDrawOrders","number",["number"],[A])},V.getDrawableRenderOrders=function(A){return D.ccall("csmGetDrawableRenderOrders","number",["number"],[A])},V.getDrawableOpacities=function(A){return D.ccall("csmGetDrawableOpacities","number",["number"],[A])},V.getDrawableMaskCounts=function(A){return D.ccall("csmGetDrawableMaskCounts","number",["number"],[A])},V.getDrawableMasks=function(A){return D.ccall("csmGetDrawableMasks","number",["number"],[A])},V.getDrawableVertexCounts=function(A){return D.ccall("csmGetDrawableVertexCounts","number",["number"],[A])},V.getDrawableVertexPositions=function(A){return D.ccall("csmGetDrawableVertexPositions","number",["number"],[A])},V.getDrawableVertexUvs=function(A){return D.ccall("csmGetDrawableVertexUvs","number",["number"],[A])},V.getDrawableIndexCounts=function(A){return D.ccall("csmGetDrawableIndexCounts","number",["number"],[A])},V.getDrawableIndices=function(A){return D.ccall("csmGetDrawableIndices","number",["number"],[A])},V.getDrawableMultiplyColors=function(A){return D.ccall("csmGetDrawableMultiplyColors","number",["number"],[A])},V.getDrawableScreenColors=function(A){return D.ccall("csmGetDrawableScreenColors","number",["number"],[A])},V.getDrawableParentPartIndices=function(A){return D.ccall("csmGetDrawableParentPartIndices","number",["number"],[A])},V.mallocMoc=function(A){return D.ccall("csmMallocMoc","number",["number"],[A])},V.mallocModelAndInitialize=function(A){return D.ccall("csmMallocModelAndInitialize","number",["number"],[A])},V.malloc=function(A){return D.ccall("csmMalloc","number",["number"],[A])},V.setLogFunction=function(A){D.ccall("csmSetLogFunction",null,["number"],[A])},V.updateModel=function(A){D.ccall("csmUpdateModel",null,["number"],[A])},V.readCanvasInfo=function(A,G,Z,q){D.ccall("csmReadCanvasInfo",null,["number","number","number","number"],[A,G,Z,q])},V.resetDrawableDynamicFlags=function(A){D.ccall("csmResetDrawableDynamicFlags",null,["number"],[A])},V.free=function(A){D.ccall("csmFree",null,["number"],[A])},V.initializeAmountOfMemory=function(A){D.ccall("csmInitializeAmountOfMemory",null,["number"],[A])},V}(),I=(c.AlignofMoc=64,c.AlignofModel=16,c.MocVersion_Unknown=0,c.MocVersion_30=1,c.MocVersion_33=2,c.MocVersion_40=3,c.MocVersion_42=4,c.ParameterType_Normal=0,c.ParameterType_BlendShape=1,function(){function V(){}return V.csmGetVersion=function(){return s.getVersion()},V.csmGetLatestMocVersion=function(){return s.getLatestMocVersion()},V.csmGetMocVersion=function(A,G){return s.getMocVersion(A._ptr,G.byteLength)},V}()),I=(c.Version=I,function(){function V(){}return V.csmSetLogFunction=function(A){V.logFunction=A,A=D.addFunction(V.wrapLogFunction,"vi"),s.setLogFunction(A)},V.csmGetLogFunction=function(){return V.logFunction},V.wrapLogFunction=function(A){A=D.UTF8ToString(A),V.logFunction(A)},V}()),I=(c.Logging=I,function(){function V(A){var G=s.mallocMoc(A.byteLength);G&&(new Uint8Array(D.HEAPU8.buffer,G,A.byteLength).set(new Uint8Array(A)),this._ptr=s.reviveMocInPlace(G,A.byteLength),this._ptr||s.free(G))}return V.prototype.hasMocConsistency=function(A){var G=s.mallocMoc(A.byteLength);if(G)return new Uint8Array(D.HEAPU8.buffer,G,A.byteLength).set(new Uint8Array(A)),A=s.hasMocConsistency(G,A.byteLength),s.free(G),A},V.fromArrayBuffer=function(A){return A?(A=new V(A),A._ptr?A:null):null},V.prototype._release=function(){s.free(this._ptr),this._ptr=0},V}()),I=(c.Moc=I,function(){function V(A){this._ptr=s.mallocModelAndInitialize(A._ptr),this._ptr&&(this.parameters=new _(this._ptr),this.parts=new w(this._ptr),this.drawables=new T(this._ptr),this.canvasinfo=new o(this._ptr))}return V.fromMoc=function(A){return A=new V(A),A._ptr?A:null},V.prototype.update=function(){s.updateModel(this._ptr)},V.prototype.release=function(){s.free(this._ptr),this._ptr=0},V}()),o=(c.Model=I,function(V){var A,G,Z,q,et,K,gt;V&&(Z=(A=new Float32Array(2)).length*A.BYTES_PER_ELEMENT,G=s.malloc(Z),(G=new Uint8Array(D.HEAPU8.buffer,G,Z)).set(new Uint8Array(A.buffer)),et=(Z=new Float32Array(2)).length*Z.BYTES_PER_ELEMENT,q=s.malloc(et),(q=new Uint8Array(D.HEAPU8.buffer,q,et)).set(new Uint8Array(Z.buffer)),K=(et=new Float32Array(1)).length*et.BYTES_PER_ELEMENT,gt=s.malloc(K),(gt=new Uint8Array(D.HEAPU8.buffer,gt,K)).set(new Uint8Array(et.buffer)),s.readCanvasInfo(V,G.byteOffset,q.byteOffset,gt.byteOffset),A=new Float32Array(G.buffer,G.byteOffset,G.length),Z=new Float32Array(q.buffer,q.byteOffset,q.length),et=new Float32Array(gt.buffer,gt.byteOffset,gt.length),this.CanvasWidth=A[0],this.CanvasHeight=A[1],this.CanvasOriginX=Z[0],this.CanvasOriginY=Z[1],this.PixelsPerUnit=et[0],s.free(G.byteOffset),s.free(q.byteOffset),s.free(gt.byteOffset))}),_=(c.CanvasInfo=o,function(V){this.count=s.getParameterCount(V),A=s.getParameterCount(V),this.ids=new Array(A);for(var A,G,Z=new Uint32Array(D.HEAPU32.buffer,s.getParameterIds(V),A),q=0;q<Z.length;q++)this.ids[q]=D.UTF8ToString(Z[q]);A=s.getParameterCount(V),this.minimumValues=new Float32Array(D.HEAPF32.buffer,s.getParameterMinimumValues(V),A),A=s.getParameterCount(V),this.types=new Int32Array(D.HEAP32.buffer,s.getParameterTypes(V),A),A=s.getParameterCount(V),this.maximumValues=new Float32Array(D.HEAPF32.buffer,s.getParameterMaximumValues(V),A),A=s.getParameterCount(V),this.defaultValues=new Float32Array(D.HEAPF32.buffer,s.getParameterDefaultValues(V),A),A=s.getParameterCount(V),this.values=new Float32Array(D.HEAPF32.buffer,s.getParameterValues(V),A),A=s.getParameterCount(V),this.keyCounts=new Int32Array(D.HEAP32.buffer,s.getParameterKeyCounts(V),A),A=s.getParameterCount(V),G=new Int32Array(D.HEAP32.buffer,s.getParameterKeyCounts(V),A),this.keyValues=new Array(A);for(var et=new Uint32Array(D.HEAPU32.buffer,s.getParameterKeyValues(V),A),q=0;q<et.length;q++)this.keyValues[q]=new Float32Array(D.HEAPF32.buffer,et[q],G[q])}),w=(c.Parameters=_,function(V){this.count=s.getPartCount(V),A=s.getPartCount(V),this.ids=new Array(A);for(var A,G=new Uint32Array(D.HEAPU32.buffer,s.getPartIds(V),A),Z=0;Z<G.length;Z++)this.ids[Z]=D.UTF8ToString(G[Z]);A=s.getPartCount(V),this.opacities=new Float32Array(D.HEAPF32.buffer,s.getPartOpacities(V),A),A=s.getPartCount(V),this.parentIndices=new Int32Array(D.HEAP32.buffer,s.getPartParentPartIndices(V),A)}),T=(c.Parts=w,function(){function V(A){this._modelPtr=A;for(var G,Z=null,q=(this.count=s.getDrawableCount(A),G=s.getDrawableCount(A),this.ids=new Array(G),new Uint32Array(D.HEAPU32.buffer,s.getDrawableIds(A),G)),et=0;et<q.length;et++)this.ids[et]=D.UTF8ToString(q[et]);G=s.getDrawableCount(A),this.constantFlags=new Uint8Array(D.HEAPU8.buffer,s.getDrawableConstantFlags(A),G),G=s.getDrawableCount(A),this.dynamicFlags=new Uint8Array(D.HEAPU8.buffer,s.getDrawableDynamicFlags(A),G),G=s.getDrawableCount(A),this.textureIndices=new Int32Array(D.HEAP32.buffer,s.getDrawableTextureIndices(A),G),G=s.getDrawableCount(A),this.drawOrders=new Int32Array(D.HEAP32.buffer,s.getDrawableDrawOrders(A),G),G=s.getDrawableCount(A),this.renderOrders=new Int32Array(D.HEAP32.buffer,s.getDrawableRenderOrders(A),G),G=s.getDrawableCount(A),this.opacities=new Float32Array(D.HEAPF32.buffer,s.getDrawableOpacities(A),G),G=s.getDrawableCount(A),this.maskCounts=new Int32Array(D.HEAP32.buffer,s.getDrawableMaskCounts(A),G),G=s.getDrawableCount(A),this.vertexCounts=new Int32Array(D.HEAP32.buffer,s.getDrawableVertexCounts(A),G),G=s.getDrawableCount(A),this.indexCounts=new Int32Array(D.HEAP32.buffer,s.getDrawableIndexCounts(A),G),G=s.getDrawableCount(A),this.multiplyColors=new Float32Array(D.HEAPF32.buffer,s.getDrawableMultiplyColors(A),4*G),G=s.getDrawableCount(A),this.screenColors=new Float32Array(D.HEAPF32.buffer,s.getDrawableScreenColors(A),4*G),G=s.getDrawableCount(A),this.parentPartIndices=new Int32Array(D.HEAP32.buffer,s.getDrawableParentPartIndices(A),G),G=s.getDrawableCount(A),Z=new Int32Array(D.HEAP32.buffer,s.getDrawableMaskCounts(A),G),this.masks=new Array(G);for(var K=new Uint32Array(D.HEAPU32.buffer,s.getDrawableMasks(A),G),et=0;et<K.length;et++)this.masks[et]=new Int32Array(D.HEAP32.buffer,K[et],Z[et]);G=s.getDrawableCount(A),Z=new Int32Array(D.HEAP32.buffer,s.getDrawableVertexCounts(A),G),this.vertexPositions=new Array(G);for(var gt=new Uint32Array(D.HEAPU32.buffer,s.getDrawableVertexPositions(A),G),et=0;et<gt.length;et++)this.vertexPositions[et]=new Float32Array(D.HEAPF32.buffer,gt[et],2*Z[et]);G=s.getDrawableCount(A),Z=new Int32Array(D.HEAP32.buffer,s.getDrawableVertexCounts(A),G),this.vertexUvs=new Array(G);for(var _t=new Uint32Array(D.HEAPU32.buffer,s.getDrawableVertexUvs(A),G),et=0;et<_t.length;et++)this.vertexUvs[et]=new Float32Array(D.HEAPF32.buffer,_t[et],2*Z[et]);G=s.getDrawableCount(A),Z=new Int32Array(D.HEAP32.buffer,s.getDrawableIndexCounts(A),G),this.indices=new Array(G);for(var mt=new Uint32Array(D.HEAPU32.buffer,s.getDrawableIndices(A),G),et=0;et<mt.length;et++)this.indices[et]=new Uint16Array(D.HEAPU16.buffer,mt[et],Z[et])}return V.prototype.resetDynamicFlags=function(){s.resetDrawableDynamicFlags(this._modelPtr)},V}()),I=(c.Drawables=T,function(){function V(){}return V.hasBlendAdditiveBit=function(A){return(1&A)==1},V.hasBlendMultiplicativeBit=function(A){return(2&A)==2},V.hasIsDoubleSidedBit=function(A){return(4&A)==4},V.hasIsInvertedMaskBit=function(A){return(8&A)==8},V.hasIsVisibleBit=function(A){return(1&A)==1},V.hasVisibilityDidChangeBit=function(A){return(2&A)==2},V.hasOpacityDidChangeBit=function(A){return(4&A)==4},V.hasDrawOrderDidChangeBit=function(A){return(8&A)==8},V.hasRenderOrderDidChangeBit=function(A){return(16&A)==16},V.hasVertexPositionsDidChangeBit=function(A){return(32&A)==32},V.hasBlendColorDidChangeBit=function(A){return(64&A)==64},V}()),I=(c.Utils=I,function(){function V(){}return V.initializeAmountOfMemory=function(A){16777216<A&&s.initializeAmountOfMemory(A)},V}()),N=(c.Memory=I,i=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0,function(V){V=V||{};var A,G,ke={};for(G in A=A||(V!==void 0?V:{}))A.hasOwnProperty(G)&&(ke[G]=A[G]);var Z,q,et,K,gt,mt=!1,_t=typeof window=="object",ut=typeof importScripts=="function",mt=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&!_t&&!ut,ct=!_t&&!mt&&!ut,Et="",Nt=(mt?(Et=__dirname+"/",K=function(j,$){var ot=ui(j);return ot||(q=q||require("fs"),j=(et=et||require("path")).normalize(j),ot=q.readFileSync(j)),$?ot:ot.toString()},gt=function(j){return pi((j=(j=K(j,!0)).buffer?j:new Uint8Array(j)).buffer),j},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(j){throw j}),process.on("unhandledRejection",a0),A.inspect=function(){return"[Emscripten Module object]"}):ct?(typeof read<"u"&&(K=function(j){var $=ui(j);return $?za($):read(j)}),gt=function(j){var $;if(!($=ui(j))){if(typeof readbuffer=="function")return new Uint8Array(readbuffer(j));pi(typeof($=read(j,"binary"))=="object")}return $},typeof print<"u"&&((console=typeof console>"u"?{}:console).log=print,console.warn=console.error=typeof printErr<"u"?printErr:print)):(_t||ut)&&(ut?Et=self.location.href:document.currentScript&&(Et=document.currentScript.src),Et=(Et=i||Et).indexOf("blob:")!==0?Et.substr(0,Et.lastIndexOf("/")+1):"",K=function(j){try{var $=new XMLHttpRequest;return $.open("GET",j,!1),$.send(null),$.responseText}catch(ot){if(j=ui(j))return za(j);throw ot}},ut&&(gt=function(j){try{var $=new XMLHttpRequest;return $.open("GET",j,!1),$.responseType="arraybuffer",$.send(null),new Uint8Array($.response)}catch(ot){if(j=ui(j))return j;throw ot}}),Z=function(j){var $=De,ot=L0,J=new XMLHttpRequest;J.open("GET",$,!0),J.responseType="arraybuffer",J.onload=function(){var qt;J.status==200||J.status==0&&J.response?ot(J.response):(qt=ui($))?ot(qt.buffer):j()},J.onerror=j,J.send(null)}),A.print||console.log.bind(console)),pe=A.printErr||console.warn.bind(console);for(G in ke)ke.hasOwnProperty(G)&&(A[G]=ke[G]);var ke=null,he=Array(1),qe=0,i0=!1;function pi(j,$){j||a0("Assertion failed: "+$)}var Di,E0,li,r0,Ia=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Va(j,$,ot){var J=$+ot;for(ot=$;j[ot]&&!(J<=ot);)++ot;if(16<ot-$&&j.subarray&&Ia)return Ia.decode(j.subarray($,ot));for(J="";$<ot;){var qt,t,Rt=j[$++];128&Rt?(qt=63&j[$++],(224&Rt)==192?J+=String.fromCharCode((31&Rt)<<6|qt):(t=63&j[$++],(Rt=(240&Rt)==224?(15&Rt)<<12|qt<<6|t:(7&Rt)<<18|qt<<12|t<<6|63&j[$++])<65536?J+=String.fromCharCode(Rt):(Rt-=65536,J+=String.fromCharCode(55296|Rt>>10,56320|1023&Rt)))):J+=String.fromCharCode(Rt)}return J}function Ra(j,$){return j?Va(li,j,$):""}function Ta(j){return 0<j%16777216&&(j+=16777216-j%16777216),j}function Fa(j){Di=j,A.HEAP8=E0=new Int8Array(j),A.HEAP16=new Int16Array(j),A.HEAP32=r0=new Int32Array(j),A.HEAPU8=li=new Uint8Array(j),A.HEAPU16=new Uint16Array(j),A.HEAPU32=new Uint32Array(j),A.HEAPF32=new Float32Array(j),A.HEAPF64=new Float64Array(j)}function D0(j){for(;0<j.length;){var $,ot=j.shift();typeof ot=="function"?ot():typeof($=ot.C)=="number"?ot.w===void 0?A.dynCall_v($):A.dynCall_vi($,ot.w):$(ot.w===void 0?null:ot.w)}}typeof TextDecoder<"u"&&new TextDecoder("utf-16le"),_t=A.TOTAL_MEMORY||16777216,_t=(Di=A.buffer||new ArrayBuffer(_t)).byteLength,Fa(Di),r0[1156]=5247712;var ba=[],V2=[],R2=[],Ea=[],yi=(Math.imul&&Math.imul(4294967295,5)===-5||(Math.imul=function(j,$){var ot=65535&j,J=65535&$;return ot*J+((j>>>16)*J+ot*($>>>16)<<16)|0}),Math.clz32||(Math.clz32=function(j){var $=32,ot=j>>16;return ot&&($-=16,j=ot),(ot=j>>8)&&($-=8,j=ot),(ot=j>>4)&&($-=4,j=ot),(ot=j>>2)&&($-=2,j=ot),j>>1?$-2:$-j}),Math.trunc||(Math.trunc=function(j){return j<0?Math.ceil(j):Math.floor(j)}),0),pr=null,s0=null;function a0(j){throw A.onAbort&&A.onAbort(j),Nt(j),pe(j),i0=!0,"abort("+j+"). Build with -s ASSERTIONS=1 for more info."}A.preloadedImages={},A.preloadedAudios={};var De=null,n0="data:application/octet-stream;base64,";function Da(j){return j.replace(/\b__Z[\w\d_]+/g,function($){return $==$?$:$+" ["+$+"]"})}function La(){var j=Error();if(!j.stack){try{throw Error(0)}catch($){j=$}if(!j.stack)return"(no stack trace available)"}return j.stack.toString()}var yr=[null,[],[]];function Ar(j,$){var ot=yr[j];$===0||$===10?((j===1?Nt:pe)(Va(ot,0)),ot.length=0):ot.push($)}function Oa(j,$,ot,J){try{for(var qt=0,t=0;t<ot;t++){for(var Rt=r0[$+8*t>>2],ce=r0[$+(8*t+4)>>2],B=0;B<ce;B++)Ar(j,li[Rt+B]);qt+=ce}return r0[J>>2]=qt,0}catch(Xt){return typeof FS<"u"&&Xt instanceof FS.A||a0(Xt),Xt.B}}function Ua(){return E0.length}function Na(j){try{var $=new ArrayBuffer(j);if($.byteLength==j)return new Int8Array($).set(E0),b2($),Fa($),1}catch{}}var T2=!(De="data:application/octet-stream;base64,AAAAAAAAAAARAAoAERERAAAAAAUAAAAAAAAJAAAAAAsAAAAAAAAAABEADwoREREDCgcAARMJCwsAAAkGCwAACwAGEQAAABEREQAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAARAAoKERERAAoAAAIACQsAAAAJAAsAAAsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAA0AAAAEDQAAAAAJDgAAAAAADgAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAPAAAAAA8AAAAACRAAAAAAABAAABAAABIAAAASEhIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAABISEgAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAoAAAAACgAAAAAJCwAAAAAACwAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAwAAAAACQwAAAAAAAwAAAwAADAxMjM0NTY3ODlBQkNERUYFAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAALgLAAAABAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAK/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBbiBlcnJvciBvY2N1cnJlZCBpbiB0aGUgaW50ZXJwb2xhdGlvbiBmb3IgYmxlbmQgc2hhcGVzLiBDb21iaW5hdGlvbkNvdW50IGlzICVkLgBbQ1NNXSBbRV1XYXJwRGVmb3JtZXI6OlRyYW5zZm9ybVRhcmdldCgpIGVycm9yLiBbJWRdIHAwMT0oJS40ZiAsICUuNGYpCgBbQ1NNXSBbRV1Jbml0aWFsaXplRGVmb3JtZXJzKCk6IFVua25vd24gRGVmb3JtZXIgVHlwZS4KAFtDU01dIFtFXWNzbUhhc01vY0NvbnNpc3RlbmN5OiBUaGlzIG1vYzMgc2l6ZSBpcyBpbnZhbGlkLgoATU9DMwBbQ1NNXSBbRV1jc21IYXNNb2NDb25zaXN0ZW5jeTogRmlsZVR5cGUgaXMgaW52YWxpZC4KAFtDU01dIFtFXWNzbUhhc01vY0NvbnNpc3RlbmN5OiBUaGlzIG1vYzMgdmVyIGlzIGludmFsaWQgW3ZlcjolZF0uCgBbQ1NNXSBbRV1jc21IYXNNb2NDb25zaXN0ZW5jeTogVGhlIENvcmUgdW5zdXBwb3J0IGxhdGVyIHRoYW4gbW9jMyB2ZXI6WyVkXS4gVGhpcyBtb2MzIHZlciBpcyBbJWRdLgoAW0NTTV0gW0VdY3NtSGFzTW9jQ29uc2lzdGVuY3k6IEhlYWRlciBzZWN0aW9uIGlzIGludmFsaWQuCgBbQ1NNXSBbRV1jc21IYXNNb2NDb25zaXN0ZW5jeTogRGF0YSBzZWN0aW9uIGlzIGludmFsaWQuCgBMaXZlMkQgQ3ViaXNtIFNESyBDb3JlIFZlcnNpb24gJWQuJWQuJWQAW0NTTV0gW0VdY3NtUmV2aXZlTW9jSW5QbGFjZSBpcyBmYWlsZWQuIENvcnJ1cHRlZCAgbW9jMyBmaWxlLgoAW0NTTV0gW0VdY3NtUmV2aXZlTW9jSW5QbGFjZSBpcyBmYWlsZWQuIFRoZSBDb3JlIHVuc3VwcG9ydCBsYXRlciB0aGFuIG1vYzMgdmVyOlslZF0uIFRoaXMgbW9jMyB2ZXIgaXMgWyVkXS4KAFtDU01dIFtFXWNzbUdldE1vY1ZlcnNpb24gaXMgZmFpbGVkLiBDb3JydXB0ZWQgbW9jMyBmaWxlLgoAW0NTTV0gW0VdJXM6ICVzCgBjc21HZXRNb2NWZXJzaW9uACJhZGRyZXNzIiBpcyBudWxsLgBjc21IYXNNb2NDb25zaXN0ZW5jeQAiYWRkcmVzcyIgYWxpZ25tZW50IGlzIGludmFsaWQuACJzaXplIiBpcyBpbnZhbGlkLgBjc21SZXZpdmVNb2NJblBsYWNlAGNzbVJlYWRDYW52YXNJbmZvACJtb2RlbCIgaXMgaW52YWxpZC4AIm91dFNpemVJblBpeGVscyIgaXMgbnVsbC4AIm91dE9yaWdpbkluUGl4ZWxzIiBpcyBudWxsLgAib3V0UGl4ZWxzUGVyVW5pdCIgaXMgbnVsbC4AY3NtR2V0U2l6ZW9mTW9kZWwAIm1vYyIgaXMgaW52YWxpZC4AY3NtSW5pdGlhbGl6ZU1vZGVsSW5QbGFjZQAic2l6ZSIgaXMgaW52YWxpZABjc21VcGRhdGVNb2RlbABjc21HZXRQYXJhbWV0ZXJDb3VudABjc21HZXRQYXJhbWV0ZXJJZHMAY3NtR2V0UGFyYW1ldGVyVHlwZXMAY3NtR2V0UGFyYW1ldGVyTWluaW11bVZhbHVlcwBjc21HZXRQYXJhbWV0ZXJNYXhpbXVtVmFsdWVzAGNzbUdldFBhcmFtZXRlckRlZmF1bHRWYWx1ZXMAY3NtR2V0UGFyYW1ldGVyVmFsdWVzAGNzbUdldFBhcnRDb3VudABjc21HZXRQYXJ0SWRzAGNzbUdldFBhcnRPcGFjaXRpZXMAY3NtR2V0UGFydFBhcmVudFBhcnRJbmRpY2VzAGNzbUdldERyYXdhYmxlQ291bnQAY3NtR2V0RHJhd2FibGVJZHMAY3NtR2V0RHJhd2FibGVDb25zdGFudEZsYWdzAGNzbUdldERyYXdhYmxlRHluYW1pY0ZsYWdzAGNzbUdldERyYXdhYmxlVGV4dHVyZUluZGljZXMAY3NtR2V0RHJhd2FibGVEcmF3T3JkZXJzAGNzbUdldERyYXdhYmxlUmVuZGVyT3JkZXJzAGNzbUdldERyYXdhYmxlT3BhY2l0aWVzAGNzbUdldERyYXdhYmxlTWFza0NvdW50cwBjc21HZXREcmF3YWJsZU1hc2tzAGNzbUdldERyYXdhYmxlVmVydGV4Q291bnRzAGNzbUdldERyYXdhYmxlVmVydGV4UG9zaXRpb25zAGNzbUdldERyYXdhYmxlVmVydGV4VXZzAGNzbUdldERyYXdhYmxlSW5kZXhDb3VudHMAY3NtR2V0RHJhd2FibGVJbmRpY2VzAGNzbUdldERyYXdhYmxlTXVsdGlwbHlDb2xvcnMAY3NtR2V0RHJhd2FibGVTY3JlZW5Db2xvcnMAY3NtR2V0RHJhd2FibGVQYXJlbnRQYXJ0SW5kaWNlcwBjc21SZXNldERyYXdhYmxlRHluYW1pY0ZsYWdzAGNzbUdldFBhcmFtZXRlcktleUNvdW50cwBjc21HZXRQYXJhbWV0ZXJLZXlWYWx1ZXMAW0NTTV0gW1ddUm90YXRpb25EZWZvcm1lcjogTm90IGZvdW5kIHRyYW5zZm9ybWVkIERpcmVjdGlvbi4KAFtDU01dIFtFXVVwZGF0ZURlZm9ybWVySGllcmFyY2h5KCk6IFVua25vd24gRGVmb3JtZXIgVHlwZS4KACVzCgAtKyAgIDBYMHgAKG51bGwpAC0wWCswWCAwWC0weCsweCAweABpbmYASU5GAG5hbgBOQU4ALg==");function za(j){for(var $=[],ot=0;ot<j.length;ot++){var J=j[ot];255<J&&(T2&&pi(!1,"Character code "+J+" ("+String.fromCharCode(J)+")  at offset "+ot+" not in 0x00-0xFF."),J&=255),$.push(String.fromCharCode(J))}return $.join("")}var F2=typeof atob=="function"?atob:function(j){var $="",ot=0;j=j.replace(/[^A-Za-z0-9\+\/=]/g,"");do var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(j.charAt(ot++)),Rt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(j.charAt(ot++)),J="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(j.charAt(ot++)),qt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(j.charAt(ot++)),t=t<<2|Rt>>4,Rt=(15&Rt)<<4|J>>2,ce=(3&J)<<6|qt;while($+=String.fromCharCode(t),J!==64&&($+=String.fromCharCode(Rt)),qt!==64&&($+=String.fromCharCode(ce)),ot<j.length);return $};function ui(j){if(String.prototype.startsWith?j.startsWith(n0):j.indexOf(n0)===0){if(j=j.slice(n0.length),typeof mt=="boolean"&&mt){try{var $=Buffer.from(j,"base64")}catch{$=new Buffer(j,"base64")}var ot=new Uint8Array($.buffer,$.byteOffset,$.byteLength)}else try{for(var J=F2(j),qt=new Uint8Array(J.length),$=0;$<J.length;++$)qt[$]=J.charCodeAt($);ot=qt}catch{throw Error("Converting base64 string to bytes failed.")}return ot}}var L0,xr,o0,ut=function(j,$,ot){var J=new j.Int8Array(ot),qt=new j.Int16Array(ot),t=new j.Int32Array(ot),Rt=new j.Uint8Array(ot),ce=new j.Uint16Array(ot),B=new j.Float32Array(ot),Xt=new j.Float64Array(ot),fe=0|$.v,ze=j.Math.floor,xe=j.Math.pow,Ge=j.Math.cos,Li=j.Math.sin,ye=j.Math.atan2,ie=j.Math.imul,Ai=j.Math.clz32,Oi=$.a,le=$.b,ge=$.c,L2=$.d,O2=$.e,U2=$.f,N2=$.g,z2=$.h,G2=$.i,X2=$.j,Y2=$.k,j2=$.l,H2=$.m,C=4832;function W2(e,r){e|=0;var a,m,f,n,x,y,u,l,g,p,M,k,b,P,E,S,z,O,H,U,it,ft,rt,st,ht,dt,Y,yt,at,nt,vt,kt,Mt,Yt,Gt,Ot,Tt,jt,Kt,Ut,Ht,wt,Pt,X,ae,zt,h=0,d=0,v=0,L=0,tt=0,lt=0,Ft=0,Zt=0,$t=0,Jt=0,te=0,Vt=0,Xe=0,Se=0,Ke=0,ve=0,F=0,c0=0,j0=0,bt=0,Re=0,Ni=0,wi=0,f0=0,Le=0,zi=0,H0=0,Qe=0,pn=0,hi=0,g0=0,Bt=0,Dt=0,ti=0,Lt=0,W=0,R=0,d0=C,h=C=C+63&-64;if(C=C+624|0,zt=h+616|0,U=h+608|0,L=h+600|0,v=h+592|0,W=h,(r|=0)>>>0<1280)return pt(0,993,h+576|0),C=d0,(R=0)|R;if(0|wr(e))return pt(0,1057,h+584|0),C=d0,(R=0)|R;if(d=255&(h=0|J[(wi=e+4|0)>>0]),!(h<<24>>24))return t[v>>2]=d,pt(0,1110,v),C=d0,(R=0)|R;if(4<(255&h))return t[L>>2]=4,t[L+4>>2]=d,pt(0,1177,L),C=d0,(R=0)|R;(j0=(0|J[(c0=e+5|0)>>0])!=0)&&($e(wi,1),Q(e+64|0,4,160)),Pe(0|W,0,576),Ir(e,W),zi=0|J[wi>>0],F=e+r|0,h=128+(bt=0|t[W>>2])|0;e:do if(bt>>>0<e>>>0|F>>>0<bt>>>0||h>>>0<e>>>0|F>>>0<h>>>0||(Jt=(Zt=0|t[W+4>>2])+64|0,Zt>>>0<e>>>0|F>>>0<Zt>>>0)||Zt>>>0<h>>>0|Jt>>>0<e>>>0|F>>>0<Jt>>>0||!(-1<(0|(H0=0|t[bt>>2])))||(te=($t=0|t[W+8>>2])+(ve=H0<<2)|0,$t>>>0<e>>>0|F>>>0<$t>>>0)||$t>>>0<Jt>>>0|te>>>0<e>>>0|F>>>0<te>>>0||(Vt=(Qe=0|t[(pn=W+12|0)>>2])+(H0<<6)|0,Qe>>>0<e>>>0|F>>>0<Qe>>>0)||Qe>>>0<te>>>0|Vt>>>0<e>>>0|F>>>0<Vt>>>0||(Xe=(tt=0|t[(hi=W+16|0)>>2])+ve|0,tt>>>0<e>>>0|F>>>0<tt>>>0)||tt>>>0<Vt>>>0|Xe>>>0<e>>>0|F>>>0<Xe>>>0||(Se=(lt=0|t[(g0=W+20|0)>>2])+ve|0,lt>>>0<e>>>0|F>>>0<lt>>>0)||lt>>>0<Xe>>>0|Se>>>0<e>>>0|F>>>0<Se>>>0||(Ke=(Ft=0|t[(Bt=W+24|0)>>2])+ve|0,Ft>>>0<e>>>0|F>>>0<Ft>>>0))R=319;else{if(Ft>>>0<Se>>>0|Ke>>>0<e>>>0|F>>>0<Ke>>>0){R=319;break}if(d=(h=0|t[(O=W+28|0)>>2])+ve|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<Ke>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[(Jt=W+32|0)>>2])+ve|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(L=(h=0|t[(H=W+36|0)>>2])+ve|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if((0|(d=0|t[bt+4>>2]))<=-1){R=319;break}if(v=(h=0|t[W+40>>2])+(r=d<<2)|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<L>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(d=(h=0|t[(Ke=W+44|0)>>2])+(d<<6)|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[($t=W+48|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(d=(h=0|t[(Re=W+52|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[(ve=W+56|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(d=(h=0|t[(f0=W+60|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[(Ni=W+64|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(d=(h=0|t[(te=W+68|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[(Le=W+72|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if((0|(h=0|t[bt+8>>2]))<=-1){R=319;break}if(L=(d=0|t[W+76>>2])+(Zt=h<<2)|0,d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(d>>>0<v>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if(d=(h=0|t[(ht=W+80|0)>>2])+Zt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<L>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[(Lt=W+84|0)>>2])+Zt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(d=(h=0|t[(Dt=W+92|0)>>2])+Zt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[(Yt=W+96|0)>>2])+Zt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(L=(h=0|t[(rt=W+100|0)>>2])+Zt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if((0|(h=0|t[bt+12>>2]))<=-1){R=319;break}if(v=(d=0|t[W+108>>2])+(Ft=h<<2)|0,d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(d>>>0<L>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(d=(h=0|t[(Kt=W+112|0)>>2])+Ft|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[(ti=W+116|0)>>2])+Ft|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(d=(h=0|t[W+124>>2])+Ft|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if((0|(L=0|t[bt+16>>2]))<=-1){R=319;break}if(v=(h=0|t[W+128>>2])+(lt=L<<2)|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(d=(h=0|t[W+132>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[W+136>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(d=(h=0|t[W+140>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[(it=W+144|0)>>2])+(L<<6)|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(d=(h=0|t[(st=W+148|0)>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[(dt=W+152|0)>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(d=(h=0|t[(ae=W+156|0)>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[(jt=W+164|0)>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(d=(h=0|t[(Tt=W+168|0)>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[(Ht=W+172|0)>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(d=(h=0|t[(Ut=W+176|0)>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[(wt=W+180|0)>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(d=(h=0|t[W+184>>2])+L|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[(X=W+188|0)>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(d=(h=0|t[(at=W+192|0)>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[(Mt=W+196|0)>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(d=(h=0|t[(yt=W+200|0)>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[(Ot=W+204|0)>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(L=(h=0|t[(Gt=W+208|0)>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if((0|(d=0|t[bt+20>>2]))<=-1){R=319;break}if(v=(h=0|t[W+212>>2])+(tt=d<<2)|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<L>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(d=(h=0|t[(Pt=W+216|0)>>2])+(d<<6)|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[W+220>>2])+tt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(d=(h=0|t[W+224>>2])+tt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[W+228>>2])+tt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(d=(h=0|t[(vt=W+232|0)>>2])+tt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[(nt=W+236|0)>>2])+tt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(d=(h=0|t[(kt=W+244|0)>>2])+tt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[(Y=W+248|0)>>2])+tt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if((0|(h=0|t[bt+24>>2]))<=-1){R=319;break}if(L=(d=0|t[W+272>>2])+(h<<2)|0,d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(d>>>0<v>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if((0|(h=0|t[bt+28>>2]))<=-1){R=319;break}if(r=(d=0|t[W+276>>2])+(v=h<<2)|0,d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(d>>>0<L>>>0|r>>>0<e>>>0|F>>>0<r>>>0){R=319;break}if(L=(h=0|t[(ft=W+280|0)>>2])+v|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<r>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if((0|(h=0|t[bt+32>>2]))<=-1){R=319;break}if(v=(d=0|t[W+284>>2])+(r=h<<2)|0,d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(d>>>0<L>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(d=(h=0|t[W+288>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[W+292>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(d=(h=0|t[W+296>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[W+300>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(d=(h=0|t[(Xe=W+304|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(L=(h=0|t[(z=W+308|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if((0|(h=0|t[bt+36>>2]))<=-1){R=319;break}if(v=(d=0|t[W+312>>2])+(r=h<<2)|0,d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(d>>>0<L>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(d=(h=0|t[W+316>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[(S=W+320|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if((0|(h=0|t[bt+40>>2]))<=-1){R=319;break}if(L=(d=0|t[W+324>>2])+(h<<2)|0,d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(d>>>0<v>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if((0|(h=0|t[bt+44>>2]))<=-1){R=319;break}if(r=(d=0|t[(E=W+336|0)>>2])+(h<<2)|0,d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(d>>>0<L>>>0|r>>>0<e>>>0|F>>>0<r>>>0){R=319;break}if((0|(h=0|t[bt+48>>2]))<=-1){R=319;break}if(L=(d=0|t[W+340>>2])+(v=h<<2)|0,d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(d>>>0<r>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if(r=(h=0|t[(P=W+344|0)>>2])+v|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<L>>>0|r>>>0<e>>>0|F>>>0<r>>>0){R=319;break}if((0|(h=0|t[bt+52>>2]))<=-1){R=319;break}if(L=(d=0|t[W+328>>2])+(v=h<<2)|0,d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(d>>>0<r>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if(v=(h=0|t[(Se=W+332|0)>>2])+v|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<L>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if((0|(h=0|t[bt+56>>2]))<=-1){R=319;break}if(L=(d=0|t[W+428>>2])+(h<<2)|0,d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(d>>>0<v>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if((0|(h=0|t[bt+60>>2]))<=-1){R=319;break}if(v=(d=0|t[W+432>>2])+(h<<2)|0,d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(d>>>0<L>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if((0|(h=0|t[bt+64>>2]))<=-1){R=319;break}if(L=(d=0|t[W+436>>2])+(h<<1)|0,d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(d>>>0<v>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if((0|(h=0|t[bt+68>>2]))<=-1){R=319;break}if(v=(d=0|t[(b=W+440|0)>>2])+(h<<2)|0,d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(d>>>0<L>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if((0|(h=0|t[bt+72>>2]))<=-1){R=319;break}if(L=(d=0|t[W+444>>2])+(r=h<<2)|0,d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(d>>>0<v>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if(d=(h=0|t[(k=W+448|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<L>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[W+452>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(d=(h=0|t[W+456>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[W+460>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if((0|(h=0|t[bt+76>>2]))<=-1){R=319;break}if(L=(d=0|t[W+464>>2])+(r=h<<2)|0,d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(d>>>0<v>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if(d=(h=0|t[(x=W+468|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<L>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[(M=W+472|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if((0|(d=0|t[bt+80>>2]))<=-1){R=319;break}if(L=(h=0|t[W+476>>2])+(r=d<<2)|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if(d=(h=0|t[(n=W+480|0)>>2])+(d<<6)|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<L>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[(m=W+484|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(d=(h=0|t[(f=W+488|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[(a=W+492|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(d=(h=0|t[(y=W+496|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[(g=W+500|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if(d=(h=0|t[(p=W+504|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(v=(h=0|t[(u=W+508|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}if((0|(d=0|t[bt+84>>2]))<=-1){R=319;break}if(L=(h=0|t[W+512>>2])+(d<<2)|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<v>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if(r=(h=0|t[(l=W+516|0)>>2])+(d<<1)|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<L>>>0|r>>>0<e>>>0|F>>>0<r>>>0){R=319;break}if((0|(h=0|t[bt+88>>2]))<=-1){R=319;break}if(v=(d=0|t[W+520>>2])+(h<<2)|0,d>>>0<e>>>0|F>>>0<d>>>0){R=319;break}if(d>>>0<r>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break}do if(1<(255&zi)){if(d=(h=0|t[W+104>>2])+Zt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break e}if((255&zi)<=3)break;if(v=(h=0|t[W+260>>2])+tt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break e}if(d=(h=0|t[W+264>>2])+tt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break e}if(L=(h=0|t[W+268>>2])+tt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<d>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break e}if(v=(h=0|t[W+88>>2])+Zt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<L>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break e}if(d=(h=0|t[W+120>>2])+Ft|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break e}if(L=(h=0|t[W+160>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<d>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break e}if((0|(h=0|t[bt+92>>2]))<=-1){R=319;break e}if(v=(d=0|t[W+524>>2])+(r=h<<2)|0,d>>>0<e>>>0|F>>>0<d>>>0){R=319;break e}if(d>>>0<L>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break e}if(d=(h=0|t[W+528>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break e}if(L=(h=0|t[W+532>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<d>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break e}if((0|(h=0|t[bt+96>>2]))<=-1){R=319;break e}if(v=(d=0|t[W+536>>2])+(r=h<<2)|0,d>>>0<e>>>0|F>>>0<d>>>0){R=319;break e}if(d>>>0<L>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break e}if(L=(h=0|t[W+540>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<v>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break e}if(d=(h=0|t[W+544>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<L>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break e}if(v=(h=0|t[W+240>>2])+tt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break e}if(d=(h=0|t[W+252>>2])+tt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break e}if(L=(h=0|t[W+256>>2])+tt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<d>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break e}if((0|(h=0|t[bt+100>>2]))<=-1){R=319;break e}if(v=(d=0|t[W+348>>2])+(r=h<<2)|0,d>>>0<e>>>0|F>>>0<d>>>0){R=319;break e}if(d>>>0<L>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break e}if(d=(h=0|t[W+352>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break e}if(L=(h=0|t[W+356>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<d>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break e}if((0|(h=0|t[bt+104>>2]))<=-1){R=319;break e}if(v=(d=0|t[W+360>>2])+(r=h<<2)|0,d>>>0<e>>>0|F>>>0<d>>>0){R=319;break e}if(d>>>0<L>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break e}if(d=(h=0|t[W+364>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break e}if(v=(h=0|t[W+368>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break e}if(d=(h=0|t[W+372>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break e}if(L=(h=0|t[W+376>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<d>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break e}if((0|(h=0|t[bt+108>>2]))<=-1){R=319;break e}if(v=(d=0|t[W+380>>2])+(r=h<<2)|0,d>>>0<e>>>0|F>>>0<d>>>0){R=319;break e}if(d>>>0<L>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break e}if(d=(h=0|t[W+384>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break e}if(L=(h=0|t[W+388>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<d>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break e}if((0|(h=0|t[bt+112>>2]))<=-1){R=319;break e}if(v=(d=0|t[W+392>>2])+(r=h<<2)|0,d>>>0<e>>>0|F>>>0<d>>>0){R=319;break e}if(d>>>0<L>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break e}if(d=(h=0|t[W+396>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break e}if(v=(h=0|t[W+400>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<d>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break e}if((0|(h=0|t[bt+116>>2]))<=-1){R=319;break e}if(L=(d=0|t[W+404>>2])+(h<<2)|0,d>>>0<e>>>0|F>>>0<d>>>0){R=319;break e}if(d>>>0<v>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break e}if((0|(h=0|t[bt+120>>2]))<=-1){R=319;break e}if(v=(d=0|t[W+408>>2])+(r=h<<2)|0,d>>>0<e>>>0|F>>>0<d>>>0){R=319;break e}if(d>>>0<L>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break e}if(d=(h=0|t[W+412>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<v>>>0|d>>>0<e>>>0|F>>>0<d>>>0){R=319;break e}if(L=(h=0|t[W+416>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<d>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break e}if((0|(h=0|t[bt+124>>2]))<=-1){R=319;break e}if(v=(d=0|t[W+420>>2])+(h<<=2)|0,d>>>0<e>>>0|F>>>0<d>>>0){R=319;break e}if(d>>>0<L>>>0|v>>>0<e>>>0|F>>>0<v>>>0){R=319;break e}if(h=(d=0|t[W+424>>2])+h|0,d>>>0<e>>>0|F>>>0<d>>>0){R=319;break e}if(d>>>0<v>>>0|h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}}while(0);wi=j0?(Xa(e),Qe=(J[c0>>0]=0)|t[W>>2],zi=0|J[wi>>0],Vt=0|t[Qe>>2],e=Qe,d=0|t[pn>>2],Qe):(Vt=H0,d=Qe,e=bt);t:do if(0<(0|Vt)){h=0;do if(63<(0|u0(d+(h<<6)|0))>>>0)break t;while((0|(h=h+1|0))<(0|Vt));h=0|t[hi>>2],d=0|t[(v=e+48|0)>>2],L=0;do if(hi=0|t[h+(L<<2)>>2],L=L+1|0,(0|hi)<0|(0|d)<=(0|hi))break t;while((0|L)<(0|Vt));lt=0|t[g0>>2],h=0|t[Bt>>2],d=0|t[e+24>>2],tt=0;do if(0|(L=0|t[h+(tt<<2)>>2])&&((0|L)<0|(0|d)<(0|L)||!(-1<(0|(r=0|t[lt+(tt<<2)>>2]))&(0|r)<(0|d))||(Bt=r+L|0)>>>31|(0|d)<(0|Bt)|0))break t;while((0|(tt=tt+1|0))<(0|Vt));h=0|t[O>>2],d=0;do if(1<(0|t[h+(d<<2)>>2])>>>0)break t;while((0|(d=d+1|0))<(0|Vt));h=0|t[Jt>>2],d=0;do if(1<(0|t[h+(d<<2)>>2])>>>0)break t;while((0|(d=d+1|0))<(0|Vt));for(h=0|t[H>>2],d=0;;){if(Bt=0|t[h+(d<<2)>>2],d=d+1|0,(0|Bt)<-1|(0|Vt)<=(0|Bt))break t;if((0|Vt)<=(0|d)){R=345;break}}}else v=e+48|0,R=345;while(0);t:do if((0|R)==345){Jt=0|t[e+4>>2],h=0|t[Ke>>2];i:do if(0<(0|Jt)){d=0;do if(63<(0|u0(h+(d<<6)|0))>>>0)break t;while((0|(d=d+1|0))<(0|Jt));d=0|t[$t>>2],Ft=0|t[v>>2],h=0;do if(Bt=0|t[d+(h<<2)>>2],h=h+1|0,(0|Bt)<0|(0|Ft)<=(0|Bt))break t;while((0|h)<(0|Jt));h=0|t[Re>>2],d=0;do if(1<(0|t[h+(d<<2)>>2])>>>0)break t;while((0|(d=d+1|0))<(0|Jt));h=0|t[ve>>2],d=0;do if(1<(0|t[h+(d<<2)>>2])>>>0)break t;while((0|(d=d+1|0))<(0|Jt));h=0|t[f0>>2],d=0;do if(Bt=0|t[h+(d<<2)>>2],d=d+1|0,(0|Bt)<-1|(0|Vt)<=(0|Bt))break t;while((0|d)<(0|Jt));h=0|t[Ni>>2],d=0;do if(Bt=0|t[h+(d<<2)>>2],d=d+1|0,(0|Bt)<-1|(0|Jt)<=(0|Bt))break t;while((0|d)<(0|Jt));lt=0|t[te>>2],h=0;do if(1<(0|t[lt+(h<<2)>>2])>>>0)break t;while((0|(h=h+1|0))<(0|Jt));for(d=0|t[Le>>2],h=e+8|0,L=e+12|0,tt=0;;){switch(v=0|t[d+(tt<<2)>>2],0|t[lt+(tt<<2)>>2]){case 0:r=h;break;case 1:r=L;break;default:break t}if((0|v)<=-1||(tt=tt+1|0,(0|v)>=(0|t[r>>2])))break t;if((0|Jt)<=(0|tt)){F=Ft;break i}}}else F=0|t[v>>2],h=e+8|0;while(0);if(Le=0|t[h>>2],h=0|t[W+76>>2],Ni=0<(0|Le)){d=0;do if(Bt=0|t[h+(d<<2)>>2],d=d+1|0,(0|Bt)<0|(0|F)<=(0|Bt))break t;while((0|d)<(0|Le));h=0|t[ht>>2],d=0|t[Lt>>2],v=0|t[(lt=e+28|0)>>2],tt=0;do if(0|(L=0|t[d+(tt<<2)>>2])&&((0|L)<0|(0|v)<(0|L)||!(-1<(0|(r=0|t[h+(tt<<2)>>2]))&(0|r)<(0|v))||(Bt=r+L|0)>>>31|(0|v)<(0|Bt)|0))break t;while((0|(tt=tt+1|0))<(0|Le));for(L=0|t[Yt>>2],h=0|t[rt>>2],d=0|t[Dt>>2],v=0;;){if(hi=0|t[L+(v<<2)>>2],g0=0|t[h+(v<<2)>>2],Bt=0|t[d+(v<<2)>>2],v=v+1|0,!((0|ie(g0+1|0,hi+1|0))==(0|Bt)&0<(0|hi)&0<(0|g0)&0<(0|Bt)))break t;if((0|Le)<=(0|v)){f0=lt;break}}}else f0=e+28|0;if(bt=0|t[e+12>>2],h=0|t[W+108>>2],j0=0<(0|bt)){d=0;do if(Bt=0|t[h+(d<<2)>>2],d=d+1|0,(0|Bt)<0|(0|F)<=(0|Bt))break t;while((0|d)<(0|bt));for(h=0|t[Kt>>2],d=0|t[ti>>2],v=0|t[(tt=e+32|0)>>2],lt=0;;){if(0|(L=0|t[d+(lt<<2)>>2])&&((0|L)<0|(0|v)<(0|L)||!(-1<(0|(r=0|t[h+(lt<<2)>>2]))&(0|r)<(0|v))||(Bt=r+L|0)>>>31|(0|v)<(0|Bt)|0))break t;if((0|bt)<=(0|(lt=lt+1|0))){Zt=tt;break}}}else Zt=e+32|0;if(te=0|t[(ve=e+16|0)>>2],h=0|t[it>>2],$t=0<(0|te)){d=0;do if(63<(0|u0(h+(d<<6)|0))>>>0)break t;while((0|(d=d+1|0))<(0|te));h=0|t[st>>2],d=0;do if(Bt=0|t[h+(d<<2)>>2],d=d+1|0,(0|Bt)<0|(0|F)<=(0|Bt))break t;while((0|d)<(0|te));h=0|t[dt>>2],d=0|t[ae>>2],v=0|t[(Ft=e+36|0)>>2],tt=0;do if(0|(L=0|t[d+(tt<<2)>>2])&&((0|L)<0|(0|v)<(0|L)||!(-1<(0|(r=0|t[h+(tt<<2)>>2]))&(0|r)<(0|v))||(Bt=r+L|0)>>>31|(0|v)<(0|Bt)|0))break t;while((0|(tt=tt+1|0))<(0|te));h=0|t[jt>>2],d=0;do if(1<(0|t[h+(d<<2)>>2])>>>0)break t;while((0|(d=d+1|0))<(0|te));h=0|t[Tt>>2],d=0;do if(1<(0|t[h+(d<<2)>>2])>>>0)break t;while((0|(d=d+1|0))<(0|te));h=0|t[Ht>>2],d=0;do if(Bt=0|t[h+(d<<2)>>2],d=d+1|0,(0|Bt)<-1|(0|Vt)<=(0|Bt))break t;while((0|d)<(0|te));h=0|t[Ut>>2],d=0;do if(Bt=0|t[h+(d<<2)>>2],d=d+1|0,(0|Bt)<-1|(0|Jt)<=(0|Bt))break t;while((0|d)<(0|te));h=0|t[wt>>2],d=0;do if((0|t[h+(d<<2)>>2])<0)break t;while((0|(d=d+1|0))<(0|te));L=0|t[X>>2],h=0;do if((0|t[L+(h<<2)>>2])<0)break t;while((0|(h=h+1|0))<(0|te));h=0|t[at>>2],d=0|t[e+60>>2],v=0;do if(Bt=(0|t[h+(v<<2)>>2])+(t[L+(v<<2)>>2]<<1)|0,v=v+1|0,Bt>>>31|(0|d)<(0|Bt)|0)break t;while((0|v)<(0|te));tt=0|t[Mt>>2],h=0|t[yt>>2],d=0|t[e+64>>2],r=0;do if(0|(v=0|t[h+(r<<2)>>2])&&((0|v)<0|(0|d)<(0|v)||!(-1<(0|(L=0|t[tt+(r<<2)>>2]))&(0|L)<(0|d))||(Bt=L+v|0)>>>31|(0|d)<(0|Bt)|0))break t;while((0|(r=r+1|0))<(0|te));for(tt=0|t[Ot>>2],h=0|t[Gt>>2],d=0|t[(lt=e+68|0)>>2],r=0;;){if(0|(v=0|t[h+(r<<2)>>2])&&((0|v)<0|(0|d)<(0|v)||!(-1<(0|(L=0|t[tt+(r<<2)>>2]))&(0|L)<(0|d))||(Bt=L+v|0)>>>31|(0|d)<(0|Bt)|0))break t;if((0|te)<=(0|(r=r+1|0))){c0=Ft;break}}}else c0=e+36|0,lt=e+68|0;if(Re=0|t[e+20>>2],h=0|t[Pt>>2],Ke=0<(0|Re)){d=0;do if(63<(0|u0(h+(d<<6)|0))>>>0)break t;while((0|(d=d+1|0))<(0|Re));h=0|t[vt>>2],d=0;do if(1<(0|t[h+(d<<2)>>2])>>>0)break t;while((0|(d=d+1|0))<(0|Re));h=0|t[nt>>2],d=0;do if((0|t[h+(d<<2)>>2])<0)break t;while((0|(d=d+1|0))<(0|Re));for(tt=0|t[kt>>2],h=0|t[Y>>2],d=0|t[e+52>>2],r=0;;){if(0|(v=0|t[h+(r<<2)>>2])&&((0|v)<0|(0|d)<(0|v)||!(-1<(0|(L=0|t[tt+(r<<2)>>2]))&(0|L)<(0|d))||(Bt=L+v|0)>>>31|(0|d)<(0|Bt)|0))break t;if((0|Re)<=(0|(r=r+1|0))){Ft=d;break}}}else Ft=0|t[e+52>>2];if(v=0|t[Dt>>2],h=0|t[ft>>2],L=0|t[e+40>>2],Ni){d=0;do if(Dt=(0|t[h+(d<<2)>>2])+(t[v+(d<<2)>>2]<<1)|0,d=d+1|0,Dt>>>31|(0|L)<(0|Dt)|0)break t;while((0|d)<(0|Le))}if(v=0|t[Zt>>2],h=0|t[Xe>>2],0<(0|v)){d=0;do if(1<(0|t[h+(d<<2)>>2])>>>0)break t;while((0|(d=d+1|0))<(0|v));h=0|t[z>>2],d=0;do if(1<(0|t[h+(d<<2)>>2])>>>0)break t;while((0|(d=d+1|0))<(0|v))}if(Xe=0|t[X>>2],d=0|t[S>>2],$t){h=0;do if(Dt=(0|t[d+(h<<2)>>2])+(t[Xe+(h<<2)>>2]<<1)|0,h=h+1|0,Dt>>>31|(0|L)<(0|Dt)|0)break t;while((0|h)<(0|te))}if(tt=0|t[e+44>>2],h=0|t[E>>2],0<(0|tt)){d=0;do if(Dt=0|t[h+(d<<2)>>2],d=d+1|0,(0|Dt)<0|(0|Ft)<=(0|Dt))break t;while((0|d)<(0|tt))}if(r=0|t[W+340>>2],h=0|t[P>>2],0<(0|F)){L=0;do if(0|(d=0|t[h+(L<<2)>>2])&&((0|d)<0|(0|tt)<(0|d)||!(-1<(0|(v=0|t[r+(L<<2)>>2]))&(0|v)<(0|tt))||(Dt=v+d|0)>>>31|(0|tt)<(0|Dt)|0))break t;while((0|(L=L+1|0))<(0|F))}if(r=0|t[W+328>>2],h=0|t[Se>>2],Se=0|t[e+56>>2],0<(0|Ft)){L=0;do if(0|(d=0|t[h+(L<<2)>>2])&&((0|d)<0|(0|Se)<(0|d)||!(-1<(0|(v=0|t[r+(L<<2)>>2]))&(0|v)<(0|Se))||(Dt=v+d|0)>>>31|(0|Se)<(0|Dt)|0))break t;while((0|(L=L+1|0))<(0|Ft))}if(v=0|t[lt>>2],h=0|t[b>>2],0<(0|v)){d=0;do if(Dt=0|t[h+(d<<2)>>2],d=d+1|0,(0|Dt)<-1|(0|te)<=(0|Dt))break t;while((0|d)<(0|v))}if(lt=0|t[e+72>>2],r=0|t[W+444>>2],h=0|t[k>>2],tt=0|t[e+76>>2],0<(0|lt)){L=0;do if(0|(d=0|t[h+(L<<2)>>2])&&((0|d)<0|(0|tt)<(0|d)||!(-1<(0|(v=0|t[r+(L<<2)>>2]))&(0|v)<(0|tt))||(Dt=v+d|0)>>>31|(0|tt)<(0|Dt)|0))break t;while((0|(L=L+1|0))<(0|lt))}if(r=0|t[W+464>>2],0<(0|tt)){h=0;do if(1<(0|t[r+(h<<2)>>2])>>>0)break t;while((0|(h=h+1|0))<(0|tt));h=0|t[x>>2],L=0;do{switch(d=0|t[h+(L<<2)>>2],0|t[r+(L<<2)>>2]){case 0:v=ve;break;case 1:v=wi;break;default:break t}if((0|d)<=-1||(L=L+1|0,(0|d)>=(0|t[v>>2])))break t}while((0|L)<(0|tt));h=0|t[M>>2],d=0;do if(Dt=0|t[h+(d<<2)>>2],d=d+1|0,(0|Dt)<-1|(0|lt)<=(0|Dt))break t;while((0|d)<(0|tt))}if(Vt=0|t[e+80>>2],h=0|t[n>>2],0<(0|Vt)){d=0;do if(63<(0|u0(h+(d<<6)|0))>>>0)break t;while((0|(d=d+1|0))<(0|Vt));h=0|t[m>>2],d=0;do if(Dt=0|t[h+(d<<2)>>2],d=d+1|0,(0|Dt)<0|(0|F)<=(0|Dt))break t;while((0|d)<(0|Vt));tt=0|t[f>>2],h=0|t[a>>2],d=0|t[e+88>>2],r=0;do if(0|(v=0|t[h+(r<<2)>>2])&&((0|v)<0|(0|d)<(0|v)||!(-1<(0|(L=0|t[tt+(r<<2)>>2]))&(0|L)<(0|d))||(Dt=L+v|0)>>>31|(0|d)<(0|Dt)|0))break t;while((0|(r=r+1|0))<(0|Vt));te=0|t[y>>2],Jt=0|t[ve>>2],h=0;do if(Dt=0|t[te+(h<<2)>>2],h=h+1|0,(0|Dt)<0|(0|Jt)<=(0|Dt))break t;while((0|h)<(0|Vt));$t=0|t[g>>2],h=0;do if(Dt=0|t[$t+(h<<2)>>2],h=h+1|0,(0|Dt)<0|(0|Jt)<=(0|Dt))break t;while((0|h)<(0|Vt));Zt=0|t[p>>2],Ft=0|t[u>>2],h=0|t[e+84>>2],L=0;do if(0|(d=0|t[Ft+(L<<2)>>2])&&((0|d)<0|(0|h)<(0|d)||!(-1<(0|(v=0|t[Zt+(L<<2)>>2]))&(0|v)<(0|h))||(Dt=v+d|0)>>>31|(0|h)<(0|Dt)|0))break t;while((0|(L=L+1|0))<(0|Vt));h=0|t[l>>2],tt=0;do if(d=0|t[Xe+(t[te+(tt<<2)>>2]<<2)>>2],v=0|t[Xe+(t[$t+(tt<<2)>>2]<<2)>>2],L=0|t[Ft+(tt<<2)>>2],r=h+(t[Zt+(tt<<2)>>2]<<1)|0,0<(0|L)){lt=0;do if(!((0|d)>(0|ce[r+(lt<<1)>>1])&&(0|v)>(0|ce[r+((1|lt)<<1)>>1])))break t;while((0|(lt=lt+2|0))<(0|L))}while((0|(tt=tt+1|0))<(0|Vt))}else Jt=0|t[ve>>2];if((255&zi)<=1){h=1;break e}if(h=0|t[W+104>>2],Ni){d=0;do if(1<(0|t[h+(d<<2)>>2])>>>0)break t;while((0|(d=d+1|0))<(0|Le))}if((255&zi)<=3){h=1;break e}if(h=0|t[W+264>>2],d=0|t[W+268>>2],Ke){r=0;do if(0|(v=0|t[d+(r<<2)>>2])&&((0|v)<0|(0|Se)<(0|v)||!(-1<(0|(L=0|t[h+(r<<2)>>2]))&(0|L)<(0|Se))||(Dt=L+v|0)>>>31|(0|Se)<(0|Dt)|0))break t;while((0|(r=r+1|0))<(0|Re))}if((0|(tt=0|t[e+92>>2]))!=(0|t[e+96>>2]))break;if(r=0|t[W+88>>2],L=0|t[Lt>>2],Ni){v=0;do if(0|(h=0|t[L+(v<<2)>>2])&&((0|h)<0|(0|tt)<(0|h)||!(-1<(0|(d=0|t[r+(v<<2)>>2]))&(0|d)<(0|tt))||(Lt=d+h|0)>>>31|(0|tt)<(0|Lt)|0))break t;while((0|(v=v+1|0))<(0|Le))}if(r=0|t[W+120>>2],L=0|t[ti>>2],j0){v=0;do if(0|(h=0|t[L+(v<<2)>>2])&&((0|h)<0|(0|tt)<(0|h)||!(-1<(0|(d=0|t[r+(v<<2)>>2]))&(0|d)<(0|tt))||(Lt=d+h|0)>>>31|(0|tt)<(0|Lt)|0))break t;while((0|(v=v+1|0))<(0|bt))}if(r=0|t[W+160>>2],h=0|t[ae>>2],0<(0|Jt)){L=0;do if(0|(d=0|t[h+(L<<2)>>2])&&((0|d)<0|(0|tt)<(0|d)||!(-1<(0|(v=0|t[r+(L<<2)>>2]))&(0|v)<(0|tt))||(Lt=v+d|0)>>>31|(0|tt)<(0|Lt)|0))break t;while((0|(L=L+1|0))<(0|Jt))}if(d=0|t[W+240>>2],Ke){h=0;do if(1<(0|t[d+(h<<2)>>2])>>>0)break t;while((0|(h=h+1|0))<(0|Re));for(h=0|t[W+252>>2],d=0|t[W+256>>2],v=0|t[e+100>>2],tt=0;;){if(0|(L=0|t[d+(tt<<2)>>2])&&((0|L)<0|(0|v)<(0|L)||!(-1<(0|(r=0|t[h+(tt<<2)>>2]))&(0|r)<(0|v))||(Lt=r+L|0)>>>31|(0|v)<(0|Lt)|0))break t;if((0|Re)<=(0|(tt=tt+1|0))){tt=v;break}}}else tt=0|t[e+100>>2];if(h=0|t[W+348>>2],r=0|t[W+352>>2],0<(0|tt)){L=0;do if(0|(d=0|t[r+(L<<2)>>2])&&((0|d)<0|(0|Se)<(0|d)||!(-1<(0|(v=0|t[h+(L<<2)>>2]))&(0|v)<(0|Se))||(Lt=v+d|0)>>>31|(0|Se)<(0|Lt)|0))break t;while((0|(L=L+1|0))<(0|tt));h=0|t[W+356>>2],v=0;do if((0|(d=0|t[h+(v<<2)>>2]))<=-1||(0|d)>=(0|t[r+(v<<2)>>2]))break t;while((0|(v=v+1|0))<(0|tt))}if($t=0|t[e+104>>2],h=0|t[W+360>>2],0<(0|$t)){d=0;do if(Lt=0|t[h+(d<<2)>>2],d=d+1|0,(0|Lt)<0|(0|tt)<=(0|Lt))break t;while((0|d)<(0|$t));for(h=0|t[W+372>>2],d=0|t[W+376>>2],v=0|t[e+116>>2],tt=0;;){if(0|(L=0|t[d+(tt<<2)>>2])&&((0|L)<0|(0|v)<(0|L)||!(-1<(0|(r=0|t[h+(tt<<2)>>2]))&(0|r)<(0|v))||(Lt=r+L|0)>>>31|(0|v)<(0|Lt)|0))break t;if((0|$t)<=(0|(tt=tt+1|0))){Zt=v;break}}}else Zt=0|t[e+116>>2];if(Ft=0|t[e+108>>2],h=0|t[W+380>>2],0<(0|Ft)){d=0;do if(Lt=0|t[h+(d<<2)>>2],d=d+1|0,(0|Lt)<0|(0|Le)<=(0|Lt))break t;while((0|d)<(0|Ft));lt=0|t[W+384>>2],h=0|t[W+388>>2],L=0;do if(0|(d=0|t[h+(L<<2)>>2])&&((0|d)<0|(0|$t)<(0|d)||!(-1<(0|(v=0|t[lt+(L<<2)>>2]))&(0|v)<(0|$t))||(Lt=v+d|0)>>>31|(0|$t)<(0|Lt)|0))break t;while((0|(L=L+1|0))<(0|Ft));tt=0|t[W+364>>2],r=0|t[W+368>>2],h=0|t[f0>>2],L=0;do if(d=0|t[lt+(L<<2)>>2],0|(v=0|t[r+(d<<2)>>2])&&((0|v)<0|(0|h)<(0|v)||!(-1<(0|(ti=0|t[tt+(d<<2)>>2]))&(0|ti)<(0|h)&((Lt=ti+v|0)>>>31|(0|h)<(0|Lt)|0)==0)))break t;while((0|(L=L+1|0))<(0|Ft))}else r=0|t[W+368>>2],tt=0|t[W+364>>2];if(Ft=0|t[e+112>>2],h=0|t[W+392>>2],0<(0|Ft)){d=0;do if(Lt=0|t[h+(d<<2)>>2],d=d+1|0,(0|Lt)<0|(0|Jt)<=(0|Lt))break t;while((0|d)<(0|Ft));lt=0|t[W+396>>2],h=0|t[W+400>>2],L=0;do if(0|(d=0|t[h+(L<<2)>>2])&&((0|d)<0|(0|$t)<(0|d)||!(-1<(0|(v=0|t[lt+(L<<2)>>2]))&(0|v)<(0|$t))||(Lt=v+d|0)>>>31|(0|$t)<(0|Lt)|0))break t;while((0|(L=L+1|0))<(0|Ft));h=0|t[c0>>2],L=0;do if(d=0|t[lt+(L<<2)>>2],0|(v=0|t[r+(d<<2)>>2])&&((0|v)<0|(0|h)<(0|v)||!(-1<(0|(ti=0|t[tt+(d<<2)>>2]))&(0|ti)<(0|h)&((Lt=ti+v|0)>>>31|(0|h)<(0|Lt)|0)==0)))break t;while((0|(L=L+1|0))<(0|Ft))}if(h=0|t[W+404>>2],lt=0|t[e+120>>2],0<(0|Zt)){d=0;do if(Lt=0|t[h+(d<<2)>>2],d=d+1|0,(0|Lt)<0|(0|lt)<=(0|Lt))break t;while((0|d)<(0|Zt))}if(h=0|t[W+408>>2],(0|lt)<=0){h=1;break e}d=0;do if(Lt=0|t[h+(d<<2)>>2],d=d+1|0,(0|Lt)<-1|(0|Re)<=(0|Lt))break t;while((0|d)<(0|lt));for(tt=0|t[W+412>>2],r=0|t[W+416>>2],h=0|t[e+124>>2],L=0;;){if(0|(d=0|t[r+(L<<2)>>2])&&((0|d)<0|(0|h)<(0|d)||!(-1<(0|(v=0|t[tt+(L<<2)>>2]))&(0|v)<(0|h))||(W=v+d|0)>>>31|(0|h)<(0|W)|0))break t;if((0|lt)<=(0|(L=L+1|0))){h=1;break e}}}while(0);pt(0,1336,zt),h=0}while(0);return(0|R)==319&&(pt(0,1277,U),$e(wi,1),Q(e+64|0,4,160),h=0),C=d0,0|h}function Xa(e){var r,a,m=0|J[4+(e|=0)>>0];Q(0|t[(a=e+704|0)>>2],4,32),$e(0|t[(r=e+708|0)>>2],4),$e(4+(0|t[r>>2])|0,4),$e(8+(0|t[r>>2])|0,4),$e(12+(0|t[r>>2])|0,4),$e(16+(0|t[r>>2])|0,4),$e(20+(0|t[r>>2])|0,1),Q(0|t[e+720>>2],4,0|t[t[a>>2]>>2]),Q(0|t[e+724>>2],4,0|t[t[a>>2]>>2]),Q(0|t[e+728>>2],4,0|t[t[a>>2]>>2]),Q(0|t[e+732>>2],4,0|t[t[a>>2]>>2]),Q(0|t[e+736>>2],4,0|t[t[a>>2]>>2]),Q(0|t[e+740>>2],4,0|t[t[a>>2]>>2]),Q(0|t[e+752>>2],4,0|t[4+(0|t[a>>2])>>2]),Q(0|t[e+756>>2],4,0|t[4+(0|t[a>>2])>>2]),Q(0|t[e+760>>2],4,0|t[4+(0|t[a>>2])>>2]),Q(0|t[e+764>>2],4,0|t[4+(0|t[a>>2])>>2]),Q(0|t[e+768>>2],4,0|t[4+(0|t[a>>2])>>2]),Q(0|t[e+772>>2],4,0|t[4+(0|t[a>>2])>>2]),Q(0|t[e+776>>2],4,0|t[4+(0|t[a>>2])>>2]),Q(0|t[e+780>>2],4,0|t[8+(0|t[a>>2])>>2]),Q(0|t[e+784>>2],4,0|t[8+(0|t[a>>2])>>2]),Q(0|t[e+788>>2],4,0|t[8+(0|t[a>>2])>>2]),Q(0|t[e+796>>2],4,0|t[8+(0|t[a>>2])>>2]),Q(0|t[e+800>>2],4,0|t[8+(0|t[a>>2])>>2]),Q(0|t[e+804>>2],4,0|t[8+(0|t[a>>2])>>2]),Q(0|t[e+812>>2],4,0|t[12+(0|t[a>>2])>>2]),Q(0|t[e+816>>2],4,0|t[12+(0|t[a>>2])>>2]),Q(0|t[e+820>>2],4,0|t[12+(0|t[a>>2])>>2]),Q(0|t[e+828>>2],4,0|t[12+(0|t[a>>2])>>2]),Q(0|t[e+852>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+856>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+860>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+868>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+872>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+876>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+880>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+884>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+888>>2],1,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+892>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+896>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+900>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+904>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+908>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+912>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+924>>2],4,0|t[20+(0|t[a>>2])>>2]),Q(0|t[e+928>>2],4,0|t[20+(0|t[a>>2])>>2]),Q(0|t[e+932>>2],4,0|t[20+(0|t[a>>2])>>2]),Q(0|t[e+936>>2],4,0|t[20+(0|t[a>>2])>>2]),Q(0|t[e+940>>2],4,0|t[20+(0|t[a>>2])>>2]),Q(0|t[e+948>>2],4,0|t[20+(0|t[a>>2])>>2]),Q(0|t[e+952>>2],4,0|t[20+(0|t[a>>2])>>2]),Q(0|t[e+976>>2],4,0|t[24+(0|t[a>>2])>>2]),Q(0|t[e+980>>2],4,0|t[28+(0|t[a>>2])>>2]),Q(0|t[e+984>>2],4,0|t[28+(0|t[a>>2])>>2]),Q(0|t[e+988>>2],4,0|t[32+(0|t[a>>2])>>2]),Q(0|t[e+992>>2],4,0|t[32+(0|t[a>>2])>>2]),Q(0|t[e+996>>2],4,0|t[32+(0|t[a>>2])>>2]),Q(0|t[e+1e3>>2],4,0|t[32+(0|t[a>>2])>>2]),Q(0|t[e+1004>>2],4,0|t[32+(0|t[a>>2])>>2]),Q(0|t[e+1008>>2],4,0|t[32+(0|t[a>>2])>>2]),Q(0|t[e+1012>>2],4,0|t[32+(0|t[a>>2])>>2]),Q(0|t[e+1016>>2],4,0|t[36+(0|t[a>>2])>>2]),Q(0|t[e+1020>>2],4,0|t[36+(0|t[a>>2])>>2]),Q(0|t[e+1024>>2],4,0|t[36+(0|t[a>>2])>>2]),Q(0|t[e+1028>>2],4,0|t[40+(0|t[a>>2])>>2]),Q(0|t[e+1040>>2],4,0|t[44+(0|t[a>>2])>>2]),Q(0|t[e+1044>>2],4,0|t[48+(0|t[a>>2])>>2]),Q(0|t[e+1048>>2],4,0|t[48+(0|t[a>>2])>>2]),Q(0|t[e+1032>>2],4,0|t[52+(0|t[a>>2])>>2]),Q(0|t[e+1036>>2],4,0|t[52+(0|t[a>>2])>>2]),Q(0|t[e+1132>>2],4,0|t[56+(0|t[a>>2])>>2]),Q(0|t[e+1136>>2],4,0|t[60+(0|t[a>>2])>>2]),Q(0|t[e+1140>>2],2,0|t[64+(0|t[a>>2])>>2]),Q(0|t[e+1144>>2],4,0|t[68+(0|t[a>>2])>>2]),Q(0|t[e+1148>>2],4,0|t[72+(0|t[a>>2])>>2]),Q(0|t[e+1152>>2],4,0|t[72+(0|t[a>>2])>>2]),Q(0|t[e+1156>>2],4,0|t[72+(0|t[a>>2])>>2]),Q(0|t[e+1160>>2],4,0|t[72+(0|t[a>>2])>>2]),Q(0|t[e+1164>>2],4,0|t[72+(0|t[a>>2])>>2]),Q(0|t[e+1168>>2],4,0|t[76+(0|t[a>>2])>>2]),Q(0|t[e+1172>>2],4,0|t[76+(0|t[a>>2])>>2]),Q(0|t[e+1176>>2],4,0|t[76+(0|t[a>>2])>>2]),Q(0|t[e+1188>>2],4,0|t[80+(0|t[a>>2])>>2]),Q(0|t[e+1192>>2],4,0|t[80+(0|t[a>>2])>>2]),Q(0|t[e+1196>>2],4,0|t[80+(0|t[a>>2])>>2]),Q(0|t[e+1200>>2],4,0|t[80+(0|t[a>>2])>>2]),Q(0|t[e+1204>>2],4,0|t[80+(0|t[a>>2])>>2]),Q(0|t[e+1208>>2],4,0|t[80+(0|t[a>>2])>>2]),Q(0|t[e+1212>>2],4,0|t[80+(0|t[a>>2])>>2]),Q(0|t[e+1216>>2],4,0|t[84+(0|t[a>>2])>>2]),Q(0|t[e+1220>>2],2,0|t[84+(0|t[a>>2])>>2]),Q(0|t[e+1224>>2],4,0|t[88+(0|t[a>>2])>>2]),(255&m)<=1||(Q(0|t[e+808>>2],4,0|t[8+(0|t[a>>2])>>2]),(255&m)<=3||(Q(0|t[e+968>>2],4,0|t[20+(0|t[a>>2])>>2]),Q(0|t[e+972>>2],4,0|t[20+(0|t[a>>2])>>2]),Q(0|t[e+792>>2],4,0|t[8+(0|t[a>>2])>>2]),Q(0|t[e+824>>2],4,0|t[12+(0|t[a>>2])>>2]),Q(0|t[e+864>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+1228>>2],4,0|t[92+(0|t[a>>2])>>2]),Q(0|t[e+1232>>2],4,0|t[92+(0|t[a>>2])>>2]),Q(0|t[e+1236>>2],4,0|t[92+(0|t[a>>2])>>2]),Q(0|t[e+1240>>2],4,0|t[96+(0|t[a>>2])>>2]),Q(0|t[e+1244>>2],4,0|t[96+(0|t[a>>2])>>2]),Q(0|t[e+1248>>2],4,0|t[96+(0|t[a>>2])>>2]),Q(0|t[e+944>>2],4,0|t[20+(0|t[a>>2])>>2]),Q(0|t[e+956>>2],4,0|t[20+(0|t[a>>2])>>2]),Q(0|t[e+960>>2],4,0|t[20+(0|t[a>>2])>>2]),Q(0|t[e+1052>>2],4,0|t[100+(0|t[a>>2])>>2]),Q(0|t[e+1056>>2],4,0|t[100+(0|t[a>>2])>>2]),Q(0|t[e+1060>>2],4,0|t[100+(0|t[a>>2])>>2]),Q(0|t[e+1064>>2],4,0|t[104+(0|t[a>>2])>>2]),Q(0|t[e+1068>>2],4,0|t[104+(0|t[a>>2])>>2]),Q(0|t[e+1072>>2],4,0|t[104+(0|t[a>>2])>>2]),Q(0|t[e+1076>>2],4,0|t[104+(0|t[a>>2])>>2]),Q(0|t[e+1080>>2],4,0|t[104+(0|t[a>>2])>>2]),Q(0|t[e+1084>>2],4,0|t[108+(0|t[a>>2])>>2]),Q(0|t[e+1088>>2],4,0|t[108+(0|t[a>>2])>>2]),Q(0|t[e+1092>>2],4,0|t[108+(0|t[a>>2])>>2]),Q(0|t[e+1096>>2],4,0|t[112+(0|t[a>>2])>>2]),Q(0|t[e+1100>>2],4,0|t[112+(0|t[a>>2])>>2]),Q(0|t[e+1104>>2],4,0|t[112+(0|t[a>>2])>>2]),Q(0|t[e+1108>>2],4,0|t[116+(0|t[a>>2])>>2]),Q(0|t[e+1112>>2],4,0|t[120+(0|t[a>>2])>>2]),Q(0|t[e+1116>>2],4,0|t[120+(0|t[a>>2])>>2]),Q(0|t[e+1120>>2],4,0|t[120+(0|t[a>>2])>>2]),Q(0|t[e+1124>>2],4,0|t[124+(0|t[a>>2])>>2]),Q(0|t[e+1128>>2],4,0|t[124+(0|t[a>>2])>>2])))}function Z2(e){e|=0;var r,a,P=0,m=0,f=0,n=0,x=0,y=0,u=0,l=0,g=0,p=0,M=0,k=0,b=C,P=C=C+63&-64;if(C=C+32|0,f=P+24|0,t[(k=P)>>2]=4,t[k+4>>2]=2,t[k+8>>2]=4,function(E,S){var z,O=C=(E=C)+63&-64;C=C+272|0,z=16+O|0,t[O>>2]=S|=0,Ja(z,1393,O),function(H){var U,it=C=(U=C)+63&-64;C=C+16|0,t[it>>2]=H|=0,function(ft,rt,st){ft=C=(rt=C)+63&-64,C=C+16|0,t[ft>>2]=st|=0,qa(496,2934,ft),C=rt}(0,0,it),C=U}(z),C=E}(0,k),0|wr(e))return pt(0,1433,P+16|0),C=b,(k=0)|k;if(4<(255&(P=0|J[(m=e+4|0)>>0])))return t[f>>2]=4,t[f+4>>2]=255&P,pt(0,1496,f),C=b,(k=0)|k;if(0|J[(P=e+5|0)>>0]?($e(m,1),Q(e+64|0,4,160),Ir(e,k=e+704|(J[P>>0]=0)),Xa(e)):Ir(e,k=e+704|0),0|t[1009]||(t[1009]=1),P=0|t[k>>2],M=0|t[P+16>>2],g=(m=0|t[e+912>>2])+(M<<2)|0,0<(0|M)){for(u=e+1144|0,l=0|t[e+908>>2];;){y=(0|t[u>>2])+(t[l>>2]<<2)|0,f=(P=0|t[m>>2])-1|0;e:do if(1<(0|P))for(n=0,x=f;;){for(;!((0|t[(f=y+(n<<2)|0)>>2])<0);){if(!((0|(f=n+1|0))<(0|x))){f=x;break e}n=f}if(hn(0|f,f+4|0,(P-n<<2)-4|0),!((0|n)<(0|(f=x+-1|0)))){P=x;break}P=x,x=f}while(0);if(0<(0|P)&&(P=(0|t[y+(f<<2)>>2])<0?f:P),t[m>>2]=P,g>>>0<=(m=m+4|0)>>>0)break;l=l+4|0}P=0|t[k>>2]}if(0<(0|t[P>>2]))for(m=e+716|0,f=e+712|0,n=0;t[(0|t[f>>2])+(n<<2)>>2]=(0|t[m>>2])+(n<<6),P=0|t[k>>2],(0|(n=n+1|0))<(0|t[P>>2]););if(0<(0|t[P+4>>2]))for(m=e+748|0,f=e+744|0,n=0;t[(0|t[f>>2])+(n<<2)>>2]=(0|t[m>>2])+(n<<6),P=0|t[k>>2],(0|(n=n+1|0))<(0|t[P+4>>2]););if(0<(0|t[P+16>>2]))for(x=e+848|0,y=e+832|0,p=e+1136|0,r=e+896|0,a=e+836|0,u=e+1140|0,l=e+900|0,g=e+840|0,m=e+1144|0,f=e+908|0,n=e+844|0,M=0;t[(0|t[y>>2])+(M<<2)>>2]=(0|t[x>>2])+(M<<6),t[(0|t[a>>2])+(M<<2)>>2]=(0|t[p>>2])+(t[(0|t[r>>2])+(M<<2)>>2]<<2),t[(0|t[g>>2])+(M<<2)>>2]=(0|t[u>>2])+(t[(0|t[l>>2])+(M<<2)>>2]<<1),t[(0|t[n>>2])+(M<<2)>>2]=(0|t[m>>2])+(t[(0|t[f>>2])+(M<<2)>>2]<<2),P=0|t[k>>2],(0|(M=M+1|0))<(0|t[P+16>>2]););if(0<(0|t[P+20>>2]))for(m=e+920|0,f=e+916|0,n=0;t[(0|t[f>>2])+(n<<2)>>2]=(0|t[m>>2])+(n<<6),P=0|t[k>>2],(0|(n=n+1|0))<(0|t[P+20>>2]););if(0<(0|t[P+80>>2]))for(m=e+1184|0,f=e+1180|0,n=0;t[(0|t[f>>2])+(n<<2)>>2]=(0|t[m>>2])+(n<<6),P=0|t[k>>2],(0|(n=n+1|0))<(0|t[P+80>>2]););if(!(1&J[20+(0|t[e+708>>2])>>0]||(0|(l=0|t[P+16>>2]))<=0)){P=0|t[e+1140>>2],m=0|t[e+900>>2],f=0|t[e+904>>2],x=0;do if(n=P+(t[m+(x<<2)>>2]<<1)|0,u=(k=0|t[f+(x<<2)>>2])-1|0,1<(0|k))for(y=0;M=0|qt[(p=n+(y<<1)|0)>>1],qt[p>>1]=0|qt[(k=n+(y+2<<1)|0)>>1],qt[k>>1]=M,(0|(y=y+3|0))<(0|u););while((0|(x=x+1|0))!=(0|l));m=0|t[e+1136>>2],f=0|t[e+896>>2],n=0|t[e+892>>2],y=0;do if(x=(P=m+(t[f+(y<<2)>>2]<<2)|0)+((k=0|t[n+(y<<2)>>2])<<1<<2)|0,0<(0|k))for(P=P+4|0;B[P>>2]=1-+B[P>>2],(P=P+8|0)>>>0<x>>>0;);while((0|(y=y+1|0))!=(0|l))}return C=b,0|e}function J2(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,0|wr(e|=0)?(pt(0,1605,a),C=r,(a=0)|a):(a=0|Rt[e+4>>0],C=r,0|a)}function q2(e){var r,a,m,f,g=0,l=0,n=0,x=0,y=0,u=0,l=64+(e|=0)|0,g=e+144|0;if(re(l,0|t[e+88>>2],0|t[e+148>>2],0|t[g>>2]),ja(l,0|t[e+92>>2],0|t[e+152>>2],0|t[796+(0|t[e>>2])>>2],2,0|t[g>>2]),!((0|Rt[4+(0|t[e>>2])>>0])<4||(re(l,0|t[e+96>>2],0|t[(f=e+120|0)>>2],0|t[g>>2]),re(l,0|t[e+100>>2],0|t[(n=e+124|0)>>2],0|t[g>>2]),re(l,0|t[e+104>>2],0|t[(x=e+128|0)>>2],0|t[g>>2]),re(l,0|t[e+108>>2],0|t[(r=e+132|0)>>2],0|t[g>>2]),re(l,0|t[e+112>>2],0|t[(a=e+136|0)>>2],0|t[g>>2]),re(l,0|t[e+116>>2],0|t[(m=e+140|0)>>2],0|t[g>>2]),g=0|t[e+156>>2],l=0|t[f>>2],n=0|t[n>>2],x=0|t[x>>2],(0|(f=0|t[e+56>>2]))<=0))){for(u=y=0;t[g+(y<<2)>>2]=t[l+(u<<2)>>2],t[g+((1|y)<<2)>>2]=t[n+(u<<2)>>2],t[g+((2|y)<<2)>>2]=t[x+(u<<2)>>2],(0|(u=u+1|0))!=(0|f);)y=y+4|0;for(u=0|t[e+160>>2],y=0|t[r>>2],x=0|t[a>>2],g=0|t[m>>2],n=l=0;t[u+(l<<2)>>2]=t[y+(n<<2)>>2],t[u+((1|l)<<2)>>2]=t[x+(n<<2)>>2],t[u+((2|l)<<2)>>2]=t[g+(n<<2)>>2],(0|(n=n+1|0))!=(0|f);)l=l+4|0}}function $2(e){var r,a,m,f,g=0,l=0,n=0,x=0,y=0,u=0,l=172+(e|=0)|0,g=e+264|0;if(re(l,0|t[e+196>>2],0|t[e+268>>2],0|t[g>>2]),re(l,0|t[e+200>>2],0|t[e+284>>2],0|t[g>>2]),re(l,0|t[e+204>>2],0|t[e+276>>2],0|t[g>>2]),re(l,0|t[e+208>>2],0|t[e+280>>2],0|t[g>>2]),re(l,0|t[e+212>>2],0|t[e+272>>2],0|t[g>>2]),!((0|Rt[4+(0|t[e>>2])>>0])<4||(re(l,0|t[e+216>>2],0|t[(f=e+240|0)>>2],0|t[g>>2]),re(l,0|t[e+220>>2],0|t[(n=e+244|0)>>2],0|t[g>>2]),re(l,0|t[e+224>>2],0|t[(x=e+248|0)>>2],0|t[g>>2]),re(l,0|t[e+228>>2],0|t[(r=e+252|0)>>2],0|t[g>>2]),re(l,0|t[e+232>>2],0|t[(a=e+256|0)>>2],0|t[g>>2]),re(l,0|t[e+236>>2],0|t[(m=e+260|0)>>2],0|t[g>>2]),g=0|t[e+296>>2],l=0|t[f>>2],n=0|t[n>>2],x=0|t[x>>2],(0|(f=0|t[e+164>>2]))<=0))){for(u=y=0;t[g+(y<<2)>>2]=t[l+(u<<2)>>2],t[g+((1|y)<<2)>>2]=t[n+(u<<2)>>2],t[g+((2|y)<<2)>>2]=t[x+(u<<2)>>2],(0|(u=u+1|0))!=(0|f);)y=y+4|0;for(u=0|t[e+300>>2],y=0|t[r>>2],x=0|t[a>>2],g=0|t[m>>2],n=l=0;t[u+(l<<2)>>2]=t[y+(n<<2)>>2],t[u+((1|l)<<2)>>2]=t[x+(n<<2)>>2],t[u+((2|l)<<2)>>2]=t[g+(n<<2)>>2],(0|(n=n+1|0))!=(0|f);)l=l+4|0}}function K2(e){var r,a,m,f,g=0,l=0,n=0,x=0,y=0,u=0,l=340+(e|=0)|0,g=e+424|0;if(re(l,0|t[e+364>>2],0|t[e+448>>2],0|t[g>>2]),Ya(l,0|t[e+368>>2],0|t[e+440>>2],0|t[g>>2]),ja(l,0|t[e+372>>2],0|t[e+444>>2],0|t[892+(0|t[e>>2])>>2],2,0|t[g>>2]),!((0|Rt[4+(0|t[e>>2])>>0])<4||(re(l,0|t[e+376>>2],0|t[(f=e+400|0)>>2],0|t[g>>2]),re(l,0|t[e+380>>2],0|t[(n=e+404|0)>>2],0|t[g>>2]),re(l,0|t[e+384>>2],0|t[(x=e+408|0)>>2],0|t[g>>2]),re(l,0|t[e+388>>2],0|t[(r=e+412|0)>>2],0|t[g>>2]),re(l,0|t[e+392>>2],0|t[(a=e+416|0)>>2],0|t[g>>2]),re(l,0|t[e+396>>2],0|t[(m=e+420|0)>>2],0|t[g>>2]),g=0|t[e+452>>2],l=0|t[f>>2],n=0|t[n>>2],x=0|t[x>>2],(0|(f=0|t[e+332>>2]))<=0))){for(u=y=0;t[g+(y<<2)>>2]=t[l+(u<<2)>>2],t[g+((1|y)<<2)>>2]=t[n+(u<<2)>>2],t[g+((2|y)<<2)>>2]=t[x+(u<<2)>>2],(0|(u=u+1|0))!=(0|f);)y=y+4|0;for(u=0|t[e+456>>2],y=0|t[r>>2],x=0|t[a>>2],g=0|t[m>>2],n=l=0;t[u+(l<<2)>>2]=t[y+(n<<2)>>2],t[u+((1|l)<<2)>>2]=t[x+(n<<2)>>2],t[u+((2|l)<<2)>>2]=t[g+(n<<2)>>2],(0|(n=n+1|0))!=(0|f);)l=l+4|0}}function re(e,r,a,m){r|=0,a|=0,m|=0;var f,n,x,y=0,u=0,l=0,g=0,p=0,M=0;if(0<(0|(y=0|t[8+(e|=0)>>2])))for(u=0|t[e+20>>2],l=0|t[e+12>>2],g=0;B[l+(g<<2)>>2]=+B[r+(g<<2)>>2]*+B[u+(g<<2)>>2],(0|(g=g+1|0))!=(0|y););if(!((0|(n=0|t[e>>2]))<=0))if(M=e+16|0,x=0|t[e+4>>2],f=e+12|0,m)for(r=g=0;;){if(0|t[m>>2]){if(u=(e=0|t[(0|t[M>>2])+(r<<2)>>2])+g|0,0<(0|e))for(y=0|t[f>>2],l=g,p=0;p+=+B[y+(l<<2)>>2],(0|(l=l+1|0))<(0|u););else p=0;B[a+(r<<2)>>2]=p}if((0|(y=r+1|0))==(0|n))break;m=m+4|0,g=(0|t[x+(r<<2)>>2])+g|0,r=y}else for(g=0|t[M>>2],e=r=0;;){if(u=(M=0|t[g+(e<<2)>>2])+r|0,0<(0|M))for(y=0|t[f>>2],l=r,p=0;p+=+B[y+(l<<2)>>2],(0|(l=l+1|0))<(0|u););else p=0;if(B[a+(e<<2)>>2]=p,(0|(y=e+1|0))==(0|n))break;r=(0|t[x+(e<<2)>>2])+r|0,e=y}}function Ya(e,r,a,m){r|=0,a|=0,m|=0;var f,n,x=0,y=0,u=0,l=0,g=0,p=0;if(0<(0|(x=0|t[8+(e|=0)>>2])))for(y=0|t[e+20>>2],u=0|t[e+12>>2],l=0;B[u+(l<<2)>>2]=+B[r+(l<<2)>>2]*+B[y+(l<<2)>>2],(0|(l=l+1|0))!=(0|x););if(!((0|(x=0|t[e>>2]))<=0))if(p=e+16|0,f=0|t[e+4>>2],n=e+12|0,m)for(r=l=0;;){if(0|t[m>>2]){if(y=(u=0|t[(0|t[p>>2])+(r<<2)>>2])+l|0,0<(0|u))for(x=0|t[n>>2],u=l,g=0;g+=+B[x+(u<<2)>>2],(0|(u=u+1|0))<(0|y););else g=0;t[a+(r<<2)>>2]=~~(g+.0010000000474974513),x=0|t[e>>2]}if(!((0|(y=r+1|0))<(0|x)))break;m=m+4|0,l=(0|t[f+(r<<2)>>2])+l|0,r=y}else for(l=0|t[p>>2],m=r=0;;){if(y=(p=0|t[l+(m<<2)>>2])+r|0,0<(0|p))for(x=0|t[n>>2],u=r,g=0;g+=+B[x+(u<<2)>>2],(0|(u=u+1|0))<(0|y););else g=0;if(t[a+(m<<2)>>2]=~~(g+.0010000000474974513),!((0|(x=m+1|0))<(0|t[e>>2])))break;r=(0|t[f+(m<<2)>>2])+r|0,m=x}}function ja(e,r,a,m,f,n){r|=0,a|=0,m|=0,f|=0,n|=0;var x,y,u,l,g,p=0,M=0,k=0,b=0,P=0,E=0,S=0,z=0,O=0,H=0|t[(e|=0)>>2];if(!((0|H)<=0))if(l=e+16|0,u=0|t[e+4>>2],y=e+20|0,x=f<<2,n)for(z=S=0;;){if(0|t[n>>2]&&(b=0|t[a+(z<<2)>>2],e=0|t[m+(z<<2)>>2],E=0|ie(e,f),P=(p=0|t[(0|t[l>>2])+(z<<2)>>2])+S|0,(k=0<(0|E))&&Pe(0|b,0,0|ie(x,e)),0<(0|p)&&(O=0|t[y>>2],k))){p=S;do for(e=0|t[r+(p<<2)>>2],M=+B[O+(p<<2)>>2],k=0;B[(g=b+(k<<2)|0)>>2]=+B[g>>2]+M*+B[e+(k<<2)>>2],(0|(k=k+1|0))!=(0|E););while((0|(p=p+1|0))<(0|P))}if((0|(e=z+1|0))==(0|H))break;n=n+4|0,S=(0|t[u+(z<<2)>>2])+S|0,z=e}else for(S=E=0;;){if(k=0|t[a+(S<<2)>>2],e=0|t[m+(S<<2)>>2],P=0|ie(e,f),b=(n=0|t[(0|t[l>>2])+(S<<2)>>2])+E|0,(p=0<(0|P))&&Pe(0|k,0,0|ie(x,e)),0<(0|n)&&(z=0|t[y>>2],p)){n=E;do for(e=0|t[r+(n<<2)>>2],M=+B[z+(n<<2)>>2],p=0;B[(O=k+(p<<2)|0)>>2]=+B[O>>2]+M*+B[e+(p<<2)>>2],(0|(p=p+1|0))!=(0|P););while((0|(n=n+1|0))<(0|b))}if((0|(e=S+1|0))==(0|H))break;E=(0|t[u+(S<<2)>>2])+E|0,S=e}}function Ha(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|function(m){m|=0;var f,n,x;return C=(n=C)+560|0,f=(x=n)+548|0,Pe(0|x,0,548),dn(m,x,f),C=n,0|t[f>>2]}(e),C=r,0|a):(t[a>>2]=1931,t[a+4>>2]=1949,pt(0,1664,a),C=r,(a=0)|a)}function Wa(e,r,a){r|=0,a|=0;var m,f=0,n=0,x=C,y=C=C+63&-64;return C=C+32|0,n=24+y|0,m=16+y|0,f=8+y|0,(e|=0)?r?((f=r)+15&-16|0)!=(0|f)?(t[m>>2]=1967,t[4+m>>2]=1738,pt(0,1664,m),C=x,(n=0)|n):(r=0|pl(e,r,a))?(C=x,0|r):(t[n>>2]=1967,t[n+4>>2]=1993,pt(0,1664,n),C=x,(n=0)|n):(t[f>>2]=1967,t[f+4>>2]=1698,pt(0,1664,f),C=x,(n=0)|n):(t[y>>2]=1967,t[4+y>>2]=1949,pt(0,1664,y),C=x,(n=0)|n)}function Q2(e,r,a,m){if(a=+a,m=+m,(r=+ye(r=+r,e=+e)-+ye(+m,+a))<-3.1415927410125732)for(;(r+=6.2831854820251465)<-3.1415927410125732;);if(3.1415927410125732<r)for(;3.1415927410125732<(r+=-6.2831854820251465););return+r}function $e(e,r){var a;if(!((r=(e|=0)+(r|=0)+-1|0)>>>0<=e>>>0))for(;a=0|J[e>>0],J[e>>0]=0|J[r>>0],e=e+1|0,J[r>>0]=a,e>>>0<(r=r+-1|0)>>>0;);}function Q(e,r,a){e|=0,r|=0;var m,f=0,n=0;if(a|=0)do if(a=a+-1|0,(n=e)>>>0<(f=(e=e+r|0)-1|0)>>>0)for(;m=0|J[n>>0],J[n>>0]=0|J[f>>0],n=n+1|0,J[f>>0]=m,n>>>0<(f=f+-1|0)>>>0;);while(0|a)}function tl(e){var r,a,m,f=0,n=0,x=0,y=0,E=0,S=0,z=0,u=0,P=0,l=0,g=0,p=0,M=0,k=0,b=(f=0|t[(a=336+(e|=0)|0)>>2])+(20*(u=0|t[(m=e+332|0)>>2])|0)|0,P=e+424|0,E=0|t[e+48>>2],S=0|t[e+316>>2],z=0|t[e+308>>2];if(0<(0|u))for(u=0|t[P>>2],x=0|t[e+448>>2],y=0|t[e+444>>2];0|t[u>>2]&&((0|(n=0|t[f+4>>2]))!=-1&&(B[x>>2]=+B[E+(n<<2)>>2]*+B[x>>2]),(0|(n=0|t[f+8>>2]))!=-1&&(B[x>>2]=+B[S+(n<<2)>>2]*+B[x>>2],g=0|t[y>>2],Ci[3&t[z+(n<<5)+24>>2]](e,n,g,g,0|t[f+16>>2]))),!(b>>>0<=(f=f+20|0)>>>0);)u=u+4|0,x=x+4|0,y=y+4|0;if(!((0|Rt[4+(0|t[e>>2])>>0])<4||(z=(f=0|t[a>>2])+(20*(g=0|t[m>>2])|0)|0,E=0|t[e+324>>2],S=0|t[e+328>>2],(0|g)<=0)))for(y=0|t[P>>2],n=f,x=0|t[e+452>>2],f=0|t[e+456>>2];0|t[y>>2]&&(0|(l=0|t[n+8>>2]))!=-1&&(p=+B[x>>2]*+B[(m=E+((P=l<<2)<<2)|0)>>2],B[x>>2]=p,M=+B[(g=x+4|0)>>2]*+B[4+m>>2],B[g>>2]=M,k=+B[(e=x+8|0)>>2]*+B[8+m>>2],B[x>>2]=p<0?0:1<p?1:p,B[g>>2]=M<0?0:1<M?1:M,B[e>>2]=k<0?0:1<k?1:k,B[x+12>>2]=1,k=+B[f>>2],M=+B[(P=S+(P<<2)|0)>>2],B[f>>2]=M=k+M-k*M,k=+B[(e=f+4|0)>>2],p=+B[P+4>>2],B[e>>2]=p=k+p-k*p,r=(k=+B[(g=f+8|0)>>2])+(r=+B[P+8>>2])-k*r,B[f>>2]=M<0?0:1<M?1:M,B[e>>2]=p<0?0:1<p?1:p,B[g>>2]=r<0?0:1<r?1:r,B[f+12>>2]=1),!(z>>>0<=(n=n+20|0)>>>0);)y=y+4|0,x=x+16|0,f=f+16|0}function el(e){var r,a=0|t[332+(e|=0)>>2];0|t[e+428>>2]&&(Ve(0|t[e+460>>2],0|t[e+436>>2],0|(r=a<<2)),Ve(0|t[e+464>>2],0|t[e+440>>2],0|r),Ve(0|t[e+468>>2],0|t[e+448>>2],0|r),(0|Rt[4+(0|t[e>>2])>>0])<=3||(Ve(0|t[e+472>>2],0|t[e+452>>2],0|(r=a<<4)),Ve(0|t[e+476>>2],0|t[e+456>>2],0|r)))}function il(e){var r,a,m,f,n,x,y,u,l,g,p,U=0,O=0,M=0,k=0,b=0,P=0,E=0,S=0,z=0,O=0|J[4+(0|t[(e|=0)>>2])>>0],H=0|t[e+332>>2],U=e+428|0;if(0|t[e+620>>2]){if(!(((t[U>>2]=0)|H)<=0))for(k=e+424|0,b=e+432|0,U=e+448|0,O=0;M=0|t[(0|t[k>>2])+(O<<2)>>2]&&+B[(0|t[U>>2])+(O<<2)>>2]!=0?127:126,J[(0|t[b>>2])+O>>0]=M,(0|(O=O+1|0))!=(0|H););}else if(0|t[U>>2]){if(!(((t[U>>2]=0)|H)<=0))if(m=e+424|0,x=e+432|0,n=e+448|0,u=e+468|0,f=e+440|0,y=e+464|0,g=e+436|0,l=e+460|0,r=e+452|0,P=e+472|0,a=e+456|0,b=e+476|0,(255&O)<=3)for(U=0;P=(0|t[(0|t[m>>2])+(U<<2)>>2])==0,z=+B[(0|t[n>>2])+(U<<2)>>2],S=(0|t[x>>2])+U|0,E=(1&J[S>>0])==(E=z!=0&(1^P)&1)<<24>>24?E:2|E,E=z!=+B[(0|t[u>>2])+(U<<2)>>2]?4|E:E,E=(0|t[(0|t[f>>2])+(U<<2)>>2])==(0|t[(0|t[y>>2])+(U<<2)>>2])?E:8|E,E=(0|t[(0|t[g>>2])+(U<<2)>>2])==(0|t[(0|t[l>>2])+(U<<2)>>2])?E:16|E,J[S>>0]=P?E:32|E,(0|(U=U+1|0))!=(0|H););else for(k=M=0;p=(0|t[(0|t[m>>2])+(M<<2)>>2])==0,z=+B[(0|t[n>>2])+(M<<2)>>2],O=(0|t[x>>2])+M|0,U=(1&J[O>>0])==(U=z!=0&(1^p)&1)<<24>>24?U:2|U,U=z!=+B[(0|t[u>>2])+(M<<2)>>2]?4|U:U,U=(0|t[(0|t[f>>2])+(M<<2)>>2])==(0|t[(0|t[y>>2])+(M<<2)>>2])?U:8|U,U=(0|t[(0|t[g>>2])+(M<<2)>>2])==(0|t[(0|t[l>>2])+(M<<2)>>2])?U:16|U,U=p?U:32|U,p=(0|t[r>>2])+(k<<2)|0,e=(0|t[P>>2])+(k<<2)|0,+B[p>>2]==+B[e>>2]&&+B[4+p>>2]==+B[e+4>>2]&&+B[8+p>>2]==+B[e+8>>2]&&+B[12+p>>2]==+B[e+12>>2]&&(E=(0|t[a>>2])+(k<<2)|0,S=(0|t[b>>2])+(k<<2)|0,+B[E>>2]==+B[S>>2])&&+B[E+4>>2]==+B[S+4>>2]&&+B[E+8>>2]==+B[S+8>>2]&&+B[E+12>>2]==+B[S+12>>2]||(U|=64),J[O>>0]=U,(0|(M=M+1|0))!=(0|H);)k=k+4|0}else if(!((0|H)<=0))for(M=e+424|0,k=e+432|0,U=e+448|0,O=0;0|t[(0|t[M>>2])+(O<<2)>>2]&&+B[(0|t[U>>2])+(O<<2)>>2]!=0?(S=(0|t[k>>2])+O|0,J[S>>0]=1|J[S>>0]):(S=(0|t[k>>2])+O|0,J[S>>0]=-2&J[S>>0]),(0|(O=O+1|0))!=(0|H););}function rl(e){var r,a,m,f,n,x,y,nt=0,u=0,l=0,g=0,p=0,M=0,k=0,at=0,vt=0,kt=0,Mt=0,b=0,P=0,E=0,S=0,z=0,O=0,H=0,U=0,it=0,ft=0,rt=0,st=0,ht=0,dt=0,Y=0,yt=0,at=0|t[(x=60+(e|=0)|0)>>2],nt=0|t[e>>2],vt=0|t[nt+784>>2],kt=0|t[(y=e+56|0)>>2],Mt=0|t[nt+1028>>2];if(0<(0|kt)){for(z=e+80|0,U=e+92|0,H=e+88|0,it=e+84|0,O=nt+984|0,p=nt+980|0,k=M=0;;){if(g=0|t[at+(24*M|0)>>2],(0|(st=0|t[(nt=g+24|0)>>2]||0|t[g+28>>2]?15:st))==15&&(t[((st=0)|t[z>>2])+(M<<2)>>2]=t[(S=g+12|0)>>2],0|t[nt>>2])&&(b=0|t[vt+(M<<2)>>2],ft=(P=0|t[g+16>>2])+((ht=0|t[S>>2])<<2)|0,0<(0|ht)))for(nt=P,u=(0|t[H>>2])+(k<<2)|0,l=(0|t[U>>2])+(k<<2)|0;ht=(0|t[nt>>2])+b|0,t[l>>2]=Mt+(t[(0|t[O>>2])+(ht<<2)>>2]<<2),t[u>>2]=t[(0|t[p>>2])+(ht<<2)>>2],!(ft>>>0<=(nt=nt+4|0)>>>0);)u=u+4|0,l=l+4|0;if(0|t[g+28>>2]&&(rt=(E=0|t[g+20>>2])+((ht=0|t[g+12>>2])<<2)|0,0<(0|ht)))for(nt=(0|t[it>>2])+(k<<2)|0,u=E;t[nt>>2]=t[u>>2],!(rt>>>0<=(u=u+4|0)>>>0);)nt=nt+4|0;if((0|(M=M+1|0))==(0|kt))break;k=(0|t[g+8>>2])+k|0}nt=0|t[e>>2]}if(!((0|Rt[nt+4>>0])<4||(n=0|t[x>>2],ht=0|t[nt+792>>2],(0|(x=0|t[y>>2]))<=0)))for(a=e+96|0,r=e+100|0,y=e+104|0,f=e+108|0,m=e+112|0,st=e+116|0,ft=nt+1228|0,U=nt+1232|0,H=nt+1236|0,rt=nt+1240|0,it=nt+1244|0,at=nt+1248|0,kt=vt=0;;){if(nt=0|t[n+(24*vt|0)>>2],0|t[nt+24>>2]&&(dt=0|t[ht+(vt<<2)>>2],yt=(Y=0|t[nt+16>>2])+((e=0|t[nt+12>>2])<<2)|0,0<(0|e)))for(u=0|t[ft>>2],l=0|t[U>>2],g=0|t[H>>2],p=0|t[rt>>2],M=0|t[it>>2],k=0|t[at>>2],Mt=Y,b=(0|t[y>>2])+(kt<<2)|0,P=(0|t[r>>2])+(kt<<2)|0,E=(0|t[a>>2])+(kt<<2)|0,S=(0|t[st>>2])+(kt<<2)|0,z=(0|t[m>>2])+(kt<<2)|0,O=(0|t[f>>2])+(kt<<2)|0;e=(0|t[Mt>>2])+dt|0,t[E>>2]=t[u+(e<<2)>>2],t[P>>2]=t[l+(e<<2)>>2],t[b>>2]=t[g+(e<<2)>>2],t[O>>2]=t[p+(e<<2)>>2],t[z>>2]=t[M+(e<<2)>>2],t[S>>2]=t[k+(e<<2)>>2],!(yt>>>0<=(Mt=Mt+4|0)>>>0);)b=b+4|0,P=P+4|0,E=E+4|0,S=S+4|0,z=z+4|0,O=O+4|0;if((0|(vt=vt+1|0))==(0|x))break;kt=(0|t[nt+8>>2])+kt|0}}function sl(e){var r,a,m,f,n,x,y=0,u=0,l=0,g=0,p=0,M=0,k=0,b=0,P=0,E=0,S=0,z=0,O=0,H=0,ae=0,U=0,it=0,ft=0,rt=0,st=0,ht=0,dt=0,Y=0,yt=0,at=0,nt=0,vt=0,kt=0,Mt=0,Yt=0,Gt=0,Ot=0,Tt=0,jt=0,Kt=0,Ut=0,Ht=0,wt=0,Pt=0|t[168+(e|=0)>>2],X=0|t[e>>2],ae=0|t[816+X>>2];if(0<(0|(U=0|t[(x=e+164|0)>>2])))for(yt=e+188|0,st=e+200|0,kt=e+204|0,Yt=e+208|0,f=e+212|0,at=e+196|0,n=e+192|0,rt=992+X|0,vt=996+X|0,Mt=1e3+X|0,m=1004+X|0,nt=988+X|0,r=1008+X|0,ht=e+288|0,a=1012+X|0,dt=e+292|0,Tt=Ot=0;;){if(it=0|t[Pt+(12*Ot|0)>>2],(0|(jt=0|t[(y=it+24|0)>>2]||0|t[it+28>>2]?14:jt))==14&&(t[((jt=0)|t[yt>>2])+(Ot<<2)>>2]=t[(Y=it+12|0)>>2],0|t[y>>2])){if(y=0|t[ae+(Ot<<2)>>2],b=(u=0|t[it+16>>2])+((H=0|t[Y>>2])<<2)|0,0<(0|H))for(l=0|t[rt>>2],g=0|t[vt>>2],p=0|t[Mt>>2],M=0|t[m>>2],k=0|t[nt>>2],P=(0|t[st>>2])+(Tt<<2)|0,E=u,S=(0|t[at>>2])+(Tt<<2)|0,z=(0|t[kt>>2])+(Tt<<2)|0,O=(0|t[Yt>>2])+(Tt<<2)|0,H=(0|t[f>>2])+(Tt<<2)|0;wt=(0|t[E>>2])+y|0,t[P>>2]=t[l+(wt<<2)>>2],t[z>>2]=t[g+(wt<<2)>>2],t[O>>2]=t[p+(wt<<2)>>2],t[H>>2]=t[M+(wt<<2)>>2],t[S>>2]=t[k+(wt<<2)>>2],!(b>>>0<=(E=E+4|0)>>>0);)P=P+4|0,S=S+4|0,z=z+4|0,O=O+4|0,H=H+4|0;wt=(0|t[u>>2])+y|0,t[(0|t[ht>>2])+(Ot<<2)>>2]=t[(0|t[r>>2])+(wt<<2)>>2],t[(0|t[dt>>2])+(Ot<<2)>>2]=t[(0|t[a>>2])+(wt<<2)>>2]}if(0|t[it+28>>2]&&(Gt=(ft=0|t[it+20>>2])+((wt=0|t[it+12>>2])<<2)|0,0<(0|wt)))for(y=(0|t[n>>2])+(Tt<<2)|0,u=ft;t[y>>2]=t[u>>2],!(Gt>>>0<=(u=u+4|0)>>>0);)y=y+4|0;if((0|(Ot=Ot+1|0))==(0|U))break;Tt=(0|t[it+8>>2])+Tt|0}if(!((0|Rt[4+X>>0])<4||(Yt=0|t[824+X>>2],(0|(yt=0|t[x>>2]))<=0)))for(vt=e+216|0,nt=e+220|0,at=e+224|0,Mt=e+228|0,kt=e+232|0,Y=e+236|0,ht=1228+X|0,rt=1232+X|0,ft=1236+X|0,dt=1240+X|0,st=1244+X|0,b=1248+X|0,E=P=0;;){if(k=0|t[Pt+(12*P|0)>>2],0|t[k+24>>2]&&(Ut=0|t[Yt+(P<<2)>>2],Ht=(Kt=0|t[k+16>>2])+((wt=0|t[k+12>>2])<<2)|0,0<(0|wt)))for(y=0|t[ht>>2],u=0|t[rt>>2],l=0|t[ft>>2],g=0|t[dt>>2],p=0|t[st>>2],M=0|t[b>>2],S=Kt,z=(0|t[at>>2])+(E<<2)|0,O=(0|t[nt>>2])+(E<<2)|0,H=(0|t[vt>>2])+(E<<2)|0,ae=(0|t[Y>>2])+(E<<2)|0,U=(0|t[kt>>2])+(E<<2)|0,it=(0|t[Mt>>2])+(E<<2)|0;wt=(0|t[S>>2])+Ut|0,t[H>>2]=t[y+(wt<<2)>>2],t[O>>2]=t[u+(wt<<2)>>2],t[z>>2]=t[l+(wt<<2)>>2],t[it>>2]=t[g+(wt<<2)>>2],t[U>>2]=t[p+(wt<<2)>>2],t[ae>>2]=t[M+(wt<<2)>>2],!(Ht>>>0<=(S=S+4|0)>>>0);)z=z+4|0,O=O+4|0,H=H+4|0,ae=ae+4|0,U=U+4|0,it=it+4|0;if((0|(P=P+1|0))==(0|yt))break;E=(0|t[k+8>>2])+E|0}}function al(e){var r,a,m,f,nt=0,n=0,x=0,y=0,u=0,l=0,g=0,p=0,at=0,vt=0,kt=0,Mt=0,M=0,k=0,b=0,P=0,E=0,S=0,z=0,O=0,H=0,U=0,it=0,ft=0,rt=0,st=0,ht=0,dt=0,Y=0,yt=0,at=0|t[(m=336+(e|=0)|0)>>2],nt=0|t[e>>2],vt=0|t[nt+856>>2],kt=0|t[(f=e+332|0)>>2],Mt=0|t[nt+1028>>2];if(0<(0|kt)){for(E=e+356|0,U=e+372|0,O=e+364|0,S=e+368|0,it=e+360|0,z=nt+1024|0,H=nt+1016|0,l=nt+1020|0,p=g=0;;){if(u=0|t[at+(20*g|0)>>2],(0|(st=0|t[(nt=u+24|0)>>2]||0|t[u+28>>2]?15:st))==15&&(t[((st=0)|t[E>>2])+(g<<2)>>2]=t[(P=u+12|0)>>2],0|t[nt>>2])&&(M=0|t[vt+(g<<2)>>2],ft=(k=0|t[u+16>>2])+((ht=0|t[P>>2])<<2)|0,0<(0|ht)))for(nt=(0|t[S>>2])+(p<<2)|0,n=k,x=(0|t[O>>2])+(p<<2)|0,y=(0|t[U>>2])+(p<<2)|0;ht=(0|t[n>>2])+M|0,t[y>>2]=Mt+(t[(0|t[z>>2])+(ht<<2)>>2]<<2),t[x>>2]=t[(0|t[H>>2])+(ht<<2)>>2],t[nt>>2]=t[(0|t[l>>2])+(ht<<2)>>2],!(ft>>>0<=(n=n+4|0)>>>0);)nt=nt+4|0,x=x+4|0,y=y+4|0;if(0|t[u+28>>2]&&(rt=(b=0|t[u+20>>2])+((ht=0|t[u+12>>2])<<2)|0,0<(0|ht)))for(nt=(0|t[it>>2])+(p<<2)|0,n=b;t[nt>>2]=t[n>>2],!(rt>>>0<=(n=n+4|0)>>>0);)nt=nt+4|0;if((0|(g=g+1|0))==(0|kt))break;p=(0|t[u+8>>2])+p|0}nt=0|t[e>>2]}if(!((0|Rt[nt+4>>0])<4||(a=0|t[m>>2],ht=0|t[nt+864>>2],(0|(ft=0|t[f>>2]))<=0)))for(m=e+376|0,st=e+380|0,rt=e+384|0,r=e+388|0,f=e+392|0,it=e+396|0,H=nt+1228|0,z=nt+1232|0,S=nt+1236|0,U=nt+1240|0,O=nt+1244|0,p=nt+1248|0,vt=at=0;;){if(nt=0|t[a+(20*at|0)>>2],0|t[nt+24>>2]&&(dt=0|t[ht+(at<<2)>>2],yt=(Y=0|t[nt+16>>2])+((e=0|t[nt+12>>2])<<2)|0,0<(0|e)))for(n=0|t[H>>2],x=0|t[z>>2],y=0|t[S>>2],u=0|t[U>>2],l=0|t[O>>2],g=0|t[p>>2],kt=Y,Mt=(0|t[rt>>2])+(vt<<2)|0,M=(0|t[st>>2])+(vt<<2)|0,k=(0|t[m>>2])+(vt<<2)|0,b=(0|t[it>>2])+(vt<<2)|0,P=(0|t[f>>2])+(vt<<2)|0,E=(0|t[r>>2])+(vt<<2)|0;e=(0|t[kt>>2])+dt|0,t[k>>2]=t[n+(e<<2)>>2],t[M>>2]=t[x+(e<<2)>>2],t[Mt>>2]=t[y+(e<<2)>>2],t[E>>2]=t[u+(e<<2)>>2],t[P>>2]=t[l+(e<<2)>>2],t[b>>2]=t[g+(e<<2)>>2],!(yt>>>0<=(kt=kt+4|0)>>>0);)Mt=Mt+4|0,M=M+4|0,k=k+4|0,b=b+4|0,P=P+4|0,E=E+4|0;if((0|(at=at+1|0))==(0|ft))break;vt=(0|t[nt+8>>2])+vt|0}}function Za(e){var r,a,m,f=0;if(el(e|=0),function(n){var x,y,u=0,l=0,g=0,p=0,M=0,k=(u=0|t[(n|=0)+4>>2])+(52*(g=0|t[n>>2])|0)|0;if(!((0|g)<=0))for(g=0|t[n+12>>2];l=+B[g>>2],n=u+4|0,l=(y=(0|t[u+16>>2])==0)?(M=+B[n>>2],p=+B[u+8>>2],l<M?M:p<l?p:l):(M=+B[u+12>>2],(p=+B[n>>2])+M*((l=(l-p)/M)-(0|~~+ze(+l)))),n=u+48|0,+B[(x=u+44|0)>>2]!=l?(t[n>>2]=1,B[x>>2]=l):t[n>>2]=0,y&&(B[g>>2]=l),!(k>>>0<=(u=u+52|0)>>>0);)g=g+4|0}(e+540|0),function(n){var x,y=0,u=0,l=0,g=0,p=0,M=0,k=0,b=0,P=0,E=0,S=0,z=0,O=0,H=0,U=0,it=0,ft=(y=0|t[(n|=0)+544>>2])+(52*(x=0|t[n+540>>2])|0)|0;if(!((0|x)<=0)){x=(0|t[n+620>>2])==0;do e:do if(!(0|t[y>>2])&&(S=+B[y+44>>2],z=+B[y+20>>2],O=+B[y+24>>2],U=(H=0|t[y+28>>2])+(28*(P=0|t[y+32>>2])|0)|0,0<(0|P))){if(!x)for(P=H;;){p=0|t[P>>2];do if(1<=(0|p)){if(g=0|t[P+4>>2],u=(l=+B[g>>2])-z,(0|p)==1){p=!(S<z+l)|!(u<S),u=n=0,E=41;break}if(S<u){g=P+16|0,M=1,u=n=0,E=43;break}if(S<z+l)u=n=p=0,E=41;else{for(n=1;!(S<z+(u=+B[g+(n<<2)>>2]));){if(!((0|(n=n+1|0))<(0|p))){E=40;break}l=u}if((0|E)==40){g=P+16|0,n=p+-(M=1)|0,u=0,E=43;break}u=u-z<S?p=0:(n=n+-1|0,(u-=l)<O?p=0:(p=0,(S-l)/u)),E=41}}else u=n=p=0,E=41;while(0);if((0|E)==41&&(p|(E=0)==(0|t[(g=P+16|0)>>2])?(M=1&p,E=43):(t[P+24>>2]=1,t[P+20>>2]=1,b=P+8|0,k=P+12|0,p=0)),(0|E)==43&&(l=+B[(k=P+12|(E=0))>>2],p=1&((0|t[(b=P+8|0)>>2])!=(0|n)|(it=l!=u)&(u==0|l==0)),t[P+24>>2]=1&it,t[P+20>>2]=p,p=M),B[k>>2]=u,t[b>>2]=n,t[g>>2]=p,U>>>0<=(P=P+28|0)>>>0)break e}if(!(0|t[y+48>>2])){for(n=H;;)if(t[n+24>>2]=0,U>>>(t[n+20>>2]=0)<=(n=n+28|0)>>>0)break e}P=H;do{p=0|t[P>>2];do if(1<=(0|p)){if(g=0|t[P+4>>2],u=(l=+B[g>>2])-z,(0|p)==1){p=!(S<z+l)|!(u<S),u=n=0,E=24;break}if(S<u){g=P+16|0,M=1,u=n=0,E=26;break}if(S<z+l)u=n=p=0,E=24;else{for(n=1;!(S<z+(u=+B[g+(n<<2)>>2]));){if(!((0|(n=n+1|0))<(0|p))){E=21;break}l=u}if((0|E)==21){g=P+16|0,n=p+-(M=1)|0,u=0,E=26;break}u=u-z<S?p=0:(n=n+-1|0,(u-=l)<O?p=0:(p=0,(S-l)/u)),E=24}}else u=n=p=0,E=24;while(0)}while((0|E)==24&&(p|(E=0)==(0|t[(g=P+16|0)>>2])?(M=1&p,E=26):(t[P+24>>2]=1,t[P+20>>2]=1,b=P+8|0,k=P+12|0,p=0)),(0|E)==26&&(l=+B[(k=P+12|(E=0))>>2],p=1&((0|t[(b=P+8|0)>>2])!=(0|n)|(it=l!=u)&(u==0|l==0)),t[P+24>>2]=1&it,t[P+20>>2]=p,p=M),B[k>>2]=u,t[b>>2]=n,t[g>>2]=p,(P=P+28|0)>>>0<U>>>0)}while(0);while((y=y+52|0)>>>0<ft>>>0)}}(e),nl(e),function(n){var x,y,u,l,g,p=0,M=0,k=0,b=0,P=0,E=0,S=0,z=0,O=0,H=0,U=0,it=0,ft=0,rt=0,st=0,ht=0,dt=(p=0|t[(n|=0)+568>>2])+(36*(g=0|t[n+564>>2])|0)|0;if(!((0|g)<=0)){g=(0|t[n+620>>2])==0;do{y=0|t[p+4>>2];e:do if(0<(0|y))for(E=0|t[p>>2],k=n=M=S=0;;){if(b=0|t[E+(S<<2)>>2],0|t[b+16>>2]){k=1,n=M=0;break e}if(k=k||0|t[b+24>>2],n=n||0|t[b+20>>2],M=M+(+B[b+12>>2]!=0&1)|0,(0|y)<=(0|(S=S+1|0))){E=M,ht=11;break}}else k=n=E=0,ht=11;while(0);e:do if((0|ht)==11)if(M=g?n:1,(ht=0)!=((n=g?k:1)|M|0)&&(t[p+12>>2]=st=1<<E,U=0|t[p>>2],it=0|t[p+16>>2],ft=0|t[p+20>>2],rt=it+(st<<2)|0,(0|E)!=31)){for(Pe(0|it,0,((k=it+4|0)>>>0<rt>>>0?rt:k)+~it+4&-4|0),k=ft+(st<<2)|0,b=ft;B[b>>2]=1,(b=b+4|0)>>>0<k>>>0;);if(1<=(0|y)){if(!E)for(E=0,z=1;;){if(b=0|t[U+(E<<2)>>2],S=0|ie(0|t[b+8>>2],z),(P=+B[b+12>>2])==0)for(k=0;t[(H=it+(k<<2)|0)>>2]=(0|t[H>>2])+S,(0|(k=k+1|0))!=(0|st););else t[it>>2]=(0|t[it>>2])+S,B[ft>>2]=(1-P)*+B[ft>>2];if(z=0|ie(0|t[b>>2],z),(0|(E=E+1|0))==(0|y)){k=0;break e}}O=0,H=k=1;do if(x=0|t[U+(O<<2)>>2],b=0|t[8+x>>2],z=0|ie(b,H),(P=+B[(S=12+x|0)>>2])==0)for(b=0;t[(S=it+(b<<2)|0)>>2]=(0|t[S>>2])+z,(0|(b=b+1|0))!=(0|st););else{for(E=0|ie(b+1|0,H),t[it>>2]=(0|t[it>>2])+z,B[ft>>2]=(1-P)*+B[ft>>2],b=1;P=+B[S>>2],t[(u=it+(b<<2)|0)>>2]=((l=(b&k|0)!=0)?E:z)+(0|t[u>>2]),B[(u=ft+(b<<2)|0)>>2]=(l?P:1-P)*+B[u>>2],(0|(b=b+1|0))!=(0|st););k<<=1}while(H=0|ie(0|t[x>>2],H),(0|(O=O+1|0))!=(0|y));k=0}else k=0}else k=0;while(0)}while(t[p+28>>2]=n,t[p+24>>2]=M,t[p+32>>2]=k,(p=p+36|0)>>>0<dt>>>0)}}(e),ol(e),a=0|t[e+4>>2],r=(f=0|t[e+52>>2])+(a<<2)|0,0<(0|a))for(;m=+B[f>>2],B[f>>2]=m<0?0:1<m?1:m,(f=f+4|0)>>>0<r>>>0;);(function(n,x,y){y|=0;var u=0,l=(x|=0)+(12*(n|=0)|0)|0;if(!((0|n)<=0))for(u=y;;){do if(0|t[x+8>>2]){if((0|(n=0|t[x+4>>2]))!=-1&&!(0|t[y+(n<<2)>>2])){n=0;break}n=(0|t[32+(0|t[x>>2])>>2])==0}else n=0;while(0);if(t[u>>2]=1&n,l>>>0<=(x=x+12|0)>>>0)break;u=u+4|0}})(a,0|t[e+8>>2],0|t[e+40>>2]),function(n){var x,y,u,l,g,it=0,p=0,M=0,k=0,b=0,P=0,E=0,S=0,z=0,O=0,H=0,U=0|t[8+(n|=0)>>2],it=0|t[n>>2],ft=0|t[it+724>>2],rt=0|t[n+4>>2];if(!((0|rt)<=0))for(l=n+28|0,g=n+36|0,u=n+32|0,y=it+976|0,k=M=0;;){if(x=0|t[U+(12*M|0)>>2],(0|(H=0|t[(n=24+x|0)>>2]||0|t[28+x>>2]?6:H))==6&&(t[((H=0)|t[l>>2])+(M<<2)>>2]=t[(S=12+x|0)>>2],0|t[n>>2])&&(E=0|t[ft+(M<<2)>>2],z=(b=0|t[16+x>>2])+((p=0|t[S>>2])<<2)|0,0<(0|p)))for(n=0|t[y>>2],it=(0|t[g>>2])+(k<<2)|0,p=b;t[it>>2]=t[n+((0|t[p>>2])+E<<2)>>2],!(z>>>0<=(p=p+4|0)>>>0);)it=it+4|0;if(0|t[28+x>>2]&&(O=(P=0|t[20+x>>2])+((p=0|t[12+x>>2])<<2)|0,0<(0|p)))for(n=(0|t[u>>2])+(k<<2)|0,it=P;t[n>>2]=t[it>>2],!(O>>>0<=(it=it+4|0)>>>0);)n=n+4|0;if((0|(M=M+1|0))==(0|rt))break;k=(0|t[8+x>>2])+k|0}}(e),function(n){Ya(12+(n|=0)|0,0|t[36+n>>2],0|t[44+n>>2],0|t[40+n>>2])}(e),function(n){var x,y,u,l,g,p,M=0,k=0,b=C=(p=C)+63&-64;if(C=C+16|0,g=(M=0|t[308+(n|=0)>>2])+((k=0|t[n+304>>2])<<5)|0,y=0|t[n+40>>2],u=0|t[n+312>>2],l=0|t[n+144>>2],x=0|t[n+264>>2],(0|k)<=0)C=p;else{for(k=u;;){do if(0|t[M+28>>2]){if((0|(n=0|t[M+4>>2]))!=-1&&!(0|t[y+(n<<2)>>2])){n=0;break}if((0|(n=0|t[M+8>>2]))!=-1&&!(0|t[u+(n<<2)>>2])){n=0;break}n=(0|t[32+(0|t[M>>2])>>2])==0}else n=0;while(0);switch(n&=1,t[k>>2]=n,0|t[M+12>>2]){case 0:t[l+(t[M+16>>2]<<2)>>2]=n;break;case 1:t[x+(t[M+16>>2]<<2)>>2]=n;break;default:pt(0,2874,b)}if(g>>>0<=(M=M+32|0)>>>0)break;k=k+4|0}C=p}}(e),rl(e),sl(e),q2(e),$2(e),function(n){var x=0,y=0,u=(x=0|t[(n|=0)+336>>2])+(20*(y=0|t[n+332>>2])|0)|0,l=0|t[n+40>>2],g=0|t[n+312>>2];if(!((0|y)<=0))for(y=0|t[n+424>>2];;){do if(0|t[x+12>>2]){if((0|(n=0|t[x+4>>2]))!=-1&&!(0|t[l+(n<<2)>>2])){n=0;break}if((0|(n=0|t[x+8>>2]))!=-1&&!(0|t[g+(n<<2)>>2])){n=0;break}n=(0|t[32+(0|t[x>>2])>>2])==0}else n=0;while(0);if(t[y>>2]=1&n,u>>>0<=(x=x+20|0)>>>0)break;y=y+4|0}}(e),al(e),K2(e),function(n){var x,y,u,l,g,it=0,p=0,M=0,k=0,b=0,P=0,E=0,S=0,z=0,O=0,H=0,U=0|t[504+(n|=0)>>2],it=0|t[n>>2],ft=0|t[it+1192>>2],rt=0|t[n+500>>2];if(!((0|rt)<=0))for(l=n+524|0,g=n+532|0,u=n+528|0,y=it+1224|0,k=M=0;;){if(x=0|t[U+(24*M|0)>>2],(0|(H=0|t[(n=24+x|0)>>2]||0|t[28+x>>2]?6:H))==6&&(t[((H=0)|t[l>>2])+(M<<2)>>2]=t[(S=12+x|0)>>2],0|t[n>>2])&&(E=0|t[ft+(M<<2)>>2],z=(b=0|t[16+x>>2])+((p=0|t[S>>2])<<2)|0,0<(0|p)))for(n=0|t[y>>2],it=(0|t[g>>2])+(k<<2)|0,p=b;t[it>>2]=t[n+((0|t[p>>2])+E<<2)>>2],!(z>>>0<=(p=p+4|0)>>>0);)it=it+4|0;if(0|t[28+x>>2]&&(O=(P=0|t[20+x>>2])+((p=0|t[12+x>>2])<<2)|0,0<(0|p)))for(n=(0|t[u>>2])+(k<<2)|0,it=P;t[n>>2]=t[it>>2],!(O>>>0<=(it=it+4|0)>>>0);)n=n+4|0;if((0|(M=M+1|0))==(0|rt))break;k=(0|t[8+x>>2])+k|0}}(e),function(n){re(508+(n|=0)|0,0|t[532+n>>2],0|t[536+n>>2],0)}(e),ml(e),_l(e),function(n){var x=0,y=0,u=0,l=0,g=0,p=(x=0|t[8+(n|=0)>>2])+(12*(g=0|t[n+4>>2])|0)|0,M=0|t[n+48>>2];if(!((0|g)<=0))for(g=0|t[n+40>>2],y=M,n=0|t[n+52>>2];0|t[g>>2]&&(u=+B[n>>2],B[y>>2]=u,(0|(l=0|t[x+4>>2]))!=-1)&&(B[y>>2]=u*+B[M+(l<<2)>>2]),!(p>>>0<=(x=x+12|0)>>>0);)g=g+4|0,y=y+4|0,n=n+4|0}(e),function(n){var x=0,y=0,u=0,l=0|t[304+(n|=0)>>2];if(!((0|l)<=0))for(x=0|t[312+n>>2],y=0|t[308+n>>2],u=0;0|t[x>>2]&&_n[3&t[y+20>>2]](n,u),(0|(u=u+1|0))!=(0|l);)x=x+4|0,y=y+32|0}(e),tl(e),dl(e),function(n){var x,y,u=0,l=0,g=0,p=0,M=0;if(!(0|t[(n|=0)+624>>2]||(x=(u=0|t[n+336>>2])+(20*(p=0|t[n+332>>2])|0)|0,(0|p)<=0)))for(p=0|t[n+424>>2],n=0|t[n+444>>2];;){if(0|t[p>>2]&&(g=0|t[n>>2],M=(l=0|t[u+16>>2])<<1,0<(0|l)))for(l=1;B[(y=g+(l<<2)|0)>>2]=-+B[y>>2],(0|(l=l+2|0))<(0|M););if(x>>>0<=(u=u+20|0)>>>0)break;p=p+4|0,n=n+4|0}}(e),function(n){var x,y,z=0,O=0,H=0,U=0,u=0,l=0,g=0,S=0,p=0,M=0,k=0,b=0,P=0,E=0|t[(n|=0)+480>>2],S=(y=0|t[n+484>>2])+(28*E|0)|0,z=0|t[n+440>>2],O=0|t[n+44>>2],H=0|t[n+40>>2],U=0|t[n+424>>2];if(!((0|E)<=0)){p=y;do if(0<(0|(u=0|t[p+4>>2])))for(l=0|t[p+12>>2],g=p+20|0,M=0;P=0|t[l+(M<<4)+4>>2],b=(0|t[l+(M<<4)>>2])==1,t[l+(M<<4)+12>>2]=t[(0|t[(b?H:U)+(P<<2)>>2]?(b?O:z)+(P<<2)|0:g)>>2],(0|(M=M+1|0))!=(0|u););while((p=p+28|0)>>>0<S>>>0);x=0|t[n+436>>2],b=n+488|0,P=n+492|0,M=n+496|0,k=0;do{if(0<(0|t[(n=y+(28*k|0)+24|0)>>2])){for(z=0|t[b>>2],H=0;t[z+(H<<2)>>2]=-1,(0|(H=H+1|0))<(0|(O=0|t[n>>2])););if(0<(0|O))for(z=0|t[M>>2],O=0;t[z+(O<<2)>>2]=-1,(0|(O=O+1|0))<(0|t[n>>2]););}if(0<(0|t[(p=y+(28*k|0)+4|0)>>2])){for(S=0|t[P>>2],O=0;t[S+(O<<2)>>2]=-1,(0|(O=O+1|0))<(0|(z=0|t[p>>2])););if(0<(0|z))for(H=0|t[y+(28*k|0)+12>>2],u=y+(28*k|0)+20|0,U=0|t[M>>2],g=0;O=(0|t[H+(g<<4)+12>>2])-(0|t[u>>2])|0,z=(0|(z=0|t[(l=U+(O<<2)|0)>>2]))==-1?(0|t[b>>2])+(O<<2)|0:S+(z<<2)|0,t[z>>2]=g,(0|(g=(t[l>>2]=g)+1|0))<(0|t[p>>2]););}if(0<(0|(z=0|t[n>>2]))){g=0|t[b>>2],S=y+(28*k|0)+12|0,O=(l=0)|t[y+(28*k|0)+8>>2];do if((0|(H=0|t[g+(l<<2)>>2]))!=-1){for(U=0|t[S>>2],u=0|t[P>>2];O=(z=(0|t[U+(H<<4)>>2])==1?(z=0|t[U+(H<<4)+8>>2],t[y+(28*z|0)+8>>2]=O,0|t[y+(28*z|0)>>2]):(t[x+(t[U+(H<<4)+4>>2]<<2)>>2]=O,1))+O|0,!((0|(H=0|t[u+((p=H)<<2)>>2]))<=(0|p)|(0|H)==-1););z=0|t[n>>2]}while((0|(l=l+1|0))<(0|z))}}while((0|(k=k+1|0))!=(0|E))}}(e),il(e),t[e+620>>2]=0}function nl(e){var r,a,m=0,f=0,n=0,x=0,y=0,u=0,l=0,g=0,p=0,M=0,k=0,b=0,P=0,E=0,S=0;if(!((0|Rt[4+(0|t[(e|=0)>>2])>>0])<4||(a=(m=0|t[e+544>>2])+(52*(r=0|t[e+540>>2])|0)|0,(0|r)<=0))){r=(0|t[e+620>>2])==0;do e:do if((0|t[m>>2])==1&&(b=+B[m+44>>2],E=(P=0|t[m+36>>2])+(28*(l=0|t[m+40>>2])|0)|0,0<(0|l))){if(!r)for(u=P;;){n=0|t[u>>2];do if(2<=(0|n)&&(M=0|t[u+4>>2],!(b<=(k=+B[M>>2])))){for(x=1,y=k;;){if(e=x+1|0,b<(f=+B[M+(x<<2)>>2])){l=25;break}if(!((0|e)<(0|n))){l=26;break}x=e,y=f}if((0|l)==25){e=x+-1|0,f=(b-y)/(f-y);break}if((0|l)==26){e=n+-1|0,f=0;break}}else f=e=0;while(0);if(y=+B[(x=u+16|0)>>2],n=1&((0|t[(l=u+12|0)>>2])!=(0|e)|(S=y!=f)&(f==0|y==0)),t[u+24>>2]=1&S,t[u+20>>2]=n,B[x>>2]=f,t[l>>2]=e,E>>>0<=(u=u+28|0)>>>0)break e}if(!(0|t[m+48>>2])){for(e=P;;)if(t[e+24>>2]=0,E>>>(t[e+20>>2]=0)<=(e=e+28|0)>>>0)break e}u=P;do{n=0|t[u>>2];do if(2<=(0|n)&&(g=0|t[u+4>>2],!(b<=(p=+B[g>>2])))){for(x=1,y=p;;){if(e=x+1|0,b<(f=+B[g+(x<<2)>>2])){l=17;break}if(!((0|e)<(0|n))){l=18;break}x=e,y=f}if((0|l)==17){e=x+-1|0,f=(b-y)/(f-y);break}if((0|l)==18){e=n+-1|0,f=0;break}}else f=e=0;while(0)}while(y=+B[(l=u+16|0)>>2],x=1&((0|t[(S=u+12|0)>>2])!=(0|e)|(n=y!=f)&(f==0|y==0)),t[u+24>>2]=1&n,t[u+20>>2]=x,B[l>>2]=f,t[S>>2]=e,(u=u+28|0)>>>0<E>>>0)}while(0);while((m=m+52|0)>>>0<a>>>0)}}function ol(e){var r,a,m,f,n,x,y=0,u=0,l=0,g=0,p=0,M=0,k=0,b=0,P=0,E=0,S=0,z=0,O=0,H=0,U=0;if(!((0|Rt[4+(0|t[(e|=0)>>2])>>0])<4||(x=(y=0|t[e+592>>2])+(48*(n=0|t[e+588>>2])|0)|0,(0|n)<=0))){n=(0|t[e+620>>2])==0;do{if(e=0|t[y>>2],l=n?0|t[e+24>>2]:1,(P=n?0|t[e+20>>2]:1)|l){k=0|t[e+12>>2],u=+B[e+16>>2],M=(0|k)==(0|(e=0|t[e+8>>2]));do if(u!=0){if(p=k+1|0,M){u=(l=e=t[y+8>>2]=1)-u,S=11;break}e=(0|p)==(0|e)?1:2,S=10;break}while(e=1&(1^M),S=10,0);(0|S)==10&&(S=0,t[y+8>>2]=e,l?(p=k,e=P,S=11):(p=k,e=P,l=0)),(0|S)==11&&(B[y+20>>2]=1-u,B[y+24>>2]=u),e?(t[y+12>>2]=p,t[y+16>>2]=p+1):e=0}else e=P;m=0|t[y+36>>2];e:do if(0<(0|m)){if(f=0|t[y+40>>2],!n)for(k=0,u=1;;){M=0|t[f+(k<<2)>>2],p=0|t[M>>2];do if(0|p&&(z=0|t[M+4>>2],O=0|t[M+8>>2],H=0|t[M+12>>2],U=+B[p+44>>2],1<=(0|H))){if((0|H)==1){g=+B[O>>2];break}if(U<=(g=+B[z>>2])){g=+B[O>>2];break}for(p=1;;){if(U<(b=+B[z+(p<<2)>>2])){S=43;break}if(!((0|(p=p+1|0))<(0|H))){S=44;break}g=b}if((0|S)==43){g=(1-(g=(U-g)/(b-g)))*+B[O+(p+-1<<2)>>2]+g*+B[O+(p<<2)>>2];break}if((0|S)==44){g=+B[O+(H+-1<<2)>>2];break}}else g=1;while(0);if(u=u<(B[M+16>>2]=g)?u:g,(0|(k=k+1|0))==(0|m))break e}E=0,u=1;do{a=0|t[f+(E<<2)>>2],p=0|t[a>>2];do if(p){if(!(0|t[p+48>>2])){g=+B[16+a>>2];break}M=0|t[4+a>>2],k=0|t[8+a>>2],P=0|t[12+a>>2],r=+B[p+44>>2];do if(1<=(0|P)){if((0|P)==1){g=+B[k>>2];break}if(r<=(g=+B[M>>2])){g=+B[k>>2];break}for(p=1;;){if(r<(b=+B[M+(p<<2)>>2])){S=29;break}if(!((0|(p=p+1|0))<(0|P))){S=28;break}g=b}if((0|S)==28){g=+B[k+(P+-1<<2)>>2];break}if((0|S)==29){g=(1-(g=(r-g)/(b-g)))*+B[k+(p+-1<<2)>>2]+g*+B[k+(p<<2)>>2];break}}else g=1;while(0);B[16+a>>2]=g}else g=B[16+a>>2]=1;while(0)}while(u=u<g?u:g,(0|(E=E+1|0))!=(0|m))}else u=1;while(0)}while(B[y+44>>2]=u,t[y+28>>2]=e,t[y+32>>2]=l,(y=y+48|0)>>>0<x>>>0)}}function Ja(e,r,a){e|=0,r|=0,a|=0;var m,f,n=0,x=C,y=C=C+63&-64;C=C+144|0,Ve(0|y,640,144),t[48+y>>2]=n=(n=-2-e|0)>>>0<256?n:256,t[(m=20+y|0)>>2]=e,f=(t[44+y>>2]=e)+n|0,t[(e=16+y|0)>>2]=f,t[28+y>>2]=f,qa(y,r,a),0|n&&(f=0|t[m>>2],J[f+(((0|f)==(0|t[e>>2]))<<31>>31)>>0]=0),C=x}function qa(e,r,a){ul(e|=0,r|=0,a|=0)}function ll(e,r,a,m,f,n){e|=0,r=+r,a|=0,m|=0,f|=0,n|=0;var x,y,u=0,l=0,Y=0,g=0,p=0,M=0,k=0,b=0,P=0,E=0,S=0,z=0,O=0,H=0,U=0,it=0,ft=0,rt=0,st=0,ht=0,dt=C,Y=C=C+63&-64;C=C+560|0,g=Y+32|0,S=Y+536|0,rt=12+(Y=(st=ht=Y)+540|0)|(t[S>>2]=0),en(r),y=(0|(u=0|ge()))<0?(en(r=-r),u=0|ge(),ft=1,2955):(ft=(2049&f|0)!=0&1,2048&f|0?2958:1&f|0?2961:2956);do if(!0&(2146435072&u|0)==2146435072)ht=(32&n|0)!=0,de(e,32,a,u=ft+3|0,-65537&f),ue(e,y,ft),ue(e,r!=r|!1?ht?2982:2986:ht?2974:2978,3),de(e,32,a,u,8192^f);else{if((u=(b=2*+rn(r,S))!=0)&&(t[S>>2]=(0|t[S>>2])-1),(0|(O=32|n))==97){P=0|(M=32&n)?9+y|0:y,k=2|ft,u=12-m|0;do if(!(11<m>>>0|(0|u)==0)){for(r=8;r*=16,(0|(u=u+-1|0))!=0;);if((0|J[P>>0])==45){r=-(r+(-b-r));break}r=b+r-r;break}while(r=b,0);for((0|(u=0|Ui(u=(0|(l=0|t[S>>2]))<0?0-l|0:l,((0|u)<0)<<31>>31,rt)))==(0|rt)&&(J[(u=Y+11|0)>>0]=48),J[u+-1>>0]=43+(l>>31&2),J[(p=u+-2|0)>>0]=n+15,l=(0|m)<1,Y=(8&f|0)==0,u=ht;g=u+1|0,J[u>>0]=M|Rt[480+(ft=~~r)>>0],r=16*(r-(0|ft)),(g-st|0)!=1||Y&l&r==0||(J[g>>0]=46,g=u+2|0),r!=0;)u=g;de(e,32,a,rt=(u=0|m&&(-2-st+g|0)<(0|m)?m+2+(l=rt)-(Y=p)|0:(l=rt)-st-(Y=p)+g|0)+k|0,f),ue(e,P,k),de(e,48,a,rt,65536^f),ue(e,ht,st=g-st|0),de(e,48,u-(st+(ht=l-Y|0))|0,0,0),ue(e,p,ht),de(e,32,a,rt,8192^f),u=rt;break}for(l=(0|m)<0?6:m,r=u?(Y=(0|t[S>>2])-28|0,t[S>>2]=Y,268435456*b):(Y=0|t[S>>2],b),g=x=(0|Y)<0?g:g+288|0;t[g>>2]=U=~~r>>>0,g=g+4|0,(r=1e9*(r-(U>>>0)))!=0;);if(U=x,0<(0|Y)){u=x;do{if(M=(0|Y)<29?Y:29,u>>>0<=(Y=g+-4|0)>>>0){for(p=0;E=0|h0(0|(E=0|un(0|t[Y>>2],0,0|M)),0|ge(),0|p,0),H=0|h0(0|E,0|(z=0|ge()),0|(H=0|vr(0|(p=0|Br(0|E,0|z,1e9,0)),0|ge(),-1e9,-1)),0|ge()),ge(),t[Y>>2]=H,u>>>0<=(Y=Y+-4|0)>>>0;);p&&(t[(u=u+-4|0)>>2]=p)}e:do if(u>>>0<g>>>0)for(;;){if(0|t[(Y=g+-4|0)>>2])break e;if(!(u>>>0<Y>>>0)){g=Y;break}g=Y}while(0)}while(Y=(0|t[S>>2])-M|0,0<(0|(t[S>>2]=Y)))}else u=x;if((0|Y)<0){m=1+((l+25|0)/9|0)|0,E=(0|O)==102;do if(P=(0|(P=0-Y|0))<9?P:9,u>>>0<g>>>0){for(M=(1<<P)-1|0,p=P?1e9>>>P:1e9,k=0,Y=u;H=0|t[Y>>2],t[Y>>2]=(P?H>>>P:H)+k,k=0|ie(H&M,p),(Y=Y+4|0)>>>0<g>>>0;);u=0|t[u>>2]?u:u+4|0,k&&(t[g>>2]=k,g=g+4|0)}else u=0|t[u>>2]?u:u+4|0;while(g=(0|m)<((H=g-(Y=E?x:u)|0)>>2|0)?Y+(m<<2)|0:g,Y=(0|t[S>>2])+P|0,(0|(t[S>>2]=Y))<0);E=g}else E=g;if(u>>>0<E>>>0){if(Y=9*((U-u|0)>>2)|0,10<=(p=0|t[u>>2])>>>0)for(g=10;Y=Y+1|0,(g=10*g|0)>>>0<=p>>>0;);}else Y=0;if((0|(g=l-((0|O)==102?0:Y)+(((z=(0|l)!=0)&(S=(0|O)==103))<<31>>31)|0))<((9*((H=E-U|0)>>2)|0)-9|0)){if(m=x+4+((g=(0|(H=g+9216|0))/9|0)-1024<<2)|0,(0|(g=H+(0|ie(g,-9))|0))<8)for(p=10;p=10*p|0,(0|g)<7;)g=g+1|0;else p=10;if((k=(m+4|0)==(0|E))&(0|(M=(M=0|t[m>>2])-(P=0|ie(g=(M>>>0)/(p>>>0)|0,p))|0))==0)g=m;else if(b=1&g|0?9007199254740994:9007199254740992,r=M>>>0<(H=p>>>1)>>>0?.5:k&(0|M)==(0|H)?1:1.5,ft&&(b=(H=(0|J[y>>0])==45)?-b:b,r=H?-r:r),t[m>>2]=P,b+r!=b){if(999999999<(t[m>>2]=H=P+p|0)>>>0)for(Y=m;(g=Y+-4|0)>>>(t[Y>>2]=0)<u>>>0&&(t[(u=u+-4|0)>>2]=0),H=1+(0|t[g>>2])|0,999999999<(t[g>>2]=H)>>>0;)Y=g;else g=m;if(Y=9*((U-u|0)>>2)|0,10<=(M=0|t[u>>2])>>>0)for(p=10;Y=Y+1|0,(p=10*p|0)>>>0<=M>>>0;);}else g=m;H=u,u=(O=g+4|0)>>>0<E>>>0?O:E}else H=u,u=E;P=0-Y|0;e:do if(H>>>0<u>>>0)for(;;){if(0|t[(g=u+-4|0)>>2]){E=1,O=u;break e}if(!(H>>>0<g>>>0)){E=0,O=g;break}u=g}else E=0,O=u;while(0);do if(S){if(p=(0|Y)<(0|(u=l+(1&(1^z))|0))&-5<(0|Y)?(l=u+-1-Y|0,n+-1|0):(l=u+-1|0,n+-2|0),!(8&f)){if(E&&0|(it=0|t[O+-4>>2]))if((it>>>0)%10|0)g=0;else for(u=10,g=0;g=g+1|0,!((it>>>0)%((u=10*u|0)>>>0)|0););else g=9;if(u=(9*((O-U|0)>>2)|0)-9|0,(32|p)==102){l=(0|l)<(0|(n=0<(0|(n=u-g|0))?n:0))?l:n;break}l=(0|l)<(0|(n=0<(0|(n=u+Y-g|0))?n:0))?l:n;break}}else p=n;while(0);if(M=(m=(0|l)!=0)?1:f>>>3&1,k=(32|p)==102)u=(z=0)<(0|Y)?Y:0;else{if(((g=rt)-(u=0|Ui(u=(0|Y)<0?P:Y,((0|u)<0)<<31>>31,rt))|0)<2)for(;J[(u=u+-1|0)>>0]=48,(g-u|0)<2;);J[u+-1>>0]=43+(Y>>31&2),J[(u=u+-2|0)>>0]=p,u=g-(z=u)|0}if(de(e,32,a,u=ft+1+l+M+u|0,f),ue(e,y,ft),de(e,48,a,u,65536^f),k){k=P=ht+9|0,p=ht+8|0,g=M=x>>>0<H>>>0?x:H;do if(Y=0|Ui(0|t[g>>2],0,P),(0|g)==(0|M))(0|Y)==(0|P)&&(J[p>>0]=48,Y=p);else if(ht>>>0<Y>>>0)for(Pe(0|ht,48,Y-st|0);ht>>>0<(Y=Y+-1|0)>>>0;);while(ue(e,Y,k-Y|0),(g=g+4|0)>>>0<=x>>>0);if((8&f|0)==0&(1^m)||ue(e,2990,1),g>>>0<O>>>0&0<(0|l))for(;;){if(ht>>>0<(Y=0|Ui(0|t[g>>2],0,P))>>>0)for(Pe(0|ht,48,Y-st|0);ht>>>0<(Y=Y+-1|0)>>>0;);if(ue(e,Y,(0|l)<9?l:9),Y=l+-9|0,!((g=g+4|0)>>>0<O>>>0&9<(0|l))){l=Y;break}l=Y}de(e,48,l+9|0,9,0)}else{if(H>>>0<(m=E?O:H+4|0)>>>0&-1<(0|l)){S=(8&f|0)==0,E=P=ht+9|0,p=0-st|0,k=ht+8|0,M=H;do{(0|(Y=0|Ui(0|t[M>>2],0,P)))==(0|P)&&(J[k>>0]=48,Y=k);do if((0|M)==(0|H)){if(g=Y+1|0,ue(e,Y,1),S&(0|l)<1){Y=g;break}ue(e,2990,1),Y=g}else{if(Y>>>0<=ht>>>0)break;for(Pe(0|ht,48,Y+p|0);ht>>>0<(Y=Y+-1|0)>>>0;);}while(0)}while(ue(e,Y,(0|(st=E-Y|0))<(0|l)?st:l),(M=M+4|0)>>>0<m>>>0&-1<(0|(l=l-st|0)))}de(e,48,l+18|0,18,0),ue(e,z,rt-z|0)}de(e,32,a,u,8192^f)}while(0);return C=dt,0|((0|u)<(0|a)?a:u)}function ul(e,r,a){e|=0,r|=0,a|=0;var m,f,n,x,y,u,l,g=0,p=0,M=C,k=C=C+63&-64;for(C=C+224|0,y=208+k|0,u=80+k|0,p=40+(g=l=160+k|0)|0;(0|(g=g+4|(t[g>>2]=0)))<(0|p););t[y>>2]=t[a>>2],0<=(0|Cr(0,r,y,u,l))&&(x=32&(a=0|t[e>>2]),(0|J[e+74>>0])<1&&(t[e>>2]=-33&a),0|t[(p=e+48|0)>>2]?Cr(e,r,y,u,l):(a=0|t[(g=e+44|0)>>2],t[g>>2]=k,t[(m=e+28|0)>>2]=k,t[(n=e+20|0)>>2]=k,t[p>>2]=80,t[(f=e+16|0)>>2]=80+k,Cr(e,r,y,u,l),0|a&&(Y0[3&t[e+36>>2]](e,0,0),t[g>>2]=a,t[p>>2]=0,t[f>>2]=0,t[m>>2]=0,t[n>>2]=0)),t[e>>2]=t[e>>2]|x),C=M}function Cr(e,r,a,m,f){e|=0,a|=0,m|=0,f|=0;var n,x,y,u,l,g,p,M,k=0,b=0,P=0,E=0,S=0,z=0,O=0,H=0,U=0,it=0,ft=0,rt=0,st=0,ht=C,dt=C=C+63&-64;C=C+64|0,p=56+dt|0,g=40+dt|0,M=48+(x=dt)|0,dt=60+dt|0,t[p>>2]=r|=0,l=(0|e)!=0,u=n=40+x|0,x=39+x|0,y=4+M|0,E=k=r=0;e:for(;;){do{do if(-1<(0|r)){if((2147483647-r|0)<(0|k)){t[1026]=61,r=-1;break}r=k+r|0;break}while(0);if(O=0|t[p>>2],!((k=0|J[O>>0])<<24>>24)){rt=91;break e}b=O;t:for(;;){switch(k<<24>>24){case 37:rt=10;break t;case 0:k=b;break t}t[p>>2]=ft=b+1|0,k=0|J[ft>>0],b=ft}t:do if((0|rt)==10){rt=0,k=P=b;do if((0|J[P+1>>0])!=37)break t;while(k=k+1|0,t[p>>2]=P=P+2|0,(0|J[P>>0])==37)}while(0)}while(k=k-O|0,l&&ue(e,O,k),(0|k)!=0);if(P=0|t[p>>2],z=0|l0(k=0|J[P+1>>0])?(b=(z=(0|J[P+2>>0])==36)?3:1,U=z?k+-48|0:-1,z?1:E):(U=-(b=1),E),t[p>>2]=b=P+b|0,31<(P=((k=0|J[b>>0])<<24>>24)-32|0)>>>0|(1<<P&75913|0)==0)S=0;else for(k=0;;){if(E=1<<P|k,t[p>>2]=b=b+1|0,31<(P=((k=0|J[b>>0])<<24>>24)-32|0)>>>0|(1<<P&75913|0)==0){S=E;break}k=E}if(k<<24>>24==42){if(0|l0(k=0|J[(P=b+1|0)>>0])&&(0|J[b+2>>0])==36)t[f+(k+-48<<2)>>2]=10,E=1,k=b+3|0,b=0|t[m+((0|J[P>>0])-48<<3)>>2];else{if(0|z){r=-1;break}l?(E=3+(0|t[a>>2])&-4,b=0|t[E>>2],t[a>>2]=E+4,E=0,k=P):(k=P,b=E=0)}P=t[p>>2]=k,H=(it=(0|b)<0)?8192|S:S,ft=E,it=it?0-b|0:b}else{if((0|(k=0|$a(p)))<0){r=-1;break}P=0|t[p>>2],H=S,ft=z,it=k}do if((0|J[P>>0])==46){if((0|J[(k=P+1|0)>>0])!=42){t[p>>2]=k,S=0|$a(p),k=0|t[p>>2];break}if(0|l0(b=0|J[(k=P+2|0)>>0])&&(0|J[P+3>>0])==36){t[f+(b+-48<<2)>>2]=10,S=0|t[m+((0|J[k>>0])-48<<3)>>2],t[p>>2]=k=P+4|0;break}if(0|ft){r=-1;break e}l?(z=3+(0|t[a>>2])&-4,b=0|t[z>>2],t[a>>2]=z+4):b=0,t[p>>2]=k,S=b}else k=P,S=-1;while(0);for(z=0;;){if(57<((0|J[k>>0])-65|0)>>>0){r=-1;break e}if(t[p>>2]=b=k+1|0,!(((E=255&(P=0|J[(0|J[k>>0])-65+(16+(58*z|0))>>0]))-1|0)>>>0<8))break;k=b,z=E}if(!(P<<24>>24)){r=-1;break}b=-1<(0|U);do if(P<<24>>24==19){if(b){r=-1;break e}rt=52}else{if(b){t[f+(U<<2)>>2]=E,U=0|t[4+(E=m+(U<<3)|0)>>2],t[(rt=g)>>2]=t[E>>2],t[rt+4>>2]=U,rt=52;break}if(!l){r=0;break e}Ka(g,E,a),rt=53}while(0);(0|rt)==52&&(rt=0,l?rt=53:k=0);t:do if((0|rt)==53){P=(rt=0)!=(0|z)&(15&(P=0|J[k>>0])|0)==3?-33&P:P,k=-65537&H,U=8192&H|0?k:H;i:do switch(0|P){case 110:switch((255&z)<<24>>24){case 0:case 1:t[t[g>>2]>>2]=r,k=0;break t;case 2:k=0|t[g>>2],t[k>>2]=r,t[k+4>>2]=((0|r)<0)<<31>>31,k=0;break t;case 3:qt[t[g>>2]>>1]=r,k=0;break t;case 4:J[t[g>>2]>>0]=r,k=0;break t;case 6:t[t[g>>2]>>2]=r,k=0;break t;case 7:k=0|t[g>>2],t[k>>2]=r,t[k+4>>2]=((0|r)<0)<<31>>31,k=0;break t;default:k=0;break t}case 112:k=8|U,b=8<S>>>0?S:8,E=120,rt=65;break;case 88:case 120:k=U,b=S,E=P,rt=65;break;case 111:S=(8&(k=U)|0)==0|(0|(P=u-(z=0|function(Y,yt,at){if(at|=0,!((0|(Y|=0))==0&(0|(yt|=0))==0))for(;J[(at=at+-1|0)>>0]=7&Y|48,!((0|(Y=0|X0(0|Y,0|yt,3)))==0&(0|(yt=0|ge()))==0););return 0|at}(O=0|t[(H=g)>>2],H=0|t[H+4>>2],n))|0))<(0|S)?S:P+1|0,P=0,b=2938,rt=71;break;case 105:case 100:if(k=0|t[(b=g)>>2],(0|(b=0|t[b+4>>2]))<0){k=0|G0(0,0,0|k,0|b),b=0|ge(),t[(P=g)>>2]=k,t[P+4>>2]=b,P=1,E=2938,rt=70;break i}P=(2049&U|0)!=0&1,E=2048&U|0?2939:1&U|0?2940:2938,rt=70;break i;case 117:k=0|t[(b=g)>>2],b=0|t[b+4>>2],P=0,E=2938,rt=70;break;case 99:J[x>>0]=t[g>>2],O=x,z=k,E=1,P=0,b=2938,k=u;break;case 115:O=H=0|(H=0|t[g>>2])?H:2948,z=k,E=(st=(0|(U=0|Qa(H,S)))==0)?S:U-H|0,P=0,b=2938,k=st?H+S|0:U;break;case 67:t[M>>2]=t[g>>2],t[y>>2]=0,P=t[g>>2]=M,S=-1,rt=78;break;case 83:if(S){P=0|t[g>>2],rt=78;break i}de(e,32,it,0,U),k=0,rt=88;break i;case 65:case 71:case 70:case 69:case 97:case 103:case 102:case 101:k=0|ll(e,+Xt[g>>3],it,S,U,P);break t;default:z=U,E=S,P=0,b=2938,k=u}while(0);i:do if((0|rt)==65)z=0|hl(O=0|t[(H=g)>>2],H=0|t[H+4>>2],n,32&E),S=b,P=(st=(8&k|0)==0|(0|O)==0&(0|H)==0)?0:2,b=st?2938:2938+(E>>>4)|0,rt=71;else if((0|rt)==70)z=0|Ui(O=k,H=b,n),k=U,b=E,rt=71;else if((0|rt)==78){for(k=rt=0,z=P;b=0|t[z>>2];){if((E=(0|(b=0|tn(dt,b)))<0)|(S-k|0)>>>0<b>>>0){rt=82;break}if(!((k=b+k|0)>>>0<S>>>0))break;z=z+4|0}if((0|rt)==82&&(rt=0,E)){r=-1;break e}if(de(e,32,it,k,U),k)for(E=0;;){if(!(b=0|t[P>>2])){rt=88;break i}if((0|k)<(0|(E=(b=0|tn(dt,b))+E|0))){rt=88;break i}if(ue(e,dt,b),k>>>0<=E>>>0){rt=88;break}P=P+4|0}else k=0,rt=88}while(0);if((0|rt)==71)st=(rt=0)!=(0|S)|(E=(0|O)!=0|(0|H)!=0),E=u-z+(1&(1^E))|0,O=st?z:n,z=-1<(0|S)?-65537&k:k,E=st?(0|E)<(0|S)?S:E:0,k=u;else if((0|rt)==88){rt=0,de(e,32,it,k,8192^U),k=(0|k)<(0|it)?it:k;break}de(e,32,k=(0|it)<(0|(st=(H=(0|E)<(0|(U=k-O|0))?U:E)+P|0))?st:it,st,z),ue(e,b,P),de(e,48,k,st,65536^z),de(e,48,H,U,0),ue(e,O,U),de(e,32,k,st,8192^z)}while(0);E=ft}e:do if((0|rt)==91&&!e)if(E){for(r=1;k=0|t[f+(r<<2)>>2];)if(Ka(m+(r<<3)|0,k,a),10<=(r=r+1|0)>>>0){r=1;break e}for(k=0;;){if(r=r+1|0,0|k){r=-1;break e}if(10<=r>>>0){r=1;break e}k=0|t[f+(r<<2)>>2]}}else r=0;while(0);return C=ht,0|r}function ue(e,r,a){r|=0,a|=0,32&t[(e|=0)>>2]||fl(r,a,e)}function l0(e){return((0|e)-48|0)>>>0<10|0}function $a(e){var r=0,m=0,a=0,m=0|t[(e|=0)>>2];if(0|l0((r=0|J[m>>0])<<24>>24))for(a=r,r=0;r=(10*r|0)-48+(a<<24>>24)|0,t[e>>2]=m=m+1|0,(0|l0((a=0|J[m>>0])<<24>>24))!=0;);else r=0;return 0|r}function Ka(e,r,a){e|=0,r|=0,a|=0;var m,f=0,n=0;e:do if(r>>>0<=20)switch(0|r){case 9:f=3+(0|t[a>>2])&-4,r=0|t[f>>2],t[a>>2]=f+4,t[e>>2]=r;break e;case 10:f=3+(0|t[a>>2])&-4,r=0|t[f>>2],t[a>>2]=f+4,t[(f=e)>>2]=r,t[f+4>>2]=((0|r)<0)<<31>>31;break e;case 11:f=3+(0|t[a>>2])&-4,r=0|t[f>>2],t[a>>2]=f+4,t[(f=e)>>2]=r,t[f+4>>2]=0;break e;case 12:f=7+(0|t[a>>2])&-8,n=0|t[(r=f)>>2],r=0|t[r+4>>2],t[a>>2]=f+8,t[(f=e)>>2]=n,t[f+4>>2]=r;break e;case 13:n=3+(0|t[a>>2])&-4,f=0|t[n>>2],t[a>>2]=n+4,t[(n=e)>>2]=f=(65535&f)<<16>>16,t[n+4>>2]=((0|f)<0)<<31>>31;break e;case 14:n=3+(0|t[a>>2])&-4,f=0|t[n>>2],t[a>>2]=n+4,t[(n=e)>>2]=65535&f,t[n+4>>2]=0;break e;case 15:n=3+(0|t[a>>2])&-4,f=0|t[n>>2],t[a>>2]=n+4,t[(n=e)>>2]=f=(255&f)<<24>>24,t[n+4>>2]=((0|f)<0)<<31>>31;break e;case 16:n=3+(0|t[a>>2])&-4,f=0|t[n>>2],t[a>>2]=n+4,t[(n=e)>>2]=255&f,t[n+4>>2]=0;break e;case 17:n=7+(0|t[a>>2])&-8,m=+Xt[n>>3],t[a>>2]=n+8,Xt[e>>3]=m;break e;case 18:(function(x,y){x|=0;var u=7+(0|t[(y|=0)>>2])&-8,l=+Xt[u>>3];t[y>>2]=8+u,Xt[x>>3]=l})(e,a);break e;default:break e}while(0)}function hl(e,r,a,m){if(a|=0,m|=0,!((0|(e|=0))==0&(0|(r|=0))==0))for(;J[(a=a+-1|0)>>0]=0|Rt[480+(15&e)>>0]|m,!((0|(e=0|X0(0|e,0|r,4)))==0&(0|(r=0|ge()))==0););return 0|a}function Ui(e,r,a){a|=0;var m,f=0,n=0;if(0<(r|=0)>>>0|(0|r)==0&4294967295<(e|=0)>>>0)for(;n=0|h0(0|(m=e),0|(f=r),0|(n=0|vr(0|(e=0|Br(0|e,0|r,10,0)),0|(r=0|ge()),-10,-1)),0|ge()),ge(),J[(a=a+-1|0)>>0]=255&n|48,9<f>>>0|(0|f)==9&4294967295<m>>>0;);if(e)for(;f=255&((n=e)+(0|ie(e=(e>>>0)/10|0,-10))|48),J[(a=a+-1|0)>>0]=f,10<=n>>>0;);return 0|a}function Qa(e,r){e|=0;var m=0,a=0,m=(0|(r|=0))!=0;e:do if(m&(3&e|0)!=0)for(;;){if(!(0|J[e>>0]))break e;if(!((m=(0|(r=r+-1|0))!=0)&(3&(e=e+1|0)|0)!=0)){a=5;break}}else a=5;while(0);e:do if((0|a)==5){do if(m){if(!(0|J[e>>0])){if(r)break e;break}t:do if(3<r>>>0)for(;;){if((-2139062144&(m=0|t[e>>2])^-2139062144)&m+-16843009|0)break t;if(e=e+4|0,(r=r+-4|0)>>>0<=3){a=11;break}}else a=11;while(0);if((0|a)==11&&!r)break;for(;;){if(!(0|J[e>>0]))break e;if(!(r=r+-1|0))break;e=e+1|0}}while(0);e=0}while(0);return 0|e}function de(e,r,a,m,f){e|=0,r|=0;var n=C,x=C=C+63&-64;if(C=C+256|0,(0|(m|=0))<(0|(a|=0))&(73728&(f|=0)|0)==0){if(Pe(0|x,r<<24>>24|0,0|((f=a-m|0)>>>0<256?f:256)),255<f>>>0){for(m=f;ue(e,x,256),255<(m=m+-256|0)>>>0;);f&=255}ue(e,x,f)}C=n}function tn(e,r){return r|=0,0|((e|=0)?0|cl(e,r):0)}function cl(e,r){e|=0,r|=0;do if(e){if(r>>>0<128){J[e>>0]=r,e=1;break}if(!(0|t[1020])){if((-128&r|0)==57216){J[e>>0]=r,e=1;break}t[1026]=25,e=-1;break}if(r>>>0<2048){J[e>>0]=r>>>6|192,J[e+1>>0]=63&r|128,e=2;break}if(r>>>0<55296|(-8192&r|0)==57344){J[e>>0]=r>>>12|224,J[e+1>>0]=r>>>6&63|128,J[e+2>>0]=63&r|128,e=3;break}if((r+-65536|0)>>>0<1048576){J[e>>0]=r>>>18|240,J[e+1>>0]=r>>>12&63|128,J[e+2>>0]=r>>>6&63|128,J[e+3>>0]=63&r|128,e=4;break}t[1026]=25,e=-1;break}while(e=1,0);return 0|e}function fl(e,r,a){e|=0,r|=0;var m,f=0,n=0,x=0;(f=0|t[(n=16+(a|=0)|0)>>2])?x=5:0|function(y){var u=0,l=0|J[(u=74+(y|=0)|0)>>0];return J[u>>0]=255+l|l,0|(u=8&(u=0|t[y>>2])?(t[y>>2]=32|u,-1):(t[8+y>>2]=0,u=(t[4+y>>2]=0)|t[44+y>>2],t[28+y>>2]=u,t[20+y>>2]=u,t[16+y>>2]=u+(0|t[48+y>>2]),0))}(a)||(f=0|t[n>>2],x=5);e:do if((0|x)==5){if((f-(n=x=0|t[(m=a+20|0)>>2])|0)>>>0<r>>>0){Y0[3&t[a+36>>2]](a,e,r);break}t:do if((0|J[a+75>>0])<0|(0|r)==0)f=r;else{for(x=r;(0|J[e+(f=x+-1|0)>>0])!=10;){if(!f){f=r;break t}x=f}if((0|Y0[3&t[a+36>>2]](a,e,x))>>>0<x>>>0)break e;n=0|t[m>>2],f=r-x|0,e=e+x|0}while(0);Ve(0|n,0|e,0|f),t[m>>2]=(0|t[m>>2])+f}while(0)}function en(e){Xt[fe>>3]=e=+e,e=0|t[fe>>2],le(0|t[fe+4>>2])}function rn(e,r){r|=0;var a,m,f=0;switch(Xt[fe>>3]=e=+e,m=0|X0(0|(f=0|t[fe>>2]),0|(a=0|t[fe+4>>2]),52),ge(),2047&m){case 0:f=e!=0?(e=+rn(18446744073709552e3*e,r),(0|t[r>>2])-64|0):0,t[r>>2]=f;break;case 2047:break;default:t[r>>2]=(2047&m)-1022,t[fe>>2]=f,t[fe+4>>2]=-2146435073&a|1071644672,e=+Xt[fe>>3]}return+e}function wr(e){var r,f=0,a=0,m=0,f=0|J[(e|=0)>>0];e:do if(f<<24>>24)for(a=e,m=4,e=1052;;){if(!(f<<24>>24==(r=0|J[e>>0])<<24>>24&(0|(m=m+-1|0))!=0&r<<24>>24!=0))break e;if(e=e+1|0,!((f=0|J[(a=a+1|0)>>0])<<24>>24)){f=0;break}}else f=0,e=1052;while(0);return(255&f)-(0|Rt[e>>0])|0}function u0(e){var r;return 0|(0|(r=0|Qa(e|=0,64))?r-e|0:64)}function kr(e,r,a){r|=0,a|=0;var m,f,n=0,x=0,y=C,u=C=C+63&-64;C=C+240|0,t[u>>2]=e|=0;e:do if(1<(0|r))for(x=n=e,e=1;;){if(-1<(0|Si(n,m=(x=x+-4|0)+(0-(0|t[a+((f=r+-2|0)<<2)>>2]))|0))&&-1<(0|Si(n,x))||(n=u+(e<<2)|0,e=e+1|0,(0|(r=-1<(0|Si(m,x))?(x=t[n>>2]=m,r+-1|0):(t[n>>2]=x,f)))<=1))break e;n=0|t[u>>2]}else e=1;while(0);nn(u,e),C=y}function O0(e,r){var a=0,m=0,f=4+(e|=0)|0;31<(r|=0)>>>0?(a=0|t[f>>2],t[e>>2]=a,r=r+-32|(m=t[f>>2]=0)):(a=0|t[e>>2],m=0|t[f>>2]),t[e>>2]=m<<32-r|(r?a>>>r:a),t[f>>2]=r?m>>>r:m}function U0(e,r,a,m,f,n){e|=0,a|=0,m|=0,f|=0,n|=0;var x,y,u=0,l=0,g=C,p=C=C+63&-64;C=C+240|0,t[(y=232+p|0)>>2]=r|=0,t[(x=4+y|0)>>2]=a,t[p>>2]=e;e:do if((0|r)!=1|(0|a)!=0&&1<=(0|Si(u=e+(0-(0|t[n+(m<<2)>>2]))|0,e)))for(r=u,l=1,u=(0|f)==0;;){if(u&1<(0|m)){if(-1<(0|Si(u=e+-4|0,r))){r=e,u=l,a=10;break e}if(-1<(0|Si(u+(0-(0|t[n+(m+-2<<2)>>2]))|0,r))){r=e,u=l,a=10;break e}}if(a=l+1|0,t[p+(l<<2)>>2]=r,O0(y,f=0|sn(y)),m=f+m|0,!((0|t[y>>2])!=1|(0|t[x>>2])!=0)){u=a,a=10;break e}if((0|Si(u=r+(0-(0|t[n+(m<<2)>>2]))|0,0|t[p>>2]))<1){u=a,a=10;break}e=r,r=u,l=a,u=1}else a=9;while(0);(0|a)==9&&!(0|f)&&(r=e,u=1,a=10),(0|a)==10&&(nn(p,u),kr(r,m,n)),C=g}function N0(e,r){var a=0,m=0,f=4+(e|=0)|0;31<(r|=0)>>>0?(a=0|t[e>>2],t[f>>2]=a,r=r+-32|(m=t[e>>2]=0)):(a=0|t[f>>2],m=0|t[e>>2]),t[f>>2]=((f=32-r|0)?m>>>f:m)|a<<r,t[e>>2]=m<<r}function sn(e){var r;return(r=0|an((0|t[(e|=0)>>2])-1|0))?0|r:0|(0|(e=0|an(0|t[e+4>>2]))?e+32|0:0)}function an(e){var r=0;if(e|=0)if(1&e)r=0;else for(r=0;r=r+1|0,!(2&e);)e>>>=1;else r=32;return 0|r}function nn(e,r){e|=0;var a,f=0,m=C,f=C=C+63&-64;if(C=C+256|0,2<=(0|(r|=0)))for(Ve(0|(t[e+(r<<2)>>2]=f),0|t[e>>2],4),f=0;Ve(0|t[(a=e+(f<<2)|0)>>2],0|t[e+((f=f+1|0)<<2)>>2],4),t[a>>2]=4+(0|t[a>>2]),(0|f)!=(0|r););C=m}function Mr(e){e|=0;var r=0,a=0,m=0,f=0,n=0,x=0,y=0,u=0,l=0,g=0,p=0,U=0,M=0,k=0,b=0,P=0,E=0,S=0,z=0,O=0,H=C,U=C=C+63&-64;C=C+16|0;do if(e>>>0<245){if(p=0|t[1027],3&(a=(e=(l=e>>>0<11?16:e+11&-8)>>>3)?p>>>e:p)|0)return e=0|t[(r=8+(f=4148+((m=(1&a^1)+e|0)<<1<<2)|0)|0)>>2],(0|(a=0|t[(n=e+8|0)>>2]))==(0|f)?t[1027]=p&~(1<<m):(t[a+12>>2]=f,t[r>>2]=a),t[e+4>>2]=3|(O=m<<3),t[(O=e+O+4|0)>>2]=1|t[O>>2],C=H,0|n;if((g=0|t[1029])>>>0<l>>>0){if(0|a)return n=0|t[(r=8+(a=4148+((m=((e=(m=(y=(m=((m=a<<e&((m=2<<e)|0-m))&0-m)-1|0)>>>12&16)?m>>>y:m)>>>5&8)|y|(n=(m=e?m>>>e:m)>>>2&4)|(r=(m=n?m>>>n:m)>>>1&2)|(a=(m=r?m>>>r:m)>>>1&1))+(a?m>>>a:m)|0)<<1<<2)|0)|0)>>2],(0|(e=0|t[(y=n+8|0)>>2]))==(0|a)?t[1027]=e=p&~(1<<m):(t[e+12>>2]=a,t[r>>2]=e,e=p),x=(O=m<<3)-l|0,t[n+4>>2]=3|l,t[4+(f=n+l|0)>>2]=1|x,t[n+O>>2]=x,0|g&&(m=0|t[1032],a=4148+((r=g>>>3)<<1<<2)|0,e=e&(r=1<<r)?0|t[(r=e=a+8|0)>>2]:(t[1027]=e|r,r=a+8|0,a),t[r>>2]=m,t[e+12>>2]=m,t[m+8>>2]=e,t[m+12>>2]=a),t[1029]=x,t[1032]=f,C=H,0|y;if(n=0|t[1028]){for(u=0|t[4412+(((m=(u=(f=(u=(n&0-n)-1|0)>>>12&16)?u>>>f:u)>>>5&8)|f|(x=(u=m?u>>>m:u)>>>2&4)|(a=(u=x?u>>>x:u)>>>1&2)|(y=(u=a?u>>>a:u)>>>1&1))+(y?u>>>y:u)<<2)>>2],y=(-8&t[u+4>>2])-l|0,a=u;(e=0|t[a+16>>2])||(e=0|t[a+20>>2]);)y=(x=(a=(-8&t[e+4>>2])-l|0)>>>0<y>>>0)?a:y,a=e,u=x?e:u;if(u>>>0<(x=u+l|0)>>>0){f=0|t[u+24>>2],r=0|t[u+12>>2];do if((0|r)==(0|u)){if(!(r=0|t[(e=u+20|0)>>2])&&!(r=0|t[(e=u+16|0)>>2])){a=0;break}for(;;)if(a=0|t[(m=r+20|0)>>2])r=a,e=m;else{if(!(a=0|t[(m=r+16|0)>>2]))break;r=a,e=m}t[e>>2]=0,a=r}else a=0|t[u+8>>2],t[a+12>>2]=r,t[r+8>>2]=a,a=r;while(0);do if(0|f){if(r=0|t[u+28>>2],(0|u)==(0|t[(e=4412+(r<<2)|0)>>2])){if(!(t[e>>2]=a)){t[1028]=n&~(1<<r);break}}else if(!(t[((0|t[(O=f+16|0)>>2])==(0|u)?O:f+20|0)>>2]=a))break;t[a+24>>2]=f,0|(r=0|t[u+16>>2])&&(t[a+16>>2]=r,t[r+24>>2]=a),0|(r=0|t[u+20>>2])&&(t[a+20>>2]=r,t[r+24>>2]=a)}while(0);return y>>>0<16?(t[u+4>>2]=3|(O=y+l|0),t[(O=u+O+4|0)>>2]=1|t[O>>2]):(t[u+4>>2]=3|l,t[x+4>>2]=1|y,t[x+y>>2]=y,0|g&&(m=0|t[1032],a=4148+((r=g>>>3)<<1<<2)|0,e=(r=1<<r)&p?0|t[(r=e=a+8|0)>>2]:(t[1027]=r|p,r=a+8|0,a),t[r>>2]=m,t[e+12>>2]=m,t[m+8>>2]=e,t[m+12>>2]=a),t[1029]=y,t[1032]=x),C=H,u+8|0}p=l}else p=l}else p=l}else if(e>>>0<=4294967231)if(l=-8&(e=e+11|0),m=0|t[1028]){a=0-l|0,u=(e>>>=8)?16777215<l>>>0?31:1&((P=7+(u=14-((y=(520192+(u=e<<(p=(e+1048320|0)>>>16&8))|0)>>>16&4)|p|(P=(245760+(u<<=y)|0)>>>16&2))+(u<<P>>>15)|0)|0)?l>>>P:l)|u<<1:0,e=0|t[4412+(u<<2)>>2];e:do if(e)for(x=l<<(((f=0)|u)==31?0:25-(u>>>1)|0),y=e,e=0;;){if((n=(-8&t[y+4>>2])-l|0)>>>0<a>>>0){if(!n){a=0,e=f=y,P=65;break e}a=n,e=y}if(f=(0|(P=0|t[y+20>>2]))==0|(0|P)==(0|(y=0|t[y+16+(x>>>31<<2)>>2]))?f:P,!y){P=61;break}x<<=1}else e=f=0,P=61;while(0);if((0|P)==61){if((0|f)==0&(0|e)==0){if(!(e=((e=2<<u)|0-e)&m)){p=l;break}f=0|t[4412+(((x=(f=(y=(f=(e&0-e)-1|0)>>>12&16)?f>>>y:f)>>>5&8)|y|(u=(f=x?f>>>x:f)>>>2&4)|(p=(f=u?f>>>u:f)>>>1&2)|(e=(f=p?f>>>p:f)>>>1&1))+(e?f>>>e:f)<<2)>>2],e=0}f?P=65:(y=a,n=e)}if((0|P)==65)for(;;){if(a=(n=(p=(-8&t[f+4>>2])-l|0)>>>0<a>>>0)?p:a,n=n?f:e,!(e=(e=0|t[f+16>>2])||0|t[f+20>>2])){y=a;break}f=e,e=n}if(0|n&&y>>>0<((0|t[1029])-l|0)>>>0&&n>>>0<(g=n+l|0)>>>0){x=0|t[n+24>>2],r=0|t[n+12>>2];do if((0|r)==(0|n)){if(!(r=0|t[(e=n+20|0)>>2])&&!(r=0|t[(e=n+16|0)>>2])){r=0;break}for(;;)if(a=0|t[(f=r+20|0)>>2])r=a,e=f;else{if(!(a=0|t[(f=r+16|0)>>2]))break;r=a,e=f}t[e>>2]=0}else O=0|t[n+8>>2],t[O+12>>2]=r,t[r+8>>2]=O;while(0);do if(x){if(e=0|t[n+28>>2],(0|n)==(0|t[(a=4412+(e<<2)|0)>>2])){if(!(t[a>>2]=r)){m&=~(1<<e),t[1028]=m;break}}else if(!(t[((0|t[(O=x+16|0)>>2])==(0|n)?O:x+20|0)>>2]=r))break;t[r+24>>2]=x,0|(e=0|t[n+16>>2])&&(t[r+16>>2]=e,t[e+24>>2]=r),(e=0|t[n+20>>2])&&(t[r+20>>2]=e,t[e+24>>2]=r)}while(0);e:do if(y>>>0<16)t[n+4>>2]=3|(O=y+l|0),t[(O=n+O+4|0)>>2]=1|t[O>>2];else{if(t[n+4>>2]=3|l,t[g+4>>2]=1|y,r=(t[g+y>>2]=y)>>>3,y>>>0<256){a=4148+(r<<1<<2)|0,e=(e=0|t[1027])&(r=1<<r)?0|t[(r=e=a+8|0)>>2]:(t[1027]=e|r,r=a+8|0,a),t[r>>2]=g,t[e+12>>2]=g,t[g+8>>2]=e,t[g+12>>2]=a;break}if(r=4412+((a=(r=y>>>8)?16777215<y>>>0?31:1&((O=7+(a=14-((S=(520192+(a=r<<(z=(r+1048320|0)>>>16&8))|0)>>>16&4)|z|(O=(245760+(a<<=S)|0)>>>16&2))+(a<<O>>>15)|0)|0)?y>>>O:y)|a<<1:0)<<2)|0,t[g+28>>2]=a,t[4+(e=g+16|0)>>2]=0,t[e>>2]=0,!(m&(e=1<<a))){t[1028]=m|e,t[r>>2]=g,t[g+24>>2]=r,t[g+12>>2]=g,t[g+8>>2]=g;break}r=0|t[r>>2];t:do if((-8&t[r+4>>2]|0)!=(0|y)){for(m=y<<((0|a)==31?0:25-(a>>>1)|0);e=0|t[(a=r+16+(m>>>31<<2)|0)>>2];){if((-8&t[e+4>>2]|0)==(0|y)){r=e;break t}m<<=1,r=e}t[a>>2]=g,t[g+24>>2]=r,t[g+12>>2]=g,t[g+8>>2]=g;break e}while(0);O=0|t[(z=r+8|0)>>2],t[O+12>>2]=g,t[z>>2]=g,t[g+8>>2]=O,t[g+12>>2]=r,t[g+24>>2]=0}while(0);return C=H,n+8|0}p=l}else p=l;else p=-1;while(0);if(p>>>0<=(a=0|t[1029])>>>0)return r=0|t[1032],15<(e=a-p|0)>>>0?(t[1032]=O=r+p|0,t[1029]=e,t[O+4>>2]=1|e,t[r+a>>2]=e,t[r+4>>2]=3|p):(t[1029]=0,t[1032]=0,t[r+4>>2]=3|a,t[(O=r+a+4|0)>>2]=1|t[O>>2]),C=H,r+8|0;if(p>>>0<(x=0|t[1030])>>>0)return t[1030]=S=x-p|0,O=0|t[1033],t[1033]=z=O+p|0,t[z+4>>2]=1|S,t[O+4>>2]=3|p,C=H,O+8|0;if(y=p+48|0,(l=(n=(e=0|t[1145]?0|t[1147]:(t[1147]=4096,t[1146]=4096,t[1148]=-1,t[1149]=-1,t[1150]=0,t[1138]=0,t[1145]=-16&U^1431655768,4096))+(u=p+47|0)|0)&(m=0-e|0))>>>0<=p>>>0||0|(e=0|t[1137])&&(U=(g=0|t[1135])+l|0)>>>0<=g>>>0|e>>>0<U>>>0)return C=H,(O=0)|O;e:do if(4&t[1138])r=0,P=143;else{a=0|t[1033];t:do if(a){for(f=4556;!((e=0|t[f>>2])>>>0<=a>>>0&&(e+(0|t[(b=f+4|0)>>2])|0)>>>0>a>>>0);){if(!(e=0|t[f+8>>2])){P=128;break t}f=e}if((r=n-x&m)>>>0<2147483647)if((0|(e=0|xi(r)))==((0|t[f>>2])+(0|t[b>>2])|0)){if((0|e)!=-1){x=e,n=r,P=145;break e}}else m=e,P=136;else r=0}else P=128;while(0);do if((0|P)==128)if((0|(a=0|xi(0)))!=-1&&(r=a,k=(r=((k=(M=0|t[1146])-1|0)&r|0?(k+r&0-M)-r|0:0)+l|0)+(M=0|t[1135])|0,p>>>0<r>>>0&r>>>0<2147483647)){if(0|(b=0|t[1137])&&k>>>0<=M>>>0|b>>>0<k>>>0){r=0;break}if((0|(e=0|xi(r)))==(0|a)){x=a,n=r,P=145;break e}m=e,P=136}else r=0;while(0);do if((0|P)==136){if(a=0-r|0,!(r>>>0<y>>>0&r>>>0<2147483647&(0|m)!=-1)){if((0|m)==-1){r=0;break}x=m,n=r,P=145;break e}if(2147483647<=(e=u-r+(e=0|t[1147])&0-e)>>>0){x=m,n=r,P=145;break e}if((0|xi(e))==-1){xi(a),r=0;break}x=m,n=e+r|0,P=145;break e}while(0);t[1138]=4|t[1138],P=143}while(0);if((0|P)==143&&l>>>0<2147483647&&!((0|(E=0|xi(l)))==-1|1^(S=(p+40|0)>>>0<(z=(b=0|xi(0))-E|0)>>>0)|E>>>0<b>>>0&(0|E)!=-1&(0|b)!=-1^1)&&(x=E,n=S?z:r,P=145),(0|P)==145){r=(0|t[1135])+n|0,(t[1135]=r)>>>0>(0|t[1136])>>>0&&(t[1136]=r),u=0|t[1033];e:do if(u){for(f=4556;;){if((0|x)==((r=0|t[f>>2])+(e=0|t[(m=f+4|0)>>2])|0)){P=154;break}if(!(a=0|t[f+8>>2]))break;f=a}if((0|P)==154&&!(8&t[f+12>>2]|0)&&u>>>0<x>>>0&r>>>0<=u>>>0){t[m>>2]=e+n,z=u+(S=7&(S=u+8|0)|0?0-S&7:0)|0,S=(O=(0|t[1030])+n|0)-S|0,t[1033]=z,t[1030]=S,t[z+4>>2]=1|S,t[u+O+4>>2]=40,t[1034]=t[1149];break}for(x>>>0<(0|t[1031])>>>0&&(t[1031]=x),a=x+n|0,e=4556;;){if((0|t[e>>2])==(0|a)){P=162;break}if(!(r=0|t[e+8>>2]))break;e=r}if((0|P)==162&&!(8&t[e+12>>2]|0)){t[e>>2]=x,t[(g=e+4|0)>>2]=(0|t[g>>2])+n,l=(g=x+(7&(g=x+8|0)|0?0-g&7:0)|0)+p|0,y=(r=a+(7&(r=a+8|0)|0?0-r&7:0)|0)-g-p|0,t[g+4>>2]=3|p;t:do if((0|u)==(0|r))O=(0|t[1030])+y|0,t[1030]=O,t[1033]=l,t[l+4>>2]=1|O;else{if((0|t[1032])==(0|r)){O=(0|t[1029])+y|0,t[1029]=O,t[1032]=l,t[l+4>>2]=1|O,t[l+O>>2]=O;break}if((3&(e=0|t[r+4>>2])|0)==1){x=-8&e,m=e>>>3;i:do{if(e>>>0<256){if(e=0|t[r+8>>2],(0|(a=0|t[r+12>>2]))==(0|e)){t[1027]=t[1027]&~(1<<m);break}t[e+12>>2]=a,t[a+8>>2]=e;break}n=0|t[r+24>>2],e=0|t[r+12>>2];do if((0|e)==(0|r)){if(!(e=0|t[(a=4+(m=r+16|0)|0)>>2])){if(!(e=0|t[m>>2])){e=0;break}a=m}for(;;)if(m=0|t[(f=e+20|0)>>2])e=m,a=f;else{if(!(m=0|t[(f=e+16|0)>>2]))break;e=m,a=f}t[a>>2]=0}else O=0|t[r+8>>2],t[O+12>>2]=e,t[e+8>>2]=O;while(0);if(!n)break;m=4412+((a=0|t[r+28>>2])<<2)|0;do{if((0|t[m>>2])==(0|r)){if(0|(t[m>>2]=e))break;t[1028]=t[1028]&~(1<<a);break i}if(!(t[((0|t[(O=n+16|0)>>2])==(0|r)?O:n+20|0)>>2]=e))break i}while(0)}while(t[e+24>>2]=n,0|(a=0|t[(m=r+16|0)>>2])&&(t[e+16>>2]=a,t[a+24>>2]=e),(a=0|t[m+4>>2])&&(t[e+20>>2]=a,t[a+24>>2]=e,0));r=r+x|0,f=x+y|0}else f=y;if(t[(r=r+4|0)>>2]=-2&t[r>>2],t[l+4>>2]=1|f,r=(t[l+f>>2]=f)>>>3,f>>>0<256){a=4148+(r<<1<<2)|0,e=(e=0|t[1027])&(r=1<<r)?0|t[(r=e=a+8|0)>>2]:(t[1027]=e|r,r=a+8|0,a),t[r>>2]=l,t[e+12>>2]=l,t[l+8>>2]=e,t[l+12>>2]=a;break}r=f>>>8;do if(r){if(16777215<f>>>0){m=31;break}m=1&((O=7+(m=14-((S=(520192+(m=r<<(z=(r+1048320|0)>>>16&8))|0)>>>16&4)|z|(O=(245760+(m<<=S)|0)>>>16&2))+(m<<O>>>15)|0)|0)?f>>>O:f)|m<<1}else m=0;while(0);if(e=4412+(m<<2)|0,t[l+28>>2]=m,t[4+(r=l+16|0)>>2]=0,!((r=(t[r>>2]=0)|t[1028])&(a=1<<m))){t[1028]=r|a,t[e>>2]=l,t[l+24>>2]=e,t[l+12>>2]=l,t[l+8>>2]=l;break}r=0|t[e>>2];i:do if((-8&t[r+4>>2]|0)!=(0|f)){for(m=f<<((0|m)==31?0:25-(m>>>1)|0);e=0|t[(a=r+16+(m>>>31<<2)|0)>>2];){if((-8&t[e+4>>2]|0)==(0|f)){r=e;break i}m<<=1,r=e}t[a>>2]=l,t[l+24>>2]=r,t[l+12>>2]=l,t[l+8>>2]=l;break t}while(0);O=0|t[(z=r+8|0)>>2],t[O+12>>2]=l,t[z>>2]=l,t[l+8>>2]=O,t[l+12>>2]=r,t[l+24>>2]=0}while(0);return C=H,g+8|0}for(e=4556;!((r=0|t[e>>2])>>>0<=u>>>0&&u>>>0<(O=r+(0|t[e+4>>2])|0)>>>0);)e=0|t[e+8>>2];for(r=(e=(e=(f=O+-47|0)+(7&(e=f+8|0)|0?0-e&7:0)|0)>>>0<(f=u+16|0)>>>0?u:e)+8|0,z=x+(S=7&(S=x+8|0)|0?0-S&7:0)|0,S=(a=n+-40|0)-S|0,t[1033]=z,t[1030]=S,t[z+4>>2]=1|S,t[x+a+4>>2]=40,t[1034]=t[1149],t[(a=e+4|0)>>2]=27,t[r>>2]=t[1139],t[r+4>>2]=t[1140],t[r+8>>2]=t[1141],t[r+12>>2]=t[1142],t[1139]=x,t[1140]=n,t[1142]=0,t[1141]=r,r=e+24|0;t[(r=(z=r)+4|0)>>2]=7,(z+8|0)>>>0<O>>>0;);if((0|e)!=(0|u)){if(n=e-u|0,t[a>>2]=-2&t[a>>2],t[u+4>>2]=1|n,r=(t[e>>2]=n)>>>3,n>>>0<256){a=4148+(r<<1<<2)|0,e=(e=0|t[1027])&(r=1<<r)?0|t[(r=e=a+8|0)>>2]:(t[1027]=e|r,r=a+8|0,a),t[r>>2]=u,t[e+12>>2]=u,t[u+8>>2]=e,t[u+12>>2]=a;break}if(a=4412+((m=(r=n>>>8)?16777215<n>>>0?31:1&((O=7+(m=14-((S=(520192+(m=r<<(z=(r+1048320|0)>>>16&8))|0)>>>16&4)|z|(O=(245760+(m<<=S)|0)>>>16&2))+(m<<O>>>15)|0)|0)?n>>>O:n)|m<<1:0)<<2)|0,t[u+28>>2]=m,t[u+20>>2]=0,!((r=(t[f>>2]=0)|t[1028])&(e=1<<m))){t[1028]=r|e,t[a>>2]=u,t[u+24>>2]=a,t[u+12>>2]=u,t[u+8>>2]=u;break}r=0|t[a>>2];t:do if((-8&t[r+4>>2]|0)!=(0|n)){for(m=n<<((0|m)==31?0:25-(m>>>1)|0);e=0|t[(a=r+16+(m>>>31<<2)|0)>>2];){if((-8&t[e+4>>2]|0)==(0|n)){r=e;break t}m<<=1,r=e}t[a>>2]=u,t[u+24>>2]=r,t[u+12>>2]=u,t[u+8>>2]=u;break e}while(0);O=0|t[(z=r+8|0)>>2],t[O+12>>2]=u,t[z>>2]=u,t[u+8>>2]=O,t[u+12>>2]=r,t[u+24>>2]=0}}else(0|(O=0|t[1031]))==0|x>>>0<O>>>0&&(t[1031]=x),t[1139]=x,t[1140]=n,t[1142]=0,t[1036]=t[1145],t[1035]=-1,t[1040]=4148,t[1039]=4148,t[1042]=4156,t[1041]=4156,t[1044]=4164,t[1043]=4164,t[1046]=4172,t[1045]=4172,t[1048]=4180,t[1047]=4180,t[1050]=4188,t[1049]=4188,t[1052]=4196,t[1051]=4196,t[1054]=4204,t[1053]=4204,t[1056]=4212,t[1055]=4212,t[1058]=4220,t[1057]=4220,t[1060]=4228,t[1059]=4228,t[1062]=4236,t[1061]=4236,t[1064]=4244,t[1063]=4244,t[1066]=4252,t[1065]=4252,t[1068]=4260,t[1067]=4260,t[1070]=4268,t[1069]=4268,t[1072]=4276,t[1071]=4276,t[1074]=4284,t[1073]=4284,t[1076]=4292,t[1075]=4292,t[1078]=4300,t[1077]=4300,t[1080]=4308,t[1079]=4308,t[1082]=4316,t[1081]=4316,t[1084]=4324,t[1083]=4324,t[1086]=4332,t[1085]=4332,t[1088]=4340,t[1087]=4340,t[1090]=4348,t[1089]=4348,t[1092]=4356,t[1091]=4356,t[1094]=4364,t[1093]=4364,t[1096]=4372,t[1095]=4372,t[1098]=4380,t[1097]=4380,t[1100]=4388,t[1099]=4388,t[1102]=4396,t[1101]=4396,z=x+(S=7&(S=x+8|0)|0?0-S&7:0)|0,S=(O=n+-40|0)-S|0,t[1033]=z,t[1030]=S,t[z+4>>2]=1|S,t[x+O+4>>2]=40,t[1034]=t[1149];while(0);if(p>>>0<(r=0|t[1030])>>>0)return t[1030]=S=r-p|0,O=0|t[1033],t[1033]=z=O+p|0,t[z+4>>2]=1|S,t[O+4>>2]=3|p,C=H,O+8|0}return t[1026]=48,C=H,(O=0)|O}function z0(e){var r=0,a=0,m=0,f=0,n=0,x=0,y=0,u=0,l=0;if(e|=0){m=0|t[1031],l=(a=e+-8|0)+(r=-8&(e=0|t[e+-4>>2]))|0;do if(1&e)u=y=a;else{if(f=0|t[a>>2],!(3&e)||(x=f+r|0,(n=a+(0-f)|0)>>>0<m>>>0))return;if((0|t[1032])==(0|n)){if((3&(e=0|t[(r=l+4|0)>>2])|0)==3)return t[1029]=x,t[r>>2]=-2&e,t[n+4>>2]=1|x,void(t[n+x>>2]=x);u=y=n,r=x;break}if(a=f>>>3,f>>>0<256){if(e=0|t[n+8>>2],(0|(r=0|t[n+12>>2]))==(0|e)){t[1027]=t[1027]&~(1<<a),u=y=n,r=x;break}t[e+12>>2]=r,t[r+8>>2]=e,u=y=n,r=x;break}f=0|t[n+24>>2],e=0|t[n+12>>2];do if((0|e)==(0|n)){if(!(e=0|t[(r=4+(a=n+16|0)|0)>>2])){if(!(e=0|t[a>>2])){a=0;break}r=a}for(;;)if(a=0|t[(m=e+20|0)>>2])e=a,r=m;else{if(!(a=0|t[(m=e+16|0)>>2]))break;e=a,r=m}t[r>>2]=0,a=e}else a=0|t[n+8>>2],t[a+12>>2]=e,t[e+8>>2]=a,a=e;while(0);if(f){if(e=0|t[n+28>>2],(0|t[(r=4412+(e<<2)|0)>>2])==(0|n)){if(!(t[r>>2]=a)){t[1028]=t[1028]&~(1<<e),u=y=n,r=x;break}}else if(!(t[((0|t[(u=f+16|0)>>2])==(0|n)?u:f+20|0)>>2]=a)){u=y=n,r=x;break}t[a+24>>2]=f,0|(e=0|t[(r=n+16|0)>>2])&&(t[a+16>>2]=e,t[e+24>>2]=a),(e=0|t[r+4>>2])&&(t[a+20>>2]=e,t[e+24>>2]=a),u=y=n,r=x}else u=y=n,r=x}while(0);if(!(l>>>0<=y>>>0)&&1&(a=0|t[(e=l+4|0)>>2])){if(2&a)t[e>>2]=-2&a,t[u+4>>2]=1|r,f=t[y+r>>2]=r;else{if((0|t[1033])==(0|l))return l=(0|t[1030])+r|0,t[1030]=l,t[1033]=u,t[u+4>>2]=1|l,void((0|u)==(0|t[1032])&&(t[1032]=0,t[1029]=0));if((0|t[1032])==(0|l))return l=(0|t[1029])+r|0,t[1029]=l,t[1032]=y,t[u+4>>2]=1|l,void(t[y+l>>2]=l);f=(-8&a)+r|0,m=a>>>3;do{if(a>>>0<256){if(r=0|t[l+8>>2],(0|(e=0|t[l+12>>2]))==(0|r)){t[1027]=t[1027]&~(1<<m);break}t[r+12>>2]=e,t[e+8>>2]=r;break}n=0|t[l+24>>2],e=0|t[l+12>>2];do if((0|e)==(0|l)){if(!(e=0|t[(r=4+(a=l+16|0)|0)>>2])){if(!(e=0|t[a>>2])){a=0;break}r=a}for(;;)if(a=0|t[(m=e+20|0)>>2])e=a,r=m;else{if(!(a=0|t[(m=e+16|0)>>2]))break;e=a,r=m}t[r>>2]=0,a=e}else a=0|t[l+8>>2],t[a+12>>2]=e,t[e+8>>2]=a,a=e;while(0);if(0|n){if(e=0|t[l+28>>2],(0|t[(r=4412+(e<<2)|0)>>2])==(0|l)){if(!(t[r>>2]=a)){t[1028]=t[1028]&~(1<<e);break}}else if(!(t[((0|t[(x=n+16|0)>>2])==(0|l)?x:n+20|0)>>2]=a))break;t[a+24>>2]=n,0|(e=0|t[(r=l+16|0)>>2])&&(t[a+16>>2]=e,t[e+24>>2]=a),0|(e=0|t[r+4>>2])&&(t[a+20>>2]=e,t[e+24>>2]=a)}}while(0);if(t[u+4>>2]=1|f,t[y+f>>2]=f,(0|u)==(0|t[1032]))return void(t[1029]=f)}if(e=f>>>3,f>>>0<256)return a=4148+(e<<1<<2)|0,r=(r=0|t[1027])&(e=1<<e)?0|t[(e=r=a+8|0)>>2]:(t[1027]=r|e,e=a+8|0,a),t[e>>2]=u,t[r+12>>2]=u,t[u+8>>2]=r,void(t[u+12>>2]=a);r=4412+((m=(e=f>>>8)?16777215<f>>>0?31:1&((l=7+(m=14-((x=(520192+(m=e<<(y=(e+1048320|0)>>>16&8))|0)>>>16&4)|y|(l=(245760+(m<<=x)|0)>>>16&2))+(m<<l>>>15)|0)|0)?f>>>l:f)|m<<1:0)<<2)|0,t[u+28>>2]=m,t[u+20>>2]=0,e=(t[u+16>>2]=0)|t[1028],a=1<<m;e:do if(e&a){e=0|t[r>>2];t:do if((-8&t[e+4>>2]|0)!=(0|f)){for(m=f<<((0|m)==31?0:25-(m>>>1)|0);r=0|t[(a=e+16+(m>>>31<<2)|0)>>2];){if((-8&t[r+4>>2]|0)==(0|f)){e=r;break t}m<<=1,e=r}t[a>>2]=u,t[u+24>>2]=e,t[u+12>>2]=u,t[u+8>>2]=u;break e}while(0);l=0|t[(y=e+8|0)>>2],t[l+12>>2]=u,t[y>>2]=u,t[u+8>>2]=l,t[u+12>>2]=e,t[u+24>>2]=0}else t[1028]=e|a,t[r>>2]=u,t[u+24>>2]=r,t[u+12>>2]=u,t[u+8>>2]=u;while(0);if(l=(0|t[1035])-1|0,!(0|(t[1035]=l))){for(e=4564;e=0|t[e>>2];)e=e+8|0;t[1035]=-1}}}}function on(e,r){var u=0,a=0,m=0,f=0,n=0,x=0,y=0,y=(e|=0)+(r|=0)|0,u=0|t[e+4>>2];do if(1&u)x=e,e=r;else{if(a=0|t[e>>2],!(3&u))return;if(n=a+r|0,(0|t[1032])==(0|(f=e+(0-a)|0))){if((3&(u=0|t[(e=y+4|0)>>2])|0)==3)return t[1029]=n,t[e>>2]=-2&u,t[f+4>>2]=1|n,t[y>>2]=n;x=f,e=n;break}if(r=a>>>3,a>>>0<256){if(u=0|t[f+8>>2],(0|(e=0|t[f+12>>2]))==(0|u)){t[1027]=t[1027]&~(1<<r),x=f,e=n;break}t[u+12>>2]=e,t[e+8>>2]=u,x=f,e=n;break}m=0|t[f+24>>2],u=0|t[f+12>>2];do if((0|u)==(0|f)){if(!(u=0|t[(e=4+(r=f+16|0)|0)>>2])){if(!(u=0|t[r>>2])){r=0;break}e=r}for(;;)if(r=0|t[(a=u+20|0)>>2])u=r,e=a;else{if(!(r=0|t[(a=u+16|0)>>2]))break;u=r,e=a}t[e>>2]=0,r=u}else r=0|t[f+8>>2],t[r+12>>2]=u,t[u+8>>2]=r,r=u;while(0);if(m){if(u=0|t[f+28>>2],(0|t[(e=4412+(u<<2)|0)>>2])==(0|f)){if(!(t[e>>2]=r)){t[1028]=t[1028]&~(1<<u),x=f,e=n;break}}else if(!(t[((0|t[(x=m+16|0)>>2])==(0|f)?x:m+20|0)>>2]=r)){x=f,e=n;break}t[r+24>>2]=m,0|(u=0|t[(e=f+16|0)>>2])&&(t[r+16>>2]=u,t[u+24>>2]=r),(u=0|t[e+4>>2])&&(t[r+20>>2]=u,t[u+24>>2]=r),x=f,e=n}else x=f,e=n}while(0);if(2&(r=0|t[(u=y+4|0)>>2]))t[u>>2]=-2&r,t[x+4>>2]=1|e,t[x+e>>2]=e;else{if((0|t[1033])==(0|y))return y=(0|t[1030])+e|0,t[1030]=y,t[1033]=x,t[x+4>>2]=1|y,(0|x)==(0|t[1032])&&(t[1032]=0,t[1029]=0);if((0|t[1032])==(0|y))return y=(0|t[1029])+e|0,t[1029]=y,t[1032]=x,t[x+4>>2]=1|y,t[x+y>>2]=y;f=(-8&r)+e|0,a=r>>>3;do{if(r>>>0<256){if(e=0|t[y+8>>2],(0|(u=0|t[y+12>>2]))==(0|e)){t[1027]=t[1027]&~(1<<a);break}t[e+12>>2]=u,t[u+8>>2]=e;break}m=0|t[y+24>>2],u=0|t[y+12>>2];do if((0|u)==(0|y)){if(!(u=0|t[(e=4+(r=y+16|0)|0)>>2])){if(!(u=0|t[r>>2])){r=0;break}e=r}for(;;)if(r=0|t[(a=u+20|0)>>2])u=r,e=a;else{if(!(r=0|t[(a=u+16|0)>>2]))break;u=r,e=a}t[e>>2]=0,r=u}else r=0|t[y+8>>2],t[r+12>>2]=u,t[u+8>>2]=r,r=u;while(0);if(0|m){if(u=0|t[y+28>>2],(0|t[(e=4412+(u<<2)|0)>>2])==(0|y)){if(!(t[e>>2]=r)){t[1028]=t[1028]&~(1<<u);break}}else if(!(t[((0|t[(n=m+16|0)>>2])==(0|y)?n:m+20|0)>>2]=r))break;t[r+24>>2]=m,0|(u=0|t[(e=y+16|0)>>2])&&(t[r+16>>2]=u,t[u+24>>2]=r),0|(u=0|t[e+4>>2])&&(t[r+20>>2]=u,t[u+24>>2]=r)}}while(0);if(t[x+4>>2]=1|f,t[x+f>>2]=f,(0|x)==(0|t[1032]))return t[1029]=f;e=f}if(u=e>>>3,e>>>0<256)return r=4148+(u<<1<<2)|0,e=(e=0|t[1027])&(u=1<<u)?0|t[(u=e=r+8|0)>>2]:(t[1027]=e|u,u=r+8|0,r),t[u>>2]=x,t[e+12>>2]=x,t[x+8>>2]=e,t[x+12>>2]=r;if(r=4412+((m=(u=e>>>8)?16777215<e>>>0?31:1&((y=7+(m=14-((f=(520192+(m=u<<(n=(u+1048320|0)>>>16&8))|0)>>>16&4)|n|(y=(245760+(m<<=f)|0)>>>16&2))+(m<<y>>>15)|0)|0)?e>>>y:e)|m<<1:0)<<2)|0,t[x+28>>2]=m,t[x+20>>2]=0,!((u=(t[x+16>>2]=0)|t[1028])&(a=1<<m)))return t[1028]=u|a,t[r>>2]=x,t[x+24>>2]=r,t[x+12>>2]=x,t[x+8>>2]=x;u=0|t[r>>2];e:do if((-8&t[u+4>>2]|0)!=(0|e)){for(m=e<<((0|m)==31?0:25-(m>>>1)|0);r=0|t[(a=u+16+(m>>>31<<2)|0)>>2];){if((-8&t[r+4>>2]|0)==(0|e)){u=r;break e}m<<=1,u=r}return t[a>>2]=x,t[x+24>>2]=u,t[x+12>>2]=x,t[x+8>>2]=x}while(0);y=0|t[(n=u+8|0)>>2],t[y+12>>2]=x,t[n>>2]=x,t[x+8>>2]=y,t[x+12>>2]=u,t[x+24>>2]=0}function Pr(e,r,a){var m;return e|=0,(3&(r|=0)|0)!=0|(0|(m=r>>>2))==0||1073741823+m&m|0?28:(-64-r|0)>>>0<(a|=0)>>>0||!(r=0|function(f,n){n|=0;var x,y=0,u=0,l=0,g=0,p=0;if((y=16<(f|=0)>>>0?f:16)+-1&y)for(f=16;f>>>0<y>>>0;)f<<=1;else f=y;if((-64-f|0)>>>0<=n>>>0)return t[1026]=48,(g=0)|g;if(!(y=0|Mr(12+(x=n>>>0<11?16:n+11&-8)+f|0)))return(g=0)|g;l=y+-8|0;do if(f+-1&y){if(u=15<((u=(y+f+-1&0-f)-8|0)-(n=l)|0)>>>0?u:u+f|0,y=(-8&(p=0|t[(f=y+-4|0)>>2]))-(n=u-n|0)|0,3&p){t[(p=u+4|0)>>2]=y|1&t[p>>2]|2,t[(y=u+y+4|0)>>2]=1|t[y>>2],t[f>>2]=n|1&t[f>>2]|2,t[p>>2]=1|t[p>>2],on(l,n),f=n=u;break}t[u>>2]=(0|t[l>>2])+n,t[u+4>>2]=y,f=n=u;break}while(f=n=l,0);return 3&(f=0|t[(y=f+4|0)>>2])|0&&(16+x|0)>>>0<(g=-8&f)>>>0&&(p=g-x|0,l=n+x|0,t[y>>2]=x|1&f|2,t[l+4>>2]=3|p,t[(g=n+g+4|0)>>2]=1|t[g>>2],on(l,p)),n+8|0}(16<r>>>0?r:16,a))?48:(t[e>>2]=r,(e=0)|e)}function xi(e){var r,a=0;return(e=(r=0|t[(a=4624)>>2])+(0|e)|0)>>>0>(0|Y2())>>>0&&!(0|H2(0|e))?(t[1026]=48,-1):(t[a>>2]=e,0|r)}function vr(e,r,a,m){r|=0,m|=0;var f,n;return a=0|function(x,y){var u,l,g,p;return x=((g=0|ie(l=65535&(y|=0),u=65535&(x|=0)))>>>16)+(0|ie(l,p=x>>>16))|0,y=0|ie(l=y>>>16,u),0|(le((x>>>16)+(0|ie(l,p))+(((65535&x)+y|0)>>>16)|0),x+y<<16|65535&g|0)}(f=e|=0,n=a|=0),e=0|ge(),0|(le((0|ie(r,n))+(0|ie(m,f))+e|0&e|0),0|a)}function h0(e,r,a,m){return 0|(le((r|=0)+(m|=0)+((a=(e|=0)+(0|a)>>>0)>>>0<e>>>0|0)>>>0|0),0|a)}function G0(e,r,a,m){return 0|(le(0|(m=(r|=0)-(m|=0)-((e|=0)>>>0<(a|=0)>>>0|0)>>>0)),e-a>>>0|0)}function ln(e){return 0|((e|=0)?31-(0|Ai(e^e-1))|0:32)}function gl(e,r,a,m,f){f|=0;var n=0,k=0,b=0,x=0,y=0,M=0,u=0,l=0,g=0,p=0,M=e|=0,k=a|=0,b=l=m|=0;if(!(y=x=r|=0))return n=(0|f)!=0,b?(n&&(t[f>>2]=0|e,t[f+4>>2]=0&r),(f=l=0)|(le(0|l),f)):(n&&(t[f>>2]=(M>>>0)%(k>>>0),t[f+4>>2]=0),f=(M>>>(l=0))/(k>>>0)>>>0,0|(le(0|l),f));n=(0|b)==0;do{if(k){if(!n){if((n=(0|Ai(0|b))-(0|Ai(0|y))|0)>>>0<=31){e=M>>>((k=u=n+1|0)>>>0)&(r=n-31>>31)|y<<(b=31-n|0),r&=y>>>(u>>>0),n=0,b=M<<b;break}return f&&(t[f>>2]=0|e,t[f+4>>2]=x|0&r),(f=l=0)|(le(0|l),f)}if((n=k-1|0)&k|0){e=(u=32-(b=33+(0|Ai(0|k))-(0|Ai(0|y))|0)|0)-1>>31&y>>>((g=b-32|0)>>>0)|(y<<u|M>>>((k=b)>>>0))&(r=g>>31),r&=y>>>(b>>>0),n=M<<(p=64-b|0)&(x=u>>31),b=(y<<p|M>>>(g>>>0))&x|M<<u&b-33>>31;break}return 0|f&&(t[f>>2]=n&M,t[f+4>>2]=0),(0|k)==1?(p=0|e,0|(le(0|(g=x|0&r)),p)):(g=y>>>((p=0|ln(0|k))>>>0)|0,p=y<<32-p|M>>>(p>>>0)|0,0|(le(0|g),p))}if(n)return 0|f&&(t[f>>2]=(y>>>0)%(k>>>0),t[f+4>>2]=0),p=(y>>>(g=0))/(k>>>0)>>>0,0|(le(0|g),p);if(!M)return 0|f&&(t[f>>2]=0,t[f+4>>2]=(y>>>0)%(b>>>0)),p=(y>>>(g=0))/(b>>>0)>>>0,0|(le(0|g),p);if(!((n=b-1|0)&b))return 0|f&&(t[f>>2]=0|e,t[f+4>>2]=n&y|0&r),p=y>>>(((g=0)|ln(0|b))>>>0),0|(le(0|g),p);if((n=(0|Ai(0|b))-(0|Ai(0|y))|0)>>>0<=30){e=y<<(b=31-n|0)|M>>>((k=r=n+1|0)>>>0),r=y>>>(r>>>0),n=0,b=M<<b;break}return f&&(t[f>>2]=0|e,t[f+4>>2]=x|0&r),(p=g=0)|(le(0|g),p)}while(0);if(k){for(y=0|h0(0|(u=0|a),0|(M=l|0&m),-1,-1),a=0|ge(),x=b,b=0;x=n>>>31|(m=x)<<1,n=b|n<<1,G0(0|y,0|a,0|(m=e<<1|m>>>31|0),0|(l=e>>>31|r<<1|0)),b=1&(g=(p=0|ge())>>31|((0|p)<0?-1:0)<<1),e=0|G0(0|m,0|l,g&u|0,(((0|p)<0?-1:0)>>31|((0|p)<0?-1:0)<<1)&M|0),r=0|ge(),(0|(k=k-1|0))!=0;);y=x,x=0}else y=b,b=x=0;return(k=0)|f&&(t[f>>2]=e,t[f+4>>2]=r),p=-2&(n<<1|0)|b,0|(le(0|(g=(0|n)>>>31|(y|k)<<1|0&(k<<1|n>>>31)|x)),p)}function Br(e,r,a,m){return 0|gl(e|=0,r|=0,a|=0,m|=0,0)}function X0(e,r,a){return e|=0,r|=0,(0|(a|=0))<32?(le(r>>>a|0),e>>>a|(r&(1<<a)-1)<<32-a):(le(0),r>>>a-32|0)}function un(e,r,a){return e|=0,r|=0,(0|(a|=0))<32?(le(r<<a|(e&(1<<a)-1<<32-a)>>>32-a|0),e<<a):(le(e<<a-32|0),0)}function Ve(e,r,a){var m,f,n;if(e|=0,r|=0,8192<=(0|(a|=0)))return j2(0|e,0|r,0|a),0|e;if(n=0|e,f=e+a|0,(3&e)==(3&r)){for(;3&e;){if(!a)return 0|n;J[e>>0]=0|J[r>>0],e=e+1|0,r=r+1|0,a=a-1|0}for(m=(a=-4&f|0)-64|0;(0|e)<=(0|m);)t[e>>2]=t[r>>2],t[e+4>>2]=t[r+4>>2],t[e+8>>2]=t[r+8>>2],t[e+12>>2]=t[r+12>>2],t[e+16>>2]=t[r+16>>2],t[e+20>>2]=t[r+20>>2],t[e+24>>2]=t[r+24>>2],t[e+28>>2]=t[r+28>>2],t[e+32>>2]=t[r+32>>2],t[e+36>>2]=t[r+36>>2],t[e+40>>2]=t[r+40>>2],t[e+44>>2]=t[r+44>>2],t[e+48>>2]=t[r+48>>2],t[e+52>>2]=t[r+52>>2],t[e+56>>2]=t[r+56>>2],t[e+60>>2]=t[r+60>>2],e=e+64|0,r=r+64|0;for(;(0|e)<(0|a);)t[e>>2]=t[r>>2],e=e+4|0,r=r+4|0}else for(a=f-4|0;(0|e)<(0|a);)J[e>>0]=0|J[r>>0],J[e+1>>0]=0|J[r+1>>0],J[e+2>>0]=0|J[r+2>>0],J[e+3>>0]=0|J[r+3>>0],e=e+4|0,r=r+4|0;for(;(0|e)<(0|f);)J[e>>0]=0|J[r>>0],e=e+1|0,r=r+1|0;return 0|n}function hn(e,r,a){var m;if((0|(r|=0))<(0|(e|=0))&(0|e)<(r+(a|=0)|0)){for(r=r+a|0,e=(m=e)+a|0;0<(0|a);)a=a-1|0,J[(e=e-1|0)>>0]=0|J[(r=r-1|0)>>0];e=m}else Ve(e,r,a);return 0|e}function Pe(e,r,a){var m,f,n,x=(e|=0)+(a|=0)|0;if(r=255&(0|r),67<=(0|a)){for(;3&e;)J[e>>0]=r,e=e+1|0;for(n=r|r<<8|r<<16|r<<24,f=(m=-4&x|0)-64|0;(0|e)<=(0|f);)t[e>>2]=n,t[e+4>>2]=n,t[e+8>>2]=n,t[e+12>>2]=n,t[e+16>>2]=n,t[e+20>>2]=n,t[e+24>>2]=n,t[e+28>>2]=n,t[e+32>>2]=n,t[e+36>>2]=n,t[e+40>>2]=n,t[e+44>>2]=n,t[e+48>>2]=n,t[e+52>>2]=n,t[e+56>>2]=n,t[e+60>>2]=n,e=e+64|0;for(;(0|e)<(0|m);)t[e>>2]=n,e=e+4|0}for(;(0|e)<(0|x);)J[e>>0]=r,e=e+1|0;return x-a|0}function cn(e){return Oi(0),0}function fn(e,r,a,m){return Oi(2),0}function dl(e){var r,a,m,f,n,x,y,u,l,g,p,M,k,b,P,E,S,z,O=0,H=0,U=0|t[500+(e|=0)>>2];if(!((0|U)<=0)){y=0|t[e+504>>2],u=0|t[e+444>>2],a=0|t[e+536>>2],H=0;do if(m=0|t[y+(24*H|0)+12>>2],f=0|t[u+(t[y+(24*H|0)+4>>2]<<2)>>2],n=0|t[u+(t[y+(24*H|0)+8>>2]<<2)>>2],x=0|t[y+(24*H|0)+16>>2],e=0|t[y+(24*H|0)+20>>2],r=+B[a+(H<<2)>>2],0<(0|m))for(O=0;S=+B[x+(O<<2)>>2],M=+B[x+((l=1|O)<<2)>>2],E=(0|ce[e+(O<<1)>>1])<<1&65534,P=+B[(z=f+(E<<2)|0)>>2],p=+B[(E=f+((1|E)<<2)|0)>>2],l=(0|ce[e+(l<<1)>>1])<<1&65534,b=+B[(k=n+(l<<2)|0)>>2],g=+B[(l=n+((1|l)<<2)|0)>>2],B[z>>2]=P+S*(b-P)*r,B[E>>2]=p+S*(g-p)*r,B[k>>2]=b+M*(P-b)*r,B[l>>2]=g+M*(p-g)*r,(0|(O=O+2|0))<(0|m););while((0|(H=H+1|0))!=(0|U))}}function ml(e){var r=0|t[(e|=0)>>2];(0|Rt[4+r>>0])<4||gn(e,0|t[e+596>>2],0|t[e+600>>2],0|t[984+r>>2],0|t[e+152>>2],0|t[796+r>>2])}function gn(e,r,a,m,f,n){e|=0,m|=0,f|=0,n|=0;var x,y,u,l,g,p,M,k,b,P=0,E=0,S=0,z=0,O=0,H=C;if(C=C+16|0,k=H+8|0,M=H,p=(a|=0)+(12*(r|=0)|0)|0,(0|r)<=0)C=H;else{do{r=0|t[a>>2],y=0|t[f+(r<<2)>>2],l=(r=0|t[n+(r<<2)>>2])<<1,O=0|t[a+4>>2],P=0|t[a+8>>2],u=0|t[1028+(0|t[e>>2])>>2],g=P+(48*O|0)|0;e:do if(0<(0|O)){if((0|r)<=0){for(;;)if(3<=(r=0|t[P+8>>2])>>>0&&(t[k>>2]=r,pt(0,784,k)),g>>>0<=(P=P+48|0)>>>0)break e}do{E=m+(t[P+4>>2]<<2)|0,r=0|t[P+8>>2];t:do if(0|r)switch(O=u+(t[E+(t[P+12>>2]<<2)>>2]<<2)|0,0|r){case 1:for(E=P+20|0,r=P+44|0,S=0;B[(z=y+(S<<2)|0)>>2]=+B[z>>2]+ +B[r>>2]*(+B[O+(S<<2)>>2]*+B[E>>2]),(0|(S=S+1|0))!=(0|l););break;case 2:for(E=u+(t[E+(t[P+16>>2]<<2)>>2]<<2)|0,S=P+20|0,x=P+24|0,r=P+44|0,z=0;B[(b=y+(z<<2)|0)>>2]=+B[b>>2]+ +B[r>>2]*(+B[O+(z<<2)>>2]*+B[S>>2]+ +B[E+(z<<2)>>2]*+B[x>>2]),(0|(z=z+1|0))!=(0|l););break;default:t[M>>2]=r,pt(0,784,M);break t}while(0)}while((P=P+48|0)>>>0<g>>>0)}while(0)}while((a=a+12|0)>>>0<p>>>0);C=H}}function _l(e){var r=0|t[(e|=0)>>2];(0|Rt[4+r>>0])<4||gn(e,0|t[e+604>>2],0|t[e+608>>2],0|t[1024+r>>2],0|t[e+444>>2],0|t[892+r>>2])}function pt(e,r,a){e|=0,r|=0,a|=0;var m,f,n=C;C=C+272|0,e=n+16|0,f=n,(m=0|t[1008])&&(t[f>>2]=a,Ja(e,r,f),mn[1&m](e)),C=n}function dn(e,r,a){a|=0;var m,f=0,n=0,x=0,y=0,u=0,l=0,g=0,p=0,k=0,M=0,k=0|J[4+(e|=0)>>0];if(t[(r|=0)>>2]=628,M=0|t[(p=e+704|0)>>2],0<(0|(u=0|t[M>>2]))){for(f=0|t[e+1048>>2],n=0|t[e+720>>2],y=x=0;y=(1<<t[f+(t[n+(x<<2)>>2]<<2)>>2])+y|0,(0|(x=x+1|0))!=(0|u););f=y<<2}else f=0;if(t[r+4>>2]=12*u,t[r+8>>2]=t[M>>2]<<2,t[r+12>>2]=t[M>>2]<<2,t[r+16>>2]=t[M>>2]<<2,t[r+20>>2]=t[M>>2]<<2,t[r+24>>2]=t[M>>2]<<2,t[r+28>>2]=f,t[r+32>>2]=t[M>>2]<<2,t[r+36>>2]=f,t[r+40>>2]=f,t[r+44>>2]=t[(m=M+4|0)>>2]<<5,t[r+48>>2]=t[m>>2]<<2,t[r+52>>2]=t[m>>2]<<2,t[r+56>>2]=t[m>>2]<<2,t[r+60>>2]=t[m>>2]<<4,t[r+64>>2]=t[m>>2]<<4,0<(0|(g=0|t[(m=M+8|0)>>2]))){for(n=0|t[e+796>>2],x=0|t[e+1048>>2],y=0|t[e+780>>2],f=l=u=0;f=(15+(t[n+(u<<2)>>2]<<3)&-16)+f|0,l=(1<<t[x+(t[y+(u<<2)>>2]<<2)>>2])+l|0,(0|(u=u+1|0))!=(0|g););n=l<<2}else f=n=0;if(t[r+68>>2]=24*g,t[r+72>>2]=t[m>>2]<<2,t[r+76>>2]=t[m>>2]<<2,t[r+80>>2]=t[m>>2]<<2,t[r+84>>2]=f,t[r+88>>2]=t[m>>2]<<4,t[r+92>>2]=t[m>>2]<<4,t[r+96>>2]=t[m>>2]<<2,t[r+100>>2]=n,t[r+104>>2]=t[m>>2]<<2,t[r+108>>2]=n,t[r+112>>2]=n,t[r+116>>2]=n,t[r+120>>2]=n,t[r+124>>2]=n,t[r+128>>2]=n,t[r+132>>2]=n,t[r+136>>2]=n,t[r+140>>2]=n,t[r+144>>2]=t[m>>2]<<2,t[r+148>>2]=t[m>>2]<<2,t[r+152>>2]=t[m>>2]<<2,t[r+156>>2]=t[m>>2]<<2,t[r+160>>2]=t[m>>2]<<2,t[r+164>>2]=t[m>>2]<<2,0<(0|(u=0|t[(l=M+12|0)>>2]))){for(f=0|t[e+1048>>2],n=0|t[e+812>>2],y=x=0;y=(1<<t[f+(t[n+(x<<2)>>2]<<2)>>2])+y|0,(0|(x=x+1|0))!=(0|u););f=y<<2}else f=0;if(t[r+168>>2]=12*u,t[r+172>>2]=t[l>>2]<<2,t[r+176>>2]=t[l>>2]<<2,t[r+180>>2]=t[l>>2]<<2,t[r+184>>2]=t[l>>2]<<2,t[r+188>>2]=t[l>>2]<<2,t[r+192>>2]=t[l>>2]<<2,t[r+196>>2]=t[l>>2]<<2,t[r+200>>2]=t[l>>2]<<2,t[r+204>>2]=t[l>>2]<<4,t[r+208>>2]=t[l>>2]<<4,t[r+212>>2]=t[l>>2]<<2,t[r+216>>2]=f,t[r+220>>2]=t[l>>2]<<2,t[r+224>>2]=f,t[r+228>>2]=f,t[r+232>>2]=f,t[r+236>>2]=f,t[r+240>>2]=f,t[r+244>>2]=f,t[r+248>>2]=f,t[r+252>>2]=f,t[r+256>>2]=f,t[r+260>>2]=f,t[r+264>>2]=f,t[r+268>>2]=f,t[r+272>>2]=t[l>>2]<<2,t[r+276>>2]=t[l>>2]<<2,t[r+280>>2]=t[l>>2]<<2,t[r+284>>2]=t[l>>2]<<2,t[r+288>>2]=t[l>>2]<<2,t[r+292>>2]=t[l>>2]<<2,0<(0|(g=0|t[(m=M+16|0)>>2]))){for(n=0|t[e+892>>2],x=0|t[e+1048>>2],y=0|t[e+852>>2],f=l=u=0;f=(15+(t[n+(u<<2)>>2]<<3)&-16)+f|0,l=(1<<t[x+(t[y+(u<<2)>>2]<<2)>>2])+l|0,(0|(u=u+1|0))!=(0|g););n=l<<2}else f=n=0;if(t[r+296>>2]=20*g,t[r+300>>2]=t[m>>2]<<2,t[r+304>>2]=t[m>>2],t[r+308>>2]=t[m>>2]<<2,t[r+312>>2]=t[m>>2]<<2,t[r+316>>2]=t[m>>2]<<2,t[r+320>>2]=f,t[r+324>>2]=t[m>>2]<<2,t[r+328>>2]=t[m>>2]<<4,t[r+332>>2]=t[m>>2]<<4,t[r+336>>2]=t[m>>2]<<2,t[r+340>>2]=t[m>>2]<<2,t[r+344>>2]=t[m>>2]<<2,t[r+348>>2]=t[m>>2]<<4,t[r+352>>2]=t[m>>2]<<4,t[r+356>>2]=t[m>>2]<<2,t[r+360>>2]=n,t[r+364>>2]=t[m>>2]<<2,t[r+368>>2]=n,t[r+372>>2]=n,t[r+376>>2]=n,t[r+380>>2]=n,t[r+384>>2]=n,t[r+388>>2]=n,t[r+392>>2]=n,t[r+396>>2]=n,t[r+400>>2]=n,t[r+404>>2]=n,t[r+408>>2]=t[m>>2]<<2,t[r+412>>2]=t[m>>2]<<2,t[r+416>>2]=t[m>>2]<<2,t[r+420>>2]=t[m>>2]<<2,t[r+424>>2]=t[m>>2]<<2,t[r+428>>2]=t[m>>2]<<2,p=0|t[p>>2],t[r+432>>2]=52*(0|t[(n=p+20|0)>>2]),f=(m=3<(255&k))?0:t[n>>2]<<2,t[r+436>>2]=f,t[r+440>>2]=t[n>>2]<<2,t[r+444>>2]=28*(0|t[p+52>>2]),0<(0|(u=0|t[M+48>>2]))){for(f=0|t[e+1048>>2],y=x=n=0;x=(k=0|t[f+(n<<2)>>2])+x|0,y=(1<<k)+y|0,(0|(n=n+1|0))!=(0|u););n=x<<2,f=y<<2}else f=n=0;if(t[r+448>>2]=36*u,t[r+452>>2]=n,t[r+456>>2]=f,t[r+460>>2]=f,t[r+488>>2]=28*(0|t[(n=M+72|0)>>2]),0<(0|(n=0|t[n>>2]))){for(x=0|t[e+1152>>2],y=0|t[e+1160>>2],f=0|t[e+1164>>2],g=l=u=0;l=(0|l)<(0|(k=0|t[x+(u<<2)>>2]))?k:l,g=(0|(k=(0|t[y+(u<<2)>>2])-(0|t[f+(u<<2)>>2])|0))<(0|g)?g:k+1|0,(0|(u=u+1|0))!=(0|n););n=l<<2,f=g<<2}else f=n=0;if(t[r+492>>2]=t[M+76>>2]<<4,t[r+496>>2]=f,t[r+500>>2]=n,t[r+504>>2]=f,0<(0|(u=0|t[(l=M+80|0)>>2]))){for(f=0|t[e+1048>>2],n=0|t[e+1188>>2],y=x=0;y=(1<<t[f+(t[n+(x<<2)>>2]<<2)>>2])+y|0,(0|(x=x+1|0))!=(0|u););f=y<<2}else f=0;if(t[r+508>>2]=24*u,t[r+512>>2]=t[l>>2]<<2,t[r+516>>2]=t[l>>2]<<2,t[r+520>>2]=f,t[r+524>>2]=t[l>>2]<<2,t[r+528>>2]=f,t[r+532>>2]=f,m){if(t[r+464>>2]=20*(0|t[p+120>>2]),t[r+468>>2]=28*(0|t[p+100>>2]),0<(0|(y=0|t[M+104>>2]))){for(f=0|t[e+1080>>2],x=n=0;x=(0|t[f+(n<<2)>>2])+x|0,(0|(n=n+1|0))!=(0|y););f=x<<2}else f=0;t[r+472>>2]=48*y,t[r+476>>2]=f,t[r+480>>2]=12*(0|t[p+108>>2]),t[r+484>>2]=12*(0|t[p+112>>2]),f=n=t[r+540>>2]=0}else{if(0<(0|(m=0|t[(p=M+20|0)>>2]))){l=0|t[e+948>>2],g=0|t[e+952>>2],y=0|t[e+1036>>2],f=u=0;do if(e=0|t[g+(u<<2)>>2],x=(n=y+(t[l+(u<<2)>>2]<<2)|0)+(e<<2)|0,0<(0|e))for(;f=(0|t[n>>2])+f|0,(n=n+4|0)>>>0<x>>>0;);while((0|(u=u+1|0))!=(0|m))}else f=0;t[r+540>>2]=m<<2,n=f<<2,f=t[p>>2]<<2}for(t[r+536>>2]=f,t[r+544>>2]=n,n=f=0;n=(e=15+(0|t[(M=r+(f<<2)|0)>>2])&-16)+(t[M>>2]=n)|0,(0|(f=f+1|0))!=137;);t[a>>2]=n}function pl(e,r,a){e|=0,r|=0,a|=0;var m,f,n,x,y,u,l=0,g=0,p=0,M=0,k=0,b=0,P=0,E=0,S=0,z=0,O=0,H=0,U=0,it=0,ft=0,rt=0,st=0,ht=0,dt=0,Y=0,yt=0,at=0,nt=0,vt=0,kt=0,Mt=0,Yt=0,Gt=0,Ot=0,Tt=0,jt=0,Kt=0,Ut=0,Ht=0,wt=0,Pt=0,X=0,ae=C;if(C=C+560|0,nt=ae+552|0,l=(S=ae)+556|0,Pe(0|S,0,548),dn(e,S,l),a>>>0<(l=0|t[l>>2])>>>0)return C=ae,(X=0)|X;if(Pe(0|r,0,0|l),X=r+(0|t[S>>2])|0,t[(f=X+8|0)>>2]=r+(0|t[S+4>>2]),t[X+40>>2]=r+(0|t[S+8>>2]),t[X+44>>2]=r+(0|t[S+12>>2]),t[X+48>>2]=r+(0|t[S+16>>2]),t[(yt=X+52|0)>>2]=r+(0|t[S+20>>2]),t[(at=X+16|0)>>2]=r+(0|t[S+24>>2]),t[X+24>>2]=r+(0|t[S+28>>2]),t[X+28>>2]=r+(0|t[S+32>>2]),t[X+32>>2]=r+(0|t[S+36>>2]),t[X+36>>2]=r+(0|t[S+40>>2]),p=0|t[(Pt=e+704|0)>>2],t[(n=X+308|0)>>2]=r+(0|t[S+44>>2]),t[X+312>>2]=r+(0|t[S+48>>2]),t[X+316>>2]=r+(0|t[S+52>>2]),t[X+320>>2]=r+(0|t[S+56>>2]),t[X+324>>2]=r+(0|t[S+60>>2]),t[X+328>>2]=r+(0|t[S+64>>2]),t[(Mt=X+60|0)>>2]=r+(0|t[S+68>>2]),t[X+144>>2]=r+(0|t[S+72>>2]),t[X+148>>2]=r+(0|t[S+76>>2]),l=r+(0|t[S+80>>2])|0,t[(M=X+152|0)>>2]=l,0<(0|(p=0|t[p+8>>2]))&&(k=r+(0|t[S+84>>2])|0,b=e+796|0,t[l>>2]=k,(0|p)!=1))for(l=0,g=1,a=k;a=a+(15+(t[(0|t[b>>2])+(l<<2)>>2]<<3)&-16)|0,t[(0|t[M>>2])+(g<<2)>>2]=a,!((0|p)<=(0|(l=g+1|0)));)Ht=g,g=l,l=Ht;if(t[X+156>>2]=r+(0|t[S+88>>2]),t[X+160>>2]=r+(0|t[S+92>>2]),t[(vt=X+68|0)>>2]=r+(0|t[S+96>>2]),t[X+76>>2]=r+(0|t[S+100>>2]),t[X+80>>2]=r+(0|t[S+104>>2]),t[X+84>>2]=r+(0|t[S+108>>2]),t[X+88>>2]=r+(0|t[S+112>>2]),t[X+92>>2]=r+(0|t[S+116>>2]),t[X+96>>2]=r+(0|t[S+120>>2]),t[X+100>>2]=r+(0|t[S+124>>2]),t[X+104>>2]=r+(0|t[S+128>>2]),t[X+108>>2]=r+(0|t[S+132>>2]),t[X+112>>2]=r+(0|t[S+136>>2]),t[X+116>>2]=r+(0|t[S+140>>2]),t[X+120>>2]=r+(0|t[S+144>>2]),t[X+124>>2]=r+(0|t[S+148>>2]),t[X+128>>2]=r+(0|t[S+152>>2]),t[X+132>>2]=r+(0|t[S+156>>2]),t[X+136>>2]=r+(0|t[S+160>>2]),t[X+140>>2]=r+(0|t[S+164>>2]),t[(x=X+168|0)>>2]=r+(0|t[S+168>>2]),t[X+264>>2]=r+(0|t[S+172>>2]),t[X+268>>2]=r+(0|t[S+176>>2]),t[X+272>>2]=r+(0|t[S+180>>2]),t[X+276>>2]=r+(0|t[S+184>>2]),t[X+280>>2]=r+(0|t[S+188>>2]),t[X+284>>2]=r+(0|t[S+192>>2]),t[X+288>>2]=r+(0|t[S+196>>2]),t[X+292>>2]=r+(0|t[S+200>>2]),t[X+296>>2]=r+(0|t[S+204>>2]),t[X+300>>2]=r+(0|t[S+208>>2]),t[(kt=X+176|0)>>2]=r+(0|t[S+212>>2]),t[X+184>>2]=r+(0|t[S+216>>2]),t[X+188>>2]=r+(0|t[S+220>>2]),t[X+192>>2]=r+(0|t[S+224>>2]),t[X+196>>2]=r+(0|t[S+228>>2]),t[X+200>>2]=r+(0|t[S+232>>2]),t[X+204>>2]=r+(0|t[S+236>>2]),t[X+208>>2]=r+(0|t[S+240>>2]),t[X+212>>2]=r+(0|t[S+244>>2]),t[X+216>>2]=r+(0|t[S+248>>2]),t[X+220>>2]=r+(0|t[S+252>>2]),t[X+224>>2]=r+(0|t[S+256>>2]),t[X+228>>2]=r+(0|t[S+260>>2]),t[X+232>>2]=r+(0|t[S+264>>2]),t[X+236>>2]=r+(0|t[S+268>>2]),t[X+240>>2]=r+(0|t[S+272>>2]),t[X+244>>2]=r+(0|t[S+276>>2]),t[X+248>>2]=r+(0|t[S+280>>2]),t[X+252>>2]=r+(0|t[S+284>>2]),t[X+256>>2]=r+(0|t[S+288>>2]),t[X+260>>2]=r+(0|t[S+292>>2]),p=0|t[Pt>>2],t[(Gt=X+336|0)>>2]=r+(0|t[S+296>>2]),t[X+424>>2]=r+(0|t[S+300>>2]),t[X+432>>2]=r+(0|t[S+304>>2]),t[X+436>>2]=r+(0|t[S+308>>2]),t[X+440>>2]=r+(0|t[S+312>>2]),l=r+(0|t[S+316>>2])|0,t[(M=X+444|0)>>2]=l,0<(0|(p=0|t[p+16>>2]))&&(P=r+(0|t[S+320>>2])|0,E=e+892|0,t[l>>2]=P,(0|p)!=1))for(l=0,g=1,a=P;a=a+(15+(t[(0|t[E>>2])+(l<<2)>>2]<<3)&-16)|0,t[(0|t[M>>2])+(g<<2)>>2]=a,!((0|p)<=(0|(l=g+1|0)));)Ht=g,g=l,l=Ht;if(t[X+448>>2]=r+(0|t[S+324>>2]),t[(Ot=X+452|0)>>2]=r+(0|t[S+328>>2]),t[(Tt=X+456|0)>>2]=r+(0|t[S+332>>2]),t[X+460>>2]=r+(0|t[S+336>>2]),t[X+464>>2]=r+(0|t[S+340>>2]),t[X+468>>2]=r+(0|t[S+344>>2]),t[X+472>>2]=r+(0|t[S+348>>2]),t[X+476>>2]=r+(0|t[S+352>>2]),t[(Yt=X+344|0)>>2]=r+(0|t[S+356>>2]),t[X+352>>2]=r+(0|t[S+360>>2]),t[X+356>>2]=r+(0|t[S+364>>2]),t[X+360>>2]=r+(0|t[S+368>>2]),t[X+364>>2]=r+(0|t[S+372>>2]),t[X+368>>2]=r+(0|t[S+376>>2]),t[X+372>>2]=r+(0|t[S+380>>2]),t[X+376>>2]=r+(0|t[S+384>>2]),t[X+380>>2]=r+(0|t[S+388>>2]),t[X+384>>2]=r+(0|t[S+392>>2]),t[X+388>>2]=r+(0|t[S+396>>2]),t[X+392>>2]=r+(0|t[S+400>>2]),t[X+396>>2]=r+(0|t[S+404>>2]),t[X+400>>2]=r+(0|t[S+408>>2]),t[X+404>>2]=r+(0|t[S+412>>2]),t[X+408>>2]=r+(0|t[S+416>>2]),t[X+412>>2]=r+(0|t[S+420>>2]),t[X+416>>2]=r+(0|t[S+424>>2]),t[X+420>>2]=r+(0|t[S+428>>2]),dt=0|t[S+436>>2],m=0|t[S+440>>2],t[(Ht=X+544|0)>>2]=r+(0|t[S+432>>2]),t[(Y=X+548|0)>>2]=r+dt,t[(dt=X+552|0)>>2]=r+m,t[(m=X+560|0)>>2]=r+(0|t[S+444>>2]),l=0|t[Pt>>2],p=r+(0|t[S+448>>2])|0,t[(Ut=X+568|0)>>2]=p,0<(0|(l=0|t[l+48>>2])))for(a=0|t[e+1048>>2],M=r+(0|t[S+452>>2])|0,b=r+((k=0)|t[S+456>>2])|0,E=r+(0|t[S+460>>2])|0;t[p+(36*k|0)>>2]=M,t[p+(36*k|0)+16>>2]=b,t[p+(36*k|0)+20>>2]=E,P=1<<(g=0|t[a+(k<<2)>>2]),(0|(k=k+1|0))!=(0|l);)M=M+(g<<2)|0,b=b+(P<<2)|0,E=E+(P<<2)|0;if(l=0|t[Pt>>2],g=r+(0|t[S+488>>2])|0,t[(y=X+484|0)>>2]=g,0<(0|(l=0|t[l+72>>2])))for(a=0|t[e+1152>>2],M=r+((p=0)|t[S+492>>2])|0;M=(t[g+(28*p|0)+12>>2]=M)+(t[a+(p<<2)>>2]<<4)|0,(0|(p=p+1|0))!=(0|l););if(t[X+488>>2]=r+(0|t[S+496>>2]),t[X+492>>2]=r+(0|t[S+500>>2]),t[X+496>>2]=r+(0|t[S+504>>2]),t[(jt=X+504|0)>>2]=r+(0|t[S+508>>2]),t[X+536>>2]=r+(0|t[S+512>>2]),t[(Kt=X+512|0)>>2]=r+(0|t[S+516>>2]),t[X+520>>2]=r+(0|t[S+520>>2]),t[X+524>>2]=r+(0|t[S+524>>2]),t[X+528>>2]=r+(0|t[S+528>>2]),t[X+532>>2]=r+(0|t[S+532>>2]),ht=3<(0|Rt[(u=e+4|0)>>0])){if(t[X+576>>2]=r+(0|t[S+464>>2]),t[X+584>>2]=r+(0|t[S+468>>2]),l=0|t[S+476>>2],p=0|t[Pt>>2],k=r+(0|t[S+472>>2])|0,t[X+592>>2]=k,0<(0|(p=0|t[p+104>>2])))for(M=0|t[e+1080>>2],l=r+l|0,a=0;t[k+(48*a|0)+40>>2]=l,(0|(g=a+1|0))!=(0|p);)l=l+(t[M+(a<<2)>>2]<<2)|0,a=g;t[X+600>>2]=r+(0|t[S+480>>2]),t[X+608>>2]=r+(0|t[S+484>>2]),a=0|t[Pt>>2],l=0|t[a+20>>2]}else if(a=0|t[S+536>>2],g=0|t[S+544>>2],t[X+616>>2]=r+(0|t[S+540>>2]),t[(S=X+612|0)>>2]=r+a,a=0|t[Pt>>2],0<(0|(l=0|t[a+20>>2])))for(b=e+948|0,P=e+952|0,k=e+1036|0,M=r+g|(E=0);;){if(l=0|t[(0|t[b>>2])+(E<<2)>>2],g=(st=0|t[(0|t[P>>2])+(E<<2)>>2])+l|0,0<(0|st)){for(a=0|t[k>>2],p=0;p=(0|t[a+(l<<2)>>2])+p|0,(0|(l=l+1|0))<(0|g););l=(0|t[S>>2])+(E<<2)|0,p?(a=M,g=p):wt=27}else l=(0|t[S>>2])+(E<<2)|0,wt=27;if((0|wt)==27&&(g=a=wt=0),t[l>>2]=a,a=0|t[Pt>>2],(0|(l=0|t[a+20>>2]))<=(0|(E=E+1|0)))break;M=M+(g<<2)|0}t[X>>2]=e,t[X+620>>2]=1,t[X+624>>2]=1&J[20+(0|t[e+708>>2])>>0],M=(t[X+540>>2]=l)+-1|0;e:do if(0<(0|l)){if(r=0|t[Ht>>2],z=0|t[e+928>>2],O=0|t[e+924>>2],U=0|t[e+936>>2],it=0|t[e+932>>2],ft=0|t[e+940>>2],rt=0|t[e+952>>2],st=e+948|0,S=0|t[dt>>2],E=X+584|0,P=e+956|0,!ht)for(;;){if(t[r+(52*M|0)>>2]=0,t[r+(52*M|0)+4>>2]=t[(g=z+(M<<2)|0)>>2],t[r+(52*M|0)+8>>2]=t[(dt=O+(M<<2)|0)>>2],B[r+(52*M|0)+12>>2]=+B[dt>>2]-+B[g>>2],t[r+(52*M|0)+16>>2]=t[U+(M<<2)>>2],t[r+(52*M|0)+44>>2]=t[(g=it+(M<<2)|0)>>2],H=+xe(.10000000149011612,0|t[ft+(M<<2)>>2]),B[r+(52*M|0)+20>>2]=H,B[r+(52*M|0)+24>>2]=1.5*H,dt=0|t[rt+(M<<2)>>2],p=(t[r+(52*M|0)+32>>2]=dt)?(0|t[m>>2])+(28*(0|t[(0|t[st>>2])+(M<<2)>>2])|0)|0:0,t[r+(52*M|0)+28>>2]=p,t[r+(52*M|0)+48>>2]=1,t[S+(M<<2)>>2]=t[g>>2],!(0<(0|M)))break e;M=M+-1|0}for(k=0|t[e+944>>2],b=0|t[e+960>>2];t[r+(52*M|0)>>2]=t[k+(M<<2)>>2],t[r+(52*M|0)+4>>2]=t[(p=z+(M<<2)|0)>>2],t[r+(52*M|0)+8>>2]=t[(dt=O+(M<<2)|0)>>2],B[r+(52*M|0)+12>>2]=+B[dt>>2]-+B[p>>2],t[r+(52*M|0)+16>>2]=t[U+(M<<2)>>2],t[r+(52*M|0)+44>>2]=t[(p=it+(M<<2)|0)>>2],H=+xe(.10000000149011612,0|t[ft+(M<<2)>>2]),B[r+(52*M|0)+20>>2]=H,B[r+(52*M|0)+24>>2]=1.5*H,dt=0|t[rt+(M<<2)>>2],g=(t[r+(52*M|0)+32>>2]=dt)?(0|t[m>>2])+(28*(0|t[(0|t[st>>2])+(M<<2)>>2])|0)|0:0,t[r+(52*M|0)+28>>2]=g,dt=0|t[b+(M<<2)>>2],g=(t[r+(52*M|0)+40>>2]=dt)?(0|t[E>>2])+(28*(0|t[(0|t[P>>2])+(M<<2)>>2])|0)|0:0,t[r+(52*M|0)+36>>2]=g,t[r+(52*M|0)+48>>2]=1,t[S+(M<<2)>>2]=t[p>>2],0<(0|M);)M=M+-1|0}while(0);if(ht?(t[Y>>2]=t[e+944>>2],k=a,U=e):(Pe(0|t[Y>>2],0,l<<2|0),U=0|t[X>>2],k=0|t[U+704>>2]),l=0|t[k+52>>2],0<(0|(t[X+556>>2]=l)))for(a=0|t[m>>2],g=0|t[U+1036>>2],p=0|t[U+1132>>2],M=0|t[U+1032>>2];t[a+(28*(l=(Y=l)+-1|0)|0)>>2]=t[g+(l<<2)>>2],t[a+(28*l|0)+4>>2]=p+(t[M+(l<<2)>>2]<<2),t[a+(28*l|0)+8>>2]=0,B[a+(28*l|0)+12>>2]=0,t[a+(28*l|0)+16>>2]=0,t[a+(28*l|0)+20>>2]=1,(t[a+(28*l|0)+24>>2]=1)<(0|Y););if(l=0|t[k+48>>2],0<(0|(t[X+564>>2]=l))){P=U+1048|0,E=U+1040|0,b=U+1044|0;do if(k=l,a=0|t[Ut>>2],g=0|t[(0|t[P>>2])+((l=l+-1|0)<<2)>>2],0<(0|(t[a+(36*l|0)+4>>2]=g)))for(p=a+(36*l|0)|0,M=0;t[(0|t[p>>2])+(M<<2)>>2]=(0|t[m>>2])+(28*(0|t[(0|t[E>>2])+((0|t[(0|t[b>>2])+(l<<2)>>2])+M<<2)>>2])|0),(0|(M=M+1|0))!=(0|g););while(t[a+(36*l|0)+8>>2]=1<<g,t[a+(36*l|0)+24>>2]=1,(t[a+(36*l|0)+28>>2]=1)<(0|k));U=0|t[X>>2],k=0|t[U+704>>2]}if(a=0|t[k>>2],0<(0|(t[(r=X+4|0)>>2]=a))){for(p=0|t[f>>2],E=0|t[Ut>>2],S=0|t[U+720>>2],M=0|t[U+740>>2],b=0|t[U+736>>2],P=0|t[U+732>>2],l=0|t[yt>>2],g=a;t[p+(12*(g=(yt=g)+-1|0)|0)>>2]=E+(36*(0|t[S+(g<<2)>>2])|0),t[p+(12*g|0)+4>>2]=t[M+(g<<2)>>2],t[p+(12*g|0)+8>>2]=t[b+(g<<2)>>2],B[l+(g<<2)>>2]=0|t[P+(g<<2)>>2]?1:0,1<(0|yt););for(g=0|t[at>>2],l=0;yt=0|t[E+(36*(0|t[S+((a=(at=a)+-1|0)<<2)>>2])|0)+8>>2],l=(t[g+(a<<2)>>2]=yt)+l|0,1<(0|at););a=0|t[r>>2]}else l=0;if(t[X+20>>2]=l,t[X+12>>2]=a,l=0|t[k+4>>2],0<(0|(t[X+304>>2]=l))){b=U+752|0,E=U+764|0,P=U+768|0,k=U+772|0,S=U+776|0,M=U+760|0;do switch(p=l,a=0|t[n>>2],t[a+((l=l+-1|0)<<5)>>2]=(0|t[Ut>>2])+(36*(0|t[(0|t[b>>2])+(l<<2)>>2])|0),t[a+(l<<5)+4>>2]=t[(0|t[E>>2])+(l<<2)>>2],t[a+(l<<5)+8>>2]=t[(0|t[P>>2])+(l<<2)>>2],at=0|t[(0|t[k>>2])+(l<<2)>>2],t[a+(l<<5)+12>>2]=at,g=0|t[(0|t[S>>2])+(l<<2)>>2],t[a+(l<<5)+16>>2]=g,t[a+(l<<5)+28>>2]=t[(0|t[M>>2])+(l<<2)>>2],0|at){case 0:t[(0|t[Mt>>2])+(24*g|0)+20>>2]=l,t[a+(l<<5)+20>>2]=2,t[a+(l<<5)+24>>2]=2;break;case 1:t[(0|t[x>>2])+(12*g|0)+8>>2]=l,t[a+(l<<5)+20>>2]=3,t[a+(l<<5)+24>>2]=3;break;default:pt(0,937,nt)}while(1<(0|p));U=0|t[X>>2],Y=0|t[U+704>>2]}else Y=k;if(g=0|t[Y+8>>2],l=(t[(r=X+56|0)>>2]=g)+-1|0,S=0<(0|g))if(p=0|t[Mt>>2],M=0|t[Ut>>2],k=0|t[U+780>>2],b=0|t[U+800>>2],P=0|t[U+804>>2],E=0|t[U+796>>2],1<(0|Rt[U+4>>0]))for(a=0|t[U+808>>2];t[p+(24*l|0)>>2]=M+(36*(0|t[k+(l<<2)>>2])|0),t[p+(24*l|0)+4>>2]=t[b+(l<<2)>>2],t[p+(24*l|0)+8>>2]=t[P+(l<<2)>>2],t[p+(24*l|0)+16>>2]=t[E+(l<<2)>>2],t[p+(24*l|0)+12>>2]=t[a+(l<<2)>>2],0<(0|l);)l=l+-1|0;else for(;t[p+(24*l|0)>>2]=M+(36*(0|t[k+(l<<2)>>2])|0),t[p+(24*l|0)+4>>2]=t[b+(l<<2)>>2],t[p+(24*l|0)+8>>2]=t[P+(l<<2)>>2],t[p+(24*l|0)+16>>2]=t[E+(l<<2)>>2],(t[p+(24*l|0)+12>>2]=0)<(0|l);)l=l+-1|0;if(a=0|t[Y+12>>2],0<(0|(t[(P=X+164|0)>>2]=a)))for(l=0|t[x>>2],p=0|t[Ut>>2],M=0|t[U+812>>2],k=0|t[U+828>>2],b=a;t[l+(12*(b=(nt=b)+-1|0)|0)>>2]=p+(36*(0|t[M+(b<<2)>>2])|0),t[l+(12*b|0)+4>>2]=t[k+(b<<2)>>2],1<(0|nt););if(S){for(p=0|t[Mt>>2],a=0|t[vt>>2],l=0;vt=0|t[8+(0|t[p+(24*(g=(Mt=g)+-1|0)|0)>>2])>>2],l=(t[a+(g<<2)>>2]=vt)+l|0,1<(0|Mt););g=0|t[r>>2],a=0|t[P>>2]}else l=0;if(t[X+72>>2]=l,t[X+64>>2]=g,0<(0|a)){for(p=0|t[x>>2],g=0|t[kt>>2],l=0;kt=0|t[8+(0|t[p+(12*(a=(Mt=a)+-1|0)|0)>>2])>>2],l=(t[g+(a<<2)>>2]=kt)+l|0,1<(0|Mt););a=0|t[P>>2]}else l=0;if(t[X+180>>2]=l,t[X+172>>2]=a,a=U+704|0,l=0|t[Y+16>>2],0<(0|(t[(r=X+332|0)>>2]=l))){for(g=0|t[Gt>>2],E=0|t[Ut>>2],S=0|t[U+852>>2],p=0|t[U+876>>2],M=0|t[U+880>>2],k=0|t[U+892>>2],b=0|t[U+872>>2],P=l;t[g+(20*(P=(Gt=P)+-1|0)|0)>>2]=E+(36*(0|t[S+(P<<2)>>2])|0),t[g+(20*P|0)+4>>2]=t[p+(P<<2)>>2],t[g+(20*P|0)+8>>2]=t[M+(P<<2)>>2],t[g+(20*P|0)+16>>2]=t[k+(P<<2)>>2],t[g+(20*P|0)+12>>2]=t[b+(P<<2)>>2],1<(0|Gt););for(g=0|t[Yt>>2],p=0;Yt=0|t[E+(36*(0|t[S+((l=(Gt=l)+-1|0)<<2)>>2])|0)+8>>2],p=(t[g+(l<<2)>>2]=Yt)+p|0,1<(0|Gt););if(l=0|t[r>>2],t[X+348>>2]=p,0<(0|(t[X+340>>2]=l)))for(M=0|t[Ot>>2],g=0|t[Tt>>2],p=l<<2;B[M+((p=(Tt=p)+-4|0)<<2)>>2]=1,B[M+((Gt=Tt+-3|0)<<2)>>2]=1,B[M+((Ot=Tt+-2|0)<<2)>>2]=1,B[M+((Tt=Tt+-1|0)<<2)>>2]=1,B[g+(p<<2)>>2]=0,B[g+(Gt<<2)>>2]=0,!(((B[g+(Ot<<2)>>2]=0)|l)<=(B[g+(Tt<<2)>>2]=1));)l=l+-1|0}else t[X+348>>2]=0,t[X+340>>2]=l;if(dt=0|t[Y+72>>2],0<(0|(t[X+480>>2]=dt))){l=0|t[y>>2],g=0|t[U+1152>>2],p=0|t[U+1156>>2],M=0|t[U+1160>>2],k=0|t[U+1164>>2],b=0|t[U+1148>>2],it=U+1172|0,rt=U+1168|0,ft=U+1176|0,st=0;do if(P=0|t[g+(st<<2)>>2],t[l+(28*st|0)+4>>2]=P,t[l+(28*st|0)>>2]=t[p+(st<<2)>>2],Tt=0|t[M+(st<<2)>>2],t[l+(28*st|0)+16>>2]=Tt,E=0|t[k+(st<<2)>>2],t[l+(28*st|0)+20>>2]=E,t[l+(28*st|0)+24>>2]=Tt+1-E,E=(t[l+(28*st|0)+8>>2]=0)|t[b+(st<<2)>>2],0<(0|P))for(S=0|t[l+(28*st|0)+12>>2],r=0|t[it>>2],z=0|t[rt>>2],O=0|t[ft>>2],ht=0;t[S+(ht<<4)+4>>2]=t[r+((Tt=ht+E|0)<<2)>>2],t[S+(ht<<4)>>2]=t[z+(Tt<<2)>>2],t[S+(ht<<4)+8>>2]=t[O+(Tt<<2)>>2],(0|(ht=ht+1|(t[S+(ht<<4)+12>>2]=0)))!=(0|P););while((0|(st=st+1|0))!=(0|dt))}g=0|t[Y+80>>2],t[(z=X+500|0)>>2]=g;do if(0<(0|g)){for(E=0|t[jt>>2],S=0|t[Ut>>2],r=0|t[U+1188>>2],l=0|t[U+1200>>2],p=0|t[U+1204>>2],M=0|t[U+1212>>2],k=0|t[U+1216>>2],b=0|t[U+1208>>2],P=0|t[U+1220>>2];t[E+(24*(g=(Ut=g)+-1|0)|0)>>2]=S+(36*(0|t[r+(g<<2)>>2])|0),t[E+(24*g|0)+4>>2]=t[l+(g<<2)>>2],t[E+(24*g|0)+8>>2]=t[p+(g<<2)>>2],t[E+(24*g|0)+12>>2]=t[M+(g<<2)>>2],jt=0|t[b+(g<<2)>>2],t[E+(24*g|0)+16>>2]=k+(jt<<2),t[E+(24*g|0)+20>>2]=P+(jt<<1),1<(0|Ut););if((0|(g=0|t[z>>2]))<=0){l=0;break}for(p=0|t[Kt>>2],l=0;Kt=0|t[S+(36*(0|t[r+((g=(Ut=g)+-1|0)<<2)>>2])|0)+8>>2],l=(t[p+(g<<2)>>2]=Kt)+l|0,1<(0|Ut););g=0|t[z>>2]}else l=0;while(0);t[X+516>>2]=l,t[X+508>>2]=g;do if(3<(0|Rt[u>>0])){if((255&(l=0|J[U+4>>0]))<4)break;if(g=0|t[Y+120>>2],0<(0|(t[X+572>>2]=g))){for(P=0|t[X+576>>2],E=0|t[U+1112>>2],r=U+1124|0,S=U+1116|0,z=U+1128|0,b=U+1120|0;p=-1<(0|(l=0|t[E+((g=(k=g)+-1|0)<<2)>>2]))?(p=0|t[(0|t[S>>2])+(g<<2)>>2],M=0|t[(0|t[b>>2])+(g<<2)>>2],l=(0|t[Ht>>2])+(52*l|0)|0,a=(0|t[r>>2])+(p<<2)|0,(0|t[z>>2])+(p<<2)|0):a=l=M=0,t[P+(20*g|0)>>2]=l,t[P+(20*g|0)+4>>2]=a,t[P+(20*g|0)+8>>2]=p,t[P+(20*g|0)+12>>2]=M,1<(0|k););if(a=0|t[X>>2],(255&(l=0|J[a+4>>0]))<4)break;a=(U=a)+704|0}if(g=0|t[a>>2],a=0|t[g+100>>2],0<(0|(t[X+580>>2]=a)))for(p=0|t[X+584>>2],M=0|t[U+1056>>2],k=0|t[U+1132>>2],b=0|t[U+1052>>2],P=0|t[U+1060>>2];t[p+(28*(a=(wt=a)+-1|0)|0)>>2]=t[M+(a<<2)>>2],t[p+(28*a|0)+4>>2]=k+(t[b+(a<<2)>>2]<<2),t[p+(28*a|0)+8>>2]=t[P+(a<<2)>>2],t[p+(28*a|0)+12>>2]=0,B[p+(28*a|0)+16>>2]=0,t[p+(28*a|0)+20>>2]=1,(t[p+(28*a|0)+24>>2]=1)<(0|wt););if(a=0|t[g+104>>2],0<(0|(t[X+588>>2]=a))){S=X+592|0,z=X+584|0,E=U+1064|0,O=U+1068|0,b=U+1080|0,r=X+576|0,P=U+1108|0,k=U+1076|0;do if(M=a,l=0|t[S>>2],t[l+(48*(a=a+-1|0)|0)>>2]=(0|t[z>>2])+(28*(0|t[(0|t[E>>2])+(a<<2)>>2])|0),t[l+(48*a|0)+4>>2]=t[(0|t[O>>2])+(a<<2)>>2],t[l+(48*a|0)+8>>2]=0,t[l+(48*a|0)+28>>2]=1,t[l+(48*a|0)+32>>2]=1,p=0|t[(0|t[b>>2])+(a<<2)>>2],0<(0|(t[l+(48*a|0)+36>>2]=p)))for(l=l+(48*a|0)+40|0,g=0;t[(0|t[l>>2])+(g<<2)>>2]=(0|t[r>>2])+(20*(0|t[(0|t[P>>2])+((0|t[(0|t[k>>2])+(a<<2)>>2])+g<<2)>>2])|0),(0|(g=g+1|0))!=(0|p););while(1<(0|M));E=0|t[X>>2],l=0|J[E+4>>0]}else E=U;if(P=0|t[Pt>>2],a=0|t[P+108>>2],(255&l)<4)break;if(0<(0|(t[X+596>>2]=a)))for(g=0|t[X+600>>2],p=0|t[e+1084>>2],M=0|t[e+1092>>2],k=0|t[X+592>>2],b=0|t[e+1088>>2],l=a;t[g+(12*(l=(Pt=l)+-1|0)|0)>>2]=t[p+(l<<2)>>2],t[g+(12*l|0)+4>>2]=t[M+(l<<2)>>2],t[g+(12*l|0)+8>>2]=k+(48*(0|t[b+(l<<2)>>2])|0),1<(0|Pt););if(l=0|t[P+112>>2],0<(0|(t[X+604>>2]=l)))for(g=0|t[X+608>>2],p=0|t[e+1096>>2],M=0|t[e+1104>>2],k=0|t[X+592>>2],a=0|t[e+1100>>2];t[g+(12*(l=(e=l)+-1|0)|0)>>2]=t[p+(l<<2)>>2],t[g+(12*l|0)+4>>2]=t[M+(l<<2)>>2],t[g+(12*l|0)+8>>2]=k+(48*(0|t[a+(l<<2)>>2])|0),1<(0|e););if(g=0|t[E+1132>>2],p=0|t[20+(0|t[E+704>>2])>>2],M=X+612|0,t[X+616>>2]=t[E+972>>2],l=0|t[E+964>>2],t[M>>2]=l,(0|p)<=0||(t[l>>2]=g+(t[t[(a=E+968|0)>>2]>>2]<<2),(0|p)==1))break;for(l=1;t[(0|t[M>>2])+(l<<2)>>2]=g+(t[(0|t[a>>2])+(l<<2)>>2]<<2),(0|(l=l+1|0))!=(0|p););}else{if((0|t[Y+20>>2])<=0)break;ht=U+948|0,dt=U+952|0,ft=X+612|0,rt=U+1032|0,st=U+1036|0,O=U+1132|0,U=X+616|0,it=0;do{if(l=0|t[(0|t[ht>>2])+(it<<2)>>2],r=(e=0|t[(0|t[dt>>2])+(it<<2)>>2])+l|0,z=0|t[(0|t[ft>>2])+(it<<2)>>2],0<(0|e)){E=0|t[rt>>2],S=0|t[st>>2],P=l,l=0;do if(g=0|t[E+(P<<2)>>2],b=(e=0|t[S+(P<<2)>>2])+g|0,0<(0|e)){k=0|t[O>>2];do{H=+B[k+(g<<2)>>2],p=z+(l<<2)|0;e:do if(0<(0|l))for(M=z;;){if(+B[M>>2]==H)break e;if(p>>>0<=(M=M+4|0)>>>0){wt=150;break}}else wt=150;while(0)}while((0|wt)==150&&(wt=0,B[p>>2]=H,l=l+1|0),(0|(g=g+1|0))<(0|b))}while((0|(P=P+1|0))<(0|r))}else l=0;(function(zt,d){zt|=0;var v,L,tt=0,lt=0,Ft=0,Zt=0,$t=0,Jt=0,te=C,Vt=C=C+63&-64;C=C+208|0,Ft=(d|=0)<<2,t[($t=Vt=192+(L=Vt)|0)>>2]=1,t[$t+4>>2]=0;e:do if(0|Ft){for(t[4+L>>2]=4,tt=d=t[L>>2]=4,lt=2;(t[L+(lt<<2)>>2]=d=d+4+tt|0)>>>0<Ft>>>0;)$t=tt,tt=d,lt=lt+1|0,d=$t;if(zt>>>0<(Zt=zt+Ft+-4|0)>>>0){v=Zt,$t=4+Vt|0,tt=zt,lt=d=1;do do if((3&d|0)!=3){if((0|t[L+((Ft=lt+-1|0)<<2)>>2])>>>0<(v-tt|0)>>>0?kr(tt,lt,L):U0(tt,d,0|t[$t>>2],lt,0,L),(0|lt)==1){N0(Vt,1),lt=0;break}N0(Vt,Ft),lt=1;break}while(kr(tt,lt,L),O0(Vt,2),lt=lt+2|0,0);while(d=1|t[Vt>>2],t[Vt>>2]=d,(tt=tt+4|0)>>>0<Zt>>>0);Ft=0|t[(Zt=$t)>>2]}else Zt=4+Vt|0,Ft=0,tt=zt,lt=d=1;for(U0(tt,d,Ft,lt,0,L),Ft=4+Vt|0;;){if((0|lt)==1&(0|d)==1){if(!(0|t[Ft>>2]))break e;Jt=21}else(0|lt)<2?Jt=21:(N0(Vt,2),zt=lt+-2|0,t[Vt>>2]=7^t[Vt>>2],O0(Vt,1),U0(tt+(0-(0|t[L+(zt<<2)>>2]))+-4|0,0|t[Vt>>2],0|t[Zt>>2],lt+-1|0,1,L),N0(Vt,1),d=1|t[Vt>>2],U0(tt=tt+-4|0,t[Vt>>2]=d,0|t[Zt>>2],zt,1,L),lt=zt);(0|Jt)==21&&(O0(Vt,zt=(Jt=0)|sn(Vt)),d=0|t[Vt>>2],tt=tt+-4|0,lt=zt+lt|0)}}while(0);C=te})(z,l),t[(0|t[U>>2])+(it<<2)>>2]=l,it=it+1|0}while((0|it)<(0|t[20+(0|t[a>>2])>>2]))}while(0);return Za(X),C=ae,0|X}function Si(e,r){return 0|((e=+B[(e|=0)>>2])<(r=+B[(r|=0)>>2])?-1:r<e&1)}function Ir(e,r){var a=0|J[4+(e|=0)>>0];t[(r|=0)>>2]=e+(0|t[e+64>>2]),t[r+4>>2]=e+(0|t[e+68>>2]),t[r+8>>2]=e+(0|t[e+72>>2]),t[r+12>>2]=e+(0|t[e+76>>2]),t[r+16>>2]=e+(0|t[e+80>>2]),t[r+20>>2]=e+(0|t[e+84>>2]),t[r+24>>2]=e+(0|t[e+88>>2]),t[r+28>>2]=e+(0|t[e+92>>2]),t[r+32>>2]=e+(0|t[e+96>>2]),t[r+36>>2]=e+(0|t[e+100>>2]),t[r+40>>2]=e+(0|t[e+104>>2]),t[r+44>>2]=e+(0|t[e+108>>2]),t[r+48>>2]=e+(0|t[e+112>>2]),t[r+52>>2]=e+(0|t[e+116>>2]),t[r+56>>2]=e+(0|t[e+120>>2]),t[r+60>>2]=e+(0|t[e+124>>2]),t[r+64>>2]=e+(0|t[e+128>>2]),t[r+68>>2]=e+(0|t[e+132>>2]),t[r+72>>2]=e+(0|t[e+136>>2]),t[r+76>>2]=e+(0|t[e+140>>2]),t[r+80>>2]=e+(0|t[e+144>>2]),t[r+84>>2]=e+(0|t[e+148>>2]),t[r+92>>2]=e+(0|t[e+152>>2]),t[r+96>>2]=e+(0|t[e+156>>2]),t[r+100>>2]=e+(0|t[e+160>>2]),t[r+108>>2]=e+(0|t[e+164>>2]),t[r+112>>2]=e+(0|t[e+168>>2]),t[r+116>>2]=e+(0|t[e+172>>2]),t[r+124>>2]=e+(0|t[e+176>>2]),t[r+128>>2]=e+(0|t[e+180>>2]),t[r+132>>2]=e+(0|t[e+184>>2]),t[r+136>>2]=e+(0|t[e+188>>2]),t[r+140>>2]=e+(0|t[e+192>>2]),t[r+144>>2]=e+(0|t[e+196>>2]),t[r+148>>2]=e+(0|t[e+200>>2]),t[r+152>>2]=e+(0|t[e+204>>2]),t[r+156>>2]=e+(0|t[e+208>>2]),t[r+164>>2]=e+(0|t[e+212>>2]),t[r+168>>2]=e+(0|t[e+216>>2]),t[r+172>>2]=e+(0|t[e+220>>2]),t[r+176>>2]=e+(0|t[e+224>>2]),t[r+180>>2]=e+(0|t[e+228>>2]),t[r+184>>2]=e+(0|t[e+232>>2]),t[r+188>>2]=e+(0|t[e+236>>2]),t[r+192>>2]=e+(0|t[e+240>>2]),t[r+196>>2]=e+(0|t[e+244>>2]),t[r+200>>2]=e+(0|t[e+248>>2]),t[r+204>>2]=e+(0|t[e+252>>2]),t[r+208>>2]=e+(0|t[e+256>>2]),t[r+212>>2]=e+(0|t[e+260>>2]),t[r+216>>2]=e+(0|t[e+264>>2]),t[r+220>>2]=e+(0|t[e+268>>2]),t[r+224>>2]=e+(0|t[e+272>>2]),t[r+228>>2]=e+(0|t[e+276>>2]),t[r+232>>2]=e+(0|t[e+280>>2]),t[r+236>>2]=e+(0|t[e+284>>2]),t[r+244>>2]=e+(0|t[e+288>>2]),t[r+248>>2]=e+(0|t[e+292>>2]),t[r+272>>2]=e+(0|t[e+296>>2]),t[r+276>>2]=e+(0|t[e+300>>2]),t[r+280>>2]=e+(0|t[e+304>>2]),t[r+284>>2]=e+(0|t[e+308>>2]),t[r+288>>2]=e+(0|t[e+312>>2]),t[r+292>>2]=e+(0|t[e+316>>2]),t[r+296>>2]=e+(0|t[e+320>>2]),t[r+300>>2]=e+(0|t[e+324>>2]),t[r+304>>2]=e+(0|t[e+328>>2]),t[r+308>>2]=e+(0|t[e+332>>2]),t[r+312>>2]=e+(0|t[e+336>>2]),t[r+316>>2]=e+(0|t[e+340>>2]),t[r+320>>2]=e+(0|t[e+344>>2]),t[r+324>>2]=e+(0|t[e+348>>2]),t[r+336>>2]=e+(0|t[e+352>>2]),t[r+340>>2]=e+(0|t[e+356>>2]),t[r+344>>2]=e+(0|t[e+360>>2]),t[r+328>>2]=e+(0|t[e+364>>2]),t[r+332>>2]=e+(0|t[e+368>>2]),t[r+428>>2]=e+(0|t[e+372>>2]),t[r+432>>2]=e+(0|t[e+376>>2]),t[r+436>>2]=e+(0|t[e+380>>2]),t[r+440>>2]=e+(0|t[e+384>>2]),t[r+444>>2]=e+(0|t[e+388>>2]),t[r+448>>2]=e+(0|t[e+392>>2]),t[r+452>>2]=e+(0|t[e+396>>2]),t[r+456>>2]=e+(0|t[e+400>>2]),t[r+460>>2]=e+(0|t[e+404>>2]),t[r+464>>2]=e+(0|t[e+408>>2]),t[r+468>>2]=e+(0|t[e+412>>2]),t[r+472>>2]=e+(0|t[e+416>>2]),t[r+476>>2]=e+(0|t[e+420>>2]),t[r+480>>2]=e+(0|t[e+424>>2]),t[r+484>>2]=e+(0|t[e+428>>2]),t[r+488>>2]=e+(0|t[e+432>>2]),t[r+492>>2]=e+(0|t[e+436>>2]),t[r+496>>2]=e+(0|t[e+440>>2]),t[r+500>>2]=e+(0|t[e+444>>2]),t[r+504>>2]=e+(0|t[e+448>>2]),t[r+508>>2]=e+(0|t[e+452>>2]),t[r+512>>2]=e+(0|t[e+456>>2]),t[r+516>>2]=e+(0|t[e+460>>2]),t[r+520>>2]=e+(0|t[e+464>>2]),(255&a)<=1||(t[r+104>>2]=e+(0|t[e+468>>2]),(255&a)<=3||(t[r+260>>2]=e+(0|t[e+472>>2]),t[r+264>>2]=e+(0|t[e+476>>2]),t[r+268>>2]=e+(0|t[e+480>>2]),t[r+88>>2]=e+(0|t[e+484>>2]),t[r+120>>2]=e+(0|t[e+488>>2]),t[r+160>>2]=e+(0|t[e+492>>2]),t[r+524>>2]=e+(0|t[e+496>>2]),t[r+528>>2]=e+(0|t[e+500>>2]),t[r+532>>2]=e+(0|t[e+504>>2]),t[r+536>>2]=e+(0|t[e+508>>2]),t[r+540>>2]=e+(0|t[e+512>>2]),t[r+544>>2]=e+(0|t[e+516>>2]),t[r+240>>2]=e+(0|t[e+520>>2]),t[r+252>>2]=e+(0|t[e+524>>2]),t[r+256>>2]=e+(0|t[e+528>>2]),t[r+348>>2]=e+(0|t[e+532>>2]),t[r+352>>2]=e+(0|t[e+536>>2]),t[r+356>>2]=e+(0|t[e+540>>2]),t[r+360>>2]=e+(0|t[e+544>>2]),t[r+364>>2]=e+(0|t[e+548>>2]),t[r+368>>2]=e+(0|t[e+552>>2]),t[r+372>>2]=e+(0|t[e+556>>2]),t[r+376>>2]=e+(0|t[e+560>>2]),t[r+380>>2]=e+(0|t[e+564>>2]),t[r+384>>2]=e+(0|t[e+568>>2]),t[r+388>>2]=e+(0|t[e+572>>2]),t[r+392>>2]=e+(0|t[e+576>>2]),t[r+396>>2]=e+(0|t[e+580>>2]),t[r+400>>2]=e+(0|t[e+584>>2]),t[r+404>>2]=e+(0|t[e+588>>2]),t[r+408>>2]=e+(0|t[e+592>>2]),t[r+412>>2]=e+(0|t[e+596>>2]),t[r+416>>2]=e+(0|t[e+600>>2]),t[r+420>>2]=e+(0|t[e+604>>2]),t[r+424>>2]=e+(0|t[e+608>>2])))}var yl=[cn,function(e){return 0|L2(0,0|(e|=0))},function(e){return 0},cn],Y0=[function(e,r,a){return Oi(1),0},function(e,r,a){return 0|O2(0,0|(e|=0),0|(r|=0),0|(a|=0))},function(e,r,a){r|=0,a|=0;var m,f,n,x,y,u,l=0,g=0,p=0,M=0,k=C,b=C=C+63&-64;for(C=C+32|0,b=16+(g=b)|0,l=0|t[(f=28+(e|=0)|0)>>2],t[g>>2]=l,l=(0|t[(n=e+20|0)>>2])-l|0,t[g+4>>2]=l,t[g+8>>2]=r,m=e+60|0,l=l+(t[g+12>>(p=2)]=a)|0;;){if((0|l)==(0|(r=0|function(P){return 0|((P|=0)<<16>>16?(t[1026]=65535&P,-1):0)}(0|X2(0|t[m>>2],0|g,0|p,0|b))?t[b>>2]=-1:0|t[b>>2]))){r=6;break}if((0|r)<0){r=8;break}M=0|t[g+4>>2],t[(y=(x=M>>>0<r>>>0)?g+8|0:g)>>2]=(0|t[y>>2])+(M=r-(x?M:0)|0),t[(u=y+4|0)>>2]=(0|t[u>>2])-M,g=y,p=p+(x<<31>>31)|0,l=l-r|0}return(0|r)==6?(M=0|t[e+44>>2],t[e+16>>2]=M+(0|t[e+48>>2]),t[f>>2]=M,t[n>>2]=M):(0|r)==8&&(t[e+16>>2]=0,t[f>>2]=0,t[n>>2]=0,t[e>>2]=32|t[e>>2],a=(0|p)==2?0:a-(0|t[g+4>>2])|0),C=k,0|a},function(e,r,a){var m,f;return Ve(0|(f=0|t[(m=20+(e|=0)|0)>>2]),0|(r|=0),0|(e=(a|=0)>>>0<(e=(0|t[e+16>>2])-f|0)>>>0?a:e)),t[m>>2]=(0|t[m>>2])+e,0|a}],Al=[fn,function(e,r,a,m){return 0|U2(0,0|(e|=0),0|(r|=0),0|(a|=0),0|(m|=0))},function(e,r,a,m){return le(0),0},fn],mn=[function(e){Oi(3)},function(e){N2(0,0|(e|=0))}],_n=[function(e,r){Oi(4)},function(e,r){z2(0,0|(e|=0),0|(r|=0))},function(e,r){var a,u=0,l=0,g=0,m=0,f=0,n=0,x=0,y=0,u=0|t[(a=308+(e|=0)|0)>>2],l=0|t[e+316>>2],g=0|t[e+320>>2];(0|(m=0|t[(f=u+((r|=0)<<5)+8|0)>>2]))==-1?(t[l+(r<<2)>>2]=t[(0|t[e+148>>2])+(t[u+(r<<5)+16>>2]<<2)>>2],B[g+(r<<2)>>2]=1):(x=0|t[(n=u+(r<<5)+16|0)>>2],y=0|t[(0|t[e+152>>2])+(x<<2)>>2],Ci[3&t[u+(m<<5)+24>>2]](e,m,y,y,0|t[(0|t[e+60>>2])+(24*x|0)+16>>2]),f=0|t[f>>2],B[l+(r<<2)>>2]=+B[(0|t[e+148>>2])+(t[n>>2]<<2)>>2]*+B[l+(f<<2)>>2],t[g+(r<<2)>>2]=t[g+(f<<2)>>2]),(0|Rt[4+(0|t[e>>2])>>0])<4||(u=0|t[a>>2],l=0|t[e+324>>2],a=0|t[e+328>>2],g=r<<2,m=t[u+(r<<5)+16>>2]<<2,(0|(u=0|t[u+(r<<5)+8>>2]))==-1?(u=0|t[e+156>>2],t[l+(g<<2)>>2]=t[u+(m<<2)>>2],t[l+((r=1|g)<<2)>>2]=t[u+((f=1|m)<<2)>>2],t[l+((y=2|g)<<2)>>2]=t[u+((x=2|m)<<2)>>2],B[l+((u=3|g)<<2)>>2]=1,n=0|t[e+160>>2],t[a+(g<<2)>>2]=t[n+(m<<2)>>2],t[a+(r<<2)>>2]=t[n+(f<<2)>>2],t[a+(y<<2)>>2]=t[n+(x<<2)>>2]):(x=u<<2,n=(0|t[e+156>>2])+(m<<2)|0,B[(u=l+(g<<2)|0)>>2]=+B[n>>2]*+B[(y=l+(x<<2)|0)>>2],B[u+4>>2]=+B[n+4>>2]*+B[y+4>>2],B[u+8>>2]=+B[n+8>>2]*+B[y+8>>2],B[l+((u=3|g)<<2)>>2]=1,n=(0|t[e+160>>2])+(m<<2)|0,r=+B[n>>2],f=+B[(x=a+(x<<2)|0)>>2],B[(y=a+(g<<2)|0)>>2]=r+f-r*f,f=+B[n+4>>2],r=+B[x+4>>2],B[y+4>>2]=f+r-f*r,r=+B[n+8>>2],f=+B[x+8>>2],B[y+8>>2]=r+f-r*f),B[a+(u<<2)>>2]=1)},function(e,r){var a,m,f,n,x,y,u,l,g,p,M,k,b,P,E,S=0,z=0,O=0,H=0,U=0,it=0,ft=0,rt=0,st=0,ht=0,dt=0,at=0,Y=0,yt=C,at=C=C+63&-64;if(C=C+48|0,u=at+8|0,x=at+40|0,n=at+32|0,f=(y=at)+24|0,at=at+16|0,S=0|t[(M=308+(e|=0)|0)>>2],g=0|t[e+316>>2],p=0|t[e+320>>2],(0|(m=0|t[(P=S+((r|=0)<<5)+8|0)>>2]))==-1)Y=0|t[S+(r<<5)+16>>2],t[g+(r<<2)>>2]=t[(0|t[e+268>>2])+(Y<<2)>>2],t[p+(r<<2)>>2]=t[(0|t[e+272>>2])+(Y<<2)>>2];else{for(l=0|t[(E=S+(r<<5)+16|0)>>2],U=0|t[(0|t[(k=e+276|0)>>2])+(l<<2)>>2],t[at>>2]=U,l=0|t[(0|t[(b=e+280|0)>>2])+(l<<2)>>2],t[(ht=at+4|0)>>2]=l,dt=(0|t[S+(m<<5)+12>>2])==1?-10:-.10000000149011612,t[x>>2]=U,t[(U=4+x|0)>>2]=l,Ci[3&t[(l=S+(m<<5)+24|0)>>2]](e,m,x,n,1),O=4+f|0,S=4+n|0,z=y+4|0,H=9,st=1;B[f>>2]=(rt=0*st)+ +B[x>>2],B[O>>2]=(a=dt*st)+ +B[U>>2],Ci[3&t[l>>2]](e,m,f,y,1),ft=+B[y>>2]-+B[n>>2],B[y>>2]=ft,it=+B[z>>2]-+B[S>>2],!(ft!=0|(B[z>>2]=it)!=0);){if(B[f>>2]=+B[x>>2]-rt,B[O>>2]=+B[U>>2]-a,Ci[3&t[l>>2]](e,m,f,y,1),it=+B[y>>2]-+B[n>>2],B[y>>2]=it,rt=+B[z>>2]-+B[S>>2],it!=0|(B[z>>2]=rt)!=0){Y=6;break}if(!H){Y=8;break}H=H+-1|0,st*=.10000000149011612}(0|Y)==6?(ft=-it,it=-rt):(0|Y)==8&&(pt(0,2813,u),it=ft=0),dt=180*+Q2(0,dt,ft,it)/3.1415927410125732,Ci[3&t[l>>2]](e,0|t[P>>2],at,at,1),Y=0|t[E>>2],t[(0|t[k>>2])+(Y<<2)>>2]=t[at>>2],t[(0|t[b>>2])+(Y<<2)>>2]=t[ht>>2],at=(0|t[e+284>>2])+(Y<<2)|0,B[at>>2]=+B[at>>2]-dt,at=0|t[P>>2],B[g+(r<<2)>>2]=+B[(0|t[e+268>>2])+(Y<<2)>>2]*+B[g+(at<<2)>>2],Y=(0|t[e+272>>2])+(Y<<2)|0,dt=+B[Y>>2]*+B[p+(at<<2)>>2],B[p+(r<<2)>>2]=dt,B[Y>>2]=dt}(0|Rt[4+(0|t[e>>2])>>0])<4||(S=0|t[M>>2],z=0|t[e+324>>2],U=0|t[e+328>>2],O=r<<2,H=t[S+(r<<5)+16>>2]<<2,(0|(S=0|t[S+(r<<5)+8>>2]))==-1?(S=0|t[e+296>>2],t[z+(O<<2)>>2]=t[S+(H<<2)>>2],t[z+((at=1|O)<<2)>>2]=t[S+((ht=1|H)<<2)>>2],t[z+((r=2|O)<<2)>>2]=t[S+((Y=2|H)<<2)>>2],B[z+((S=3|O)<<2)>>2]=1,e=0|t[e+300>>2],t[U+(O<<2)>>2]=t[e+(H<<2)>>2],t[U+(at<<2)>>2]=t[e+(ht<<2)>>2],t[U+(r<<2)>>2]=t[e+(Y<<2)>>2]):(at=S<<2,Y=(0|t[e+296>>2])+(H<<2)|0,B[(S=z+(O<<2)|0)>>2]=+B[Y>>2]*+B[(r=z+(at<<2)|0)>>2],B[S+4>>2]=+B[Y+4>>2]*+B[r+4>>2],B[S+8>>2]=+B[Y+8>>2]*+B[r+8>>2],B[z+((S=3|O)<<2)>>2]=1,Y=(0|t[e+300>>2])+(H<<2)|0,st=+B[Y>>2],dt=+B[(e=U+(at<<2)|0)>>2],B[(r=U+(O<<2)|0)>>2]=st+dt-st*dt,dt=+B[Y+4>>2],st=+B[e+4>>2],B[r+4>>2]=dt+st-dt*st,st=+B[Y+8>>2],dt=+B[e+8>>2],B[r+8>>2]=st+dt-st*dt),B[U+(S<<2)>>2]=1),C=yt}],Ci=[function(e,r,a,m,f){Oi(5)},function(e,r,a,m,f){G2(0,0|(e|=0),0|(r|=0),0|(a|=0),0|(m|=0),0|(f|=0))},function(e,r,a,m,f){a|=0,m|=0;var n,x,y,u,l,g,p,M,k,b,P,E,S,z,O,H,U,it,ft,rt,st,ht,dt,Y=0,yt=0,at=0,nt=0,vt=0,kt=0,Mt=0,Yt=0,Gt=0,Ot=0,Tt=0,jt=0,Kt=0,Ut=0,Ht=0,wt=0,Pt=0,X=0,ae=0,zt=0,d=0,v=0,L=0,tt=C;if(C=C+32|0,ft=tt,r=0|t[(0|t[308+(e|=0)>>2])+((r|=0)<<5)+16>>2],Y=0|t[e+60>>2],S=0|t[(0|t[e+152>>2])+(r<<2)>>2],z=0|t[Y+(24*r|0)+8>>2],O=0|t[Y+(24*r|0)+4>>2],H=1+z|0,(0|(f|=0))<=0)C=tt;else{U=0|z,it=0|O,E=(0|t[Y+(24*r|0)+12>>2])==0,x=S+(z<<3)|0,y=S+((k=0|ie(O,H))<<3)|0,u=S+((M=k+z|0)<<3)|0,l=4+S|0,g=S+(z<<3)+4|0,p=S+(k<<3)+4|0,M=S+(M<<3)+4|0,P=z-1|0,b=O-1|0,jt=Kt=Ut=Ht=yt=at=Tt=Ot=Gt=Yt=d=zt=Mt=kt=vt=nt=v=X=0;do{wt=(n=+B[a+(v<<3)>>2])*U,ae=(Pt=+B[a+(v<<3)+4>>2])*it,e=!(1<=n),Y=!(1<=Pt);do{if(Y&e&!(n<0)&!(Pt<0)){if(e=~~wt,r=(0|ie(H,Y=~~ae))+e|0,at=wt-(0|e),yt=ae-(0|Y),!E){B[m+(v<<3)>>2]=(wt=1-yt)*((Pt=1-at)*+B[S+(r<<3)>>2])+wt*(at*+B[S+((L=r+1|0)<<3)>>2])+yt*(Pt*+B[S+((e=r+H|0)<<3)>>2])+yt*(at*+B[S+((Y=e+1|0)<<3)>>2]),Pt=wt*(Pt*+B[S+(r<<3)+4>>2])+wt*(at*+B[S+(L<<3)+4>>2])+yt*(Pt*+B[S+(e<<3)+4>>2]),wt=yt*(at*+B[S+(Y<<3)+4>>2]);break}if(at+yt<=1){B[m+(v<<3)>>2]=(Pt=1-at-yt)*+B[S+(r<<3)>>2]+at*+B[S+((Y=r+1|0)<<3)>>2]+yt*+B[S+((L=r+H|0)<<3)>>2],Pt=Pt*+B[S+(r<<3)+4>>2]+at*+B[S+(Y<<3)+4>>2],wt=yt*+B[S+(L<<3)+4>>2];break}B[m+(v<<3)>>2]=(ae=at+-1+yt)*+B[S+((e=1+(Y=r+H|0)|0)<<3)>>2]+(Pt=1-at)*+B[S+(Y<<3)>>2]+(wt=1-yt)*+B[S+((L=r+1|0)<<3)>>2],Pt=ae*+B[S+(e<<3)+4>>2]+Pt*+B[S+(Y<<3)+4>>2],wt*=+B[S+(L<<3)+4>>2];break}if(X||(dt=+B[S>>2],ht=+B[x>>2],st=+B[y>>2],zt=+B[u>>2],rt=+B[l>>2],jt=(Ut=+B[g>>2])-(Ht=+B[p>>2]),X=1,zt=.25*(dt+ht+st+zt)-.5*(dt=zt-dt),d=.25*(rt+Ut+Ht+(d=+B[M>>2]))-.5*(rt=d-rt),Ht=.5*((Kt=ht-st)+dt),Ut=.5*(jt+rt),Kt=.5*(dt-Kt),jt=.5*(rt-jt)),!(Pt<3&-2<n&n<3&-2<Pt)){B[m+(v<<3)>>2]=Pt*Kt+(n*Ht+zt),Pt*=jt,wt=n*Ut+d;break}do{if(n<=0){if(Pt<=0){nt=zt-(kt=2*Kt),vt=d-(Mt=2*jt),kt=(Ot=zt-2*Ht)-kt,Mt=(Tt=d-2*Ut)-Mt,Yt=+B[S>>2],Gt=+B[l>>2],at=.5*(2+n),yt=.5*(Pt+2);break}if(Y){Mt=(yt=0|(Y=(0|O)==(0|(Y=~~ae))?b:Y))/it,at=(0|(L=Y+1|0))/it,Y=0|ie(Y,H),L=0|ie(L,H),nt=+B[S+(Y<<3)>>2],vt=+B[S+(Y<<3)+4>>2],kt=Mt*Kt+(Ot=zt-2*Ht),Mt=Mt*jt+(Tt=d-2*Ut),Yt=+B[S+(L<<3)>>2],Gt=+B[S+(L<<3)+4>>2],Ot=at*Kt+Ot,Tt=at*jt+Tt,at=.5*(2+n),yt=ae-yt;break}nt=+B[y>>2],vt=+B[p>>2],kt=Kt+(Ot=zt-2*Ht),Mt=jt+(Tt=d-2*Ut),Yt=(yt=3*Kt)+zt,Gt=(at=3*jt)+d,Ot=yt+Ot,Tt=at+Tt,at=.5*(2+n),yt=.5*(Pt+-1);break}if(r=Pt<=0,e){if(r){nt=(vt=(0|(Y=(L=(0|z)==(0|(L=~~wt))?P:L)+1|0))/U)*Ht+zt-(kt=2*Kt),vt=vt*Ut+d-(Mt=2*jt),kt=(Yt=(at=0|L)/U)*Ht+zt-kt,Mt=Yt*Ut+d-Mt,Yt=+B[S+(Y<<3)>>2],Gt=+B[S+(Y<<3)+4>>2],Ot=+B[S+(L<<3)>>2],Tt=+B[S+(L<<3)+4>>2],at=wt-at,yt=.5*(Pt+2);break}if(Y){t[ft>>2]=v,Xt[ft+8>>3]=n,Xt[ft+16>>3]=Pt,pt(0,865,ft);break}at=0|(L=(0|z)==(0|(L=~~wt))?P:L),Gt=(0|(Y=L+1|0))/U,nt=+B[S+((Y=Y+k|0)<<3)>>2],vt=+B[S+(Y<<3)+4>>2],kt=+B[S+((L=L+k|0)<<3)>>2],Mt=+B[S+(L<<3)+4>>2],Yt=(Ot=3*Kt)+(Gt*Ht+zt),Gt=(yt=3*jt)+(Gt*Ut+d),Ot+=(Tt=at/U)*Ht+zt,Tt=yt+(Tt*Ut+d),at=wt-at,yt=.5*(Pt+-1);break}if(r){nt=(Yt=3*Ht+zt)-(kt=2*Kt),vt=(Gt=3*Ut+d)-(Mt=2*jt),kt=Ht+zt-kt,Mt=Ut+d-Mt,Ot=+B[x>>2],Tt=+B[g>>2],at=.5*(n-1),yt=.5*(Pt+2);break}if(Y){vt=(yt=0|(Y=(0|O)==(0|(Y=~~ae))?b:Y))/it,Ot=(0|(L=Y+1|0))/it,Y=(0|ie(Y,H))+z|0,L=(0|ie(L,H))+z|0,nt=vt*Kt+(Yt=3*Ht+zt),vt=vt*jt+(Gt=3*Ut+d),kt=+B[S+(Y<<3)>>2],Mt=+B[S+(Y<<3)+4>>2],Yt=Ot*Kt+Yt,Gt=Ot*jt+Gt,Ot=+B[S+(L<<3)>>2],Tt=+B[S+(L<<3)+4>>2],at=.5*(n-1),yt=ae-yt;break}nt=Kt+(Yt=3*Ht+zt),vt=jt+(Gt=3*Ut+d),kt=+B[u>>2],Mt=+B[M>>2],Yt=(Ot=3*Kt)+Yt,Gt=(Tt=3*jt)+Gt,Ot+=Ht+zt,Tt+=Ut+d,at=.5*(n-1),yt=.5*(Pt+-1);break}while(0);if(at+yt<=1){B[m+(v<<3)>>2]=kt+(nt-kt)*at+(Ot-kt)*yt,Pt=Mt+(vt-Mt)*at,wt=(Tt-Mt)*yt;break}B[m+(v<<3)>>2]=Yt+(Ot-Yt)*(Pt=1-at)+(nt-Yt)*(wt=1-yt),Pt=Gt+(Tt-Gt)*Pt,wt*=vt-Gt;break}while(0)}while(B[m+(v<<3)+4>>2]=Pt+wt,(0|(v=v+1|0))!=(0|f));C=tt}},function(e,r,a,m,f){a|=0,m|=0,f|=0;var n,x,y,u,l,g,p,M;if(r=0|t[(0|t[(e|=0)+308>>2])+((r|=0)<<5)+16>>2],g=3.1415927410125732*(+B[(0|t[e+168>>2])+(12*r|0)+4>>2]+ +B[(0|t[e+284>>2])+(r<<2)>>2])/180,l=+Li(g),g=+Ge(g),x=(g*=n=+B[(0|t[e+272>>2])+(r<<2)>>2])*(p=0|t[(0|t[e+288>>2])+(r<<2)>>2]?-1:1),n=(l*=n)*(M=0|t[(0|t[e+292>>2])+(r<<2)>>2]?-1:1),p*=l,M*=g,g=+B[(0|t[e+276>>2])+(r<<2)>>2],l=+B[(0|t[e+280>>2])+(r<<2)>>2],!((0|f)<=0))for(r=0;u=+B[a+(r<<3)>>2],y=+B[a+(r<<3)+4>>2],B[m+(r<<3)>>2]=x*u-n*y+g,B[m+(r<<3)+4>>2]=p*u+M*y+l,(0|(r=r+1|0))!=(0|f););}];return{___errno_location:function(){return 4104},___muldi3:vr,___udivdi3:Br,_bitshift64Lshr:X0,_bitshift64Shl:un,_csmFree:function(e){z0(e|=0)},_csmGetDrawableConstantFlags:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[888+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2312,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableCount:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+332>>2],C=r,0|a):(t[a>>2]=2274,t[a+4>>2]=1827,pt(0,1664,a),C=r,-1)},_csmGetDrawableDrawOrders:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+440>>2],C=r,0|a):(t[a>>2]=2396,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableDynamicFlags:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+432>>2],C=r,0|a):(t[a>>2]=2340,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableIds:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[832+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2294,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableIndexCounts:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[904+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2598,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableIndices:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[840+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2624,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableMaskCounts:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[912+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2472,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableMasks:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[844+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2497,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableMultiplyColors:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+452>>2],C=r,0|a):(t[a>>2]=2646,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableOpacities:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+448>>2],C=r,0|a):(t[a>>2]=2448,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableParentPartIndices:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[876+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2702,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableRenderOrders:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+436>>2],C=r,0|a):(t[a>>2]=2421,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableScreenColors:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+456>>2],C=r,0|a):(t[a>>2]=2675,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableTextureIndices:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[884+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2367,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableVertexCounts:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[892+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2517,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableVertexPositions:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+444>>2],C=r,0|a):(t[a>>2]=2544,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableVertexUvs:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[836+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2574,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetLatestMocVersion:function(){return 4},_csmGetMocVersion:function(e,r){r|=0;var a=C;return r=C=C+63&-64,C=C+16|0,(e|=0)?(e=0|J2(e),C=a,0|e):(t[r>>2]=1681,t[r+4>>2]=1698,pt(0,1664,r),C=a,(e=0)|e)},_csmGetParameterCount:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+540>>2],C=r,0|a):(t[a>>2]=2026,t[a+4>>2]=1827,pt(0,1664,a),C=r,-1)},_csmGetParameterDefaultValues:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[932+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2145,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetParameterIds:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[916+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2047,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetParameterKeyCounts:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+616>>2],C=r,0|a):(t[a>>2]=2763,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetParameterKeyValues:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+612>>2],C=r,0|a):(t[a>>2]=2788,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetParameterMaximumValues:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[924+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2116,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetParameterMinimumValues:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[928+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2087,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetParameterTypes:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+548>>2],C=r,0|a):(t[a>>2]=2066,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetParameterValues:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+552>>2],C=r,0|a):(t[a>>2]=2174,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetPartCount:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+4>>2],C=r,0|a):(t[a>>2]=2196,t[a+4>>2]=1827,pt(0,1664,a),C=r,-1)},_csmGetPartIds:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[712+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2212,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetPartOpacities:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+52>>2],C=r,0|a):(t[a>>2]=2226,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetPartParentPartIndices:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[740+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2246,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetSizeofModel:Ha,_csmGetVersion:function(){return 67239940},_csmHasMocConsistency:function(e,r){r|=0;var a,n=0,m=0,f=C,n=C=C+63&-64;return C=C+32|0,m=n+16|0,a=n+8|0,(e|=0)?((n=e)+63&-64|0)!=(0|n)?(t[a>>2]=1717,t[4+a>>2]=1738,pt(0,1664,a),C=f,(m=0)|m):0|r&&(r+63&-64|0)==(0|r)?(m=0|W2(e,r),C=f,0|m):(t[m>>2]=1717,t[m+4>>2]=1770,pt(0,1664,m),C=f,(m=0)|m):(t[n>>2]=1717,t[n+4>>2]=1698,pt(0,1664,n),C=f,(m=0)|m)},_csmInitializeAmountOfMemory:function(e){var r=C,a=C=C+63&-64;C=C+16|0,Pr(a,64,e|=0),z0(0|t[a>>2]),C=r},_csmInitializeModelInPlace:Wa,_csmMalloc:function(e){return 0|Mr(e|=0)},_csmMallocMoc:function(e){var r=C,a=C=C+63&-64;return C=C+16|0,Pr(a,64,e|=0),C=r,0|t[a>>2]},_csmMallocModelAndInitialize:function(e){var m=0,r=0,a=C,m=C=C+63&-64;return C=C+16|0,0|(e|=0)&&!(0|Pr(m,16,r=0|Ha(e)))?(m=0|Wa(e,e=0|t[m>>2],r))||(z0(e),m=0):m=0,C=a,0|m},_csmReadCanvasInfo:function(e,r,a,m){r|=0,a|=0,m|=0;var f,n,x=0,y=C,u=C=C+63&-64;if(C=C+32|0,f=24+u|0,x=16+u|0,n=8+u|0,e|=0)return r?a?m?(x=0|t[708+(0|t[e>>2])>>2],t[r>>2]=t[x+12>>2],t[r+4>>2]=t[x+16>>2],t[a>>2]=t[x+4>>2],t[a+4>>2]=t[x+8>>2],t[m>>2]=t[x>>2]):(t[f>>2]=1809,t[4+f>>2]=1903,pt(0,1664,f)):(t[x>>2]=1809,t[x+4>>2]=1874,pt(0,1664,x)):(t[n>>2]=1809,t[4+n>>2]=1847,pt(0,1664,n)),void(C=y);t[u>>2]=1809,t[4+u>>2]=1827,pt(0,1664,u),C=y},_csmResetDrawableDynamicFlags:function(e){var r=C,a=C=C+63&-64;C=C+16|0,(e|=0)?t[e+428>>2]=1:(t[a>>2]=2734,t[4+a>>2]=1827,pt(0,1664,a)),C=r},_csmReviveMocInPlace:function(e,r){r|=0;var a,n=0,m=0,f=C,n=C=C+63&-64;return C=C+32|0,m=n+16|0,a=n+8|0,(e|=0)?((n=e)+63&-64|0)!=(0|n)?(t[a>>2]=1789,t[4+a>>2]=1738,pt(0,1664,a),C=f,(m=0)|m):0|r&&(r+63&-64|0)==(0|r)?(m=0|Z2(e),C=f,0|m):(t[m>>2]=1789,t[m+4>>2]=1770,pt(0,1664,m),C=f,(m=0)|m):(t[n>>2]=1789,t[n+4>>2]=1698,pt(0,1664,n),C=f,(m=0)|m)},_csmSetLogFunction:function(e){t[1008]=e|=0},_csmUpdateModel:function(e){var r=C,a=C=C+63&-64;C=C+16|0,(e|=0)?Za(e):(t[a>>2]=2011,t[4+a>>2]=1827,pt(0,1664,a)),C=r},_emscripten_get_sbrk_ptr:function(){return 4624},_emscripten_replace_memory:function(e){return J=new Int8Array(e),Rt=new Uint8Array(e),qt=new Int16Array(e),ce=new Uint16Array(e),t=new Int32Array(e),B=new Float32Array(e),Xt=new Float64Array(e),!0},_free:z0,_i64Add:h0,_i64Subtract:G0,_malloc:Mr,_memcpy:Ve,_memmove:hn,_memset:Pe,dynCall_ii:function(e,r){return 0|yl[3&(e|=0)](0|(r|=0))},dynCall_iiii:function(e,r,a,m){return 0|Y0[3&(e|=0)](0|(r|=0),0|(a|=0),0|(m|=0))},dynCall_iiiii:function(e,r,a,m,f){return 0|Al[3&(e|=0)](0|(r|=0),0|(a|=0),0|(m|=0),0|(f|=0))},dynCall_vi:function(e,r){mn[1&(e|=0)](0|(r|=0))},dynCall_vii:function(e,r,a){_n[3&(e|=0)](0|(r|=0),0|(a|=0))},dynCall_viiiii:function(e,r,a,m,f,n){Ci[3&(e|=0)](0|(r|=0),0|(a|=0),0|(m|=0),0|(f|=0),0|(n|=0))},establishStackSpace:function(e,r){C=e|=0},stackAlloc:function(e){var r=C;return C=15+(C+(e|=0)|0)&-16,0|r},stackRestore:function(e){C=0|e},stackSave:function(){return 0|C}}}({Math,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Float32Array,Float64Array},{a:a0,b:function(j){qe=j},c:function(){return qe},d:function(j,$){return he[j]($)},e:function(j,$,ot,J){return he[j]($,ot,J)},f:function(j,$,ot,J,qt){return he[j]($,ot,J,qt)},g:function(j,$){he[j]($)},h:function(j,$,ot){he[j]($,ot)},i:function(j,$,ot,J,qt,t){he[j]($,ot,J,qt,t)},j:function(){return Oa.apply(null,arguments)},k:Ua,l:function(j,$,ot){li.set(li.subarray($,$+ot),j)},m:function(j){if(2130706432<j)return!1;for(var $=Math.max(Ua(),16777216);$<j;)$=$<=536870912?Ta(2*$):Math.min(Ta((3*$+2147483648)/4),2130706432);return!!Na($)},n:Oa,o:function(){a0("OOM")},p:function(j){return j},q:Da,r:Na,s:function(){var j=A._fflush;j&&j(0),yr[1].length&&Ar(1,10),yr[2].length&&Ar(2,10)},t:La,u:function(){var j=La();return A.extraStackTrace&&(j+=`
`+A.extraStackTrace()),Da(j)},v:4816},Di),b2=(A.___errno_location=ut.___errno_location,A.___muldi3=ut.___muldi3,A.___udivdi3=ut.___udivdi3,A._bitshift64Lshr=ut._bitshift64Lshr,A._bitshift64Shl=ut._bitshift64Shl,A._csmFree=ut._csmFree,A._csmGetDrawableConstantFlags=ut._csmGetDrawableConstantFlags,A._csmGetDrawableCount=ut._csmGetDrawableCount,A._csmGetDrawableDrawOrders=ut._csmGetDrawableDrawOrders,A._csmGetDrawableDynamicFlags=ut._csmGetDrawableDynamicFlags,A._csmGetDrawableIds=ut._csmGetDrawableIds,A._csmGetDrawableIndexCounts=ut._csmGetDrawableIndexCounts,A._csmGetDrawableIndices=ut._csmGetDrawableIndices,A._csmGetDrawableMaskCounts=ut._csmGetDrawableMaskCounts,A._csmGetDrawableMasks=ut._csmGetDrawableMasks,A._csmGetDrawableMultiplyColors=ut._csmGetDrawableMultiplyColors,A._csmGetDrawableOpacities=ut._csmGetDrawableOpacities,A._csmGetDrawableParentPartIndices=ut._csmGetDrawableParentPartIndices,A._csmGetDrawableRenderOrders=ut._csmGetDrawableRenderOrders,A._csmGetDrawableScreenColors=ut._csmGetDrawableScreenColors,A._csmGetDrawableTextureIndices=ut._csmGetDrawableTextureIndices,A._csmGetDrawableVertexCounts=ut._csmGetDrawableVertexCounts,A._csmGetDrawableVertexPositions=ut._csmGetDrawableVertexPositions,A._csmGetDrawableVertexUvs=ut._csmGetDrawableVertexUvs,A._csmGetLatestMocVersion=ut._csmGetLatestMocVersion,A._csmGetMocVersion=ut._csmGetMocVersion,A._csmGetParameterCount=ut._csmGetParameterCount,A._csmGetParameterDefaultValues=ut._csmGetParameterDefaultValues,A._csmGetParameterIds=ut._csmGetParameterIds,A._csmGetParameterKeyCounts=ut._csmGetParameterKeyCounts,A._csmGetParameterKeyValues=ut._csmGetParameterKeyValues,A._csmGetParameterMaximumValues=ut._csmGetParameterMaximumValues,A._csmGetParameterMinimumValues=ut._csmGetParameterMinimumValues,A._csmGetParameterTypes=ut._csmGetParameterTypes,A._csmGetParameterValues=ut._csmGetParameterValues,A._csmGetPartCount=ut._csmGetPartCount,A._csmGetPartIds=ut._csmGetPartIds,A._csmGetPartOpacities=ut._csmGetPartOpacities,A._csmGetPartParentPartIndices=ut._csmGetPartParentPartIndices,A._csmGetSizeofModel=ut._csmGetSizeofModel,A._csmGetVersion=ut._csmGetVersion,A._csmHasMocConsistency=ut._csmHasMocConsistency,A._csmInitializeAmountOfMemory=ut._csmInitializeAmountOfMemory,A._csmInitializeModelInPlace=ut._csmInitializeModelInPlace,A._csmMalloc=ut._csmMalloc,A._csmMallocMoc=ut._csmMallocMoc,A._csmMallocModelAndInitialize=ut._csmMallocModelAndInitialize,A._csmReadCanvasInfo=ut._csmReadCanvasInfo,A._csmResetDrawableDynamicFlags=ut._csmResetDrawableDynamicFlags,A._csmReviveMocInPlace=ut._csmReviveMocInPlace,A._csmSetLogFunction=ut._csmSetLogFunction,A._csmUpdateModel=ut._csmUpdateModel,A._emscripten_get_sbrk_ptr=ut._emscripten_get_sbrk_ptr,A._emscripten_replace_memory=ut._emscripten_replace_memory),Ga=(A._free=ut._free,A._i64Add=ut._i64Add,A._i64Subtract=ut._i64Subtract,A._malloc=ut._malloc,A._memcpy=ut._memcpy,A._memmove=ut._memmove,A._memset=ut._memset,A.establishStackSpace=ut.establishStackSpace,A.stackAlloc=ut.stackAlloc),E2=A.stackRestore=ut.stackRestore,D2=A.stackSave=ut.stackSave;function Sr(){function j(){if(!o0&&(o0=!0,!i0)){if(D0(V2),D0(R2),A.onRuntimeInitialized&&A.onRuntimeInitialized(),A.postRun)for(typeof A.postRun=="function"&&(A.postRun=[A.postRun]);A.postRun.length;){var $=A.postRun.shift();Ea.unshift($)}D0(Ea)}}if(!(0<yi)){if(A.preRun)for(typeof A.preRun=="function"&&(A.preRun=[A.preRun]);A.preRun.length;)(function(){var $=A.preRun.shift();ba.unshift($)})();D0(ba),0<yi||(A.setStatus?(A.setStatus("Running..."),setTimeout(function(){setTimeout(function(){A.setStatus("")},1),j()},1)):j())}}if(A.dynCall_ii=ut.dynCall_ii,A.dynCall_iiii=ut.dynCall_iiii,A.dynCall_iiiii=ut.dynCall_iiiii,A.dynCall_vi=ut.dynCall_vi,A.dynCall_vii=ut.dynCall_vii,A.dynCall_viiiii=ut.dynCall_viiiii,A.asm=ut,A.ccall=function(j,$,ot,J){var qt={string:function(Xt){var fe=0;if(Xt!=null&&Xt!==0){var ze=1+(Xt.length<<2),xe=fe=Ga(ze),Ge=li;if(0<ze){for(var ze=xe+ze-1,Li=0;Li<Xt.length;++Li){var ye=Xt.charCodeAt(Li);if((ye=55296<=ye&&ye<=57343?65536+((1023&ye)<<10)|1023&Xt.charCodeAt(++Li):ye)<=127){if(ze<=xe)break;Ge[xe++]=ye}else{if(ye<=2047){if(ze<=xe+1)break;Ge[xe++]=192|ye>>6}else{if(ye<=65535){if(ze<=xe+2)break;Ge[xe++]=224|ye>>12}else{if(ze<=xe+3)break;Ge[xe++]=240|ye>>18,Ge[xe++]=128|ye>>12&63}Ge[xe++]=128|ye>>6&63}Ge[xe++]=128|63&ye}}Ge[xe]=0}}return fe},array:function(Xt){var fe=Ga(Xt.length);return E0.set(Xt,fe),fe}},t=function(Xt){var fe=A["_"+Xt];return pi(fe,"Cannot call unknown function "+Xt+", make sure it is exported"),fe}(j),Rt=[];if(j=0,J)for(var ce=0;ce<J.length;ce++){var B=qt[ot[ce]];B?(j===0&&(j=D2()),Rt[ce]=B(J[ce])):Rt[ce]=J[ce]}return ot=function(Xt){return $==="string"?Ra(Xt):$==="boolean"?!!Xt:Xt}(ot=t.apply(null,Rt)),j!==0&&E2(j),ot},A.UTF8ToString=Ra,A.addFunction=function(j){for(var $=0;$<1;$++)if(!he[$])return he[$]=j,1+$;throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},De&&((String.prototype.startsWith?De.startsWith(n0):De.indexOf(n0)===0)||(_t=De,De=A.locateFile?A.locateFile(_t,Et):Et+_t),mt||ct?(ut=gt(De),li.set(ut,8)):(yi++,A.monitorRunDependencies&&A.monitorRunDependencies(yi),L0=function(j){j.byteLength&&(j=new Uint8Array(j)),li.set(j,8),A.memoryInitializerRequest&&delete A.memoryInitializerRequest.response,yi--,A.monitorRunDependencies&&A.monitorRunDependencies(yi),yi==0&&(pr!==null&&(clearInterval(pr),pr=null),s0&&(j=s0,s0=null,j()))},xr=function(){Z(function(){throw"could not load memory initializer "+De})},(Et=ui(De))?L0(Et.buffer):A.memoryInitializerRequest?(_t=function(){var j=A.memoryInitializerRequest,$=j.response;if(j.status!==200&&j.status!==0){if(!($=ui(A.memoryInitializerRequestURL)))return console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+j.status+", retrying "+De),void xr();$=$.buffer}L0($)},A.memoryInitializerRequest.response?setTimeout(_t,0):A.memoryInitializerRequest.addEventListener("load",_t)):xr())),A.then=function(j){var $;return o0?j(A):($=A.onRuntimeInitialized,A.onRuntimeInitialized=function(){$&&$(),j(A)}),A},s0=function j(){o0||Sr(),o0||(s0=j)},A.run=Sr,A.preInit)for(typeof A.preInit=="function"&&(A.preInit=[A.preInit]);0<A.preInit.length;)A.preInit.pop()();return Sr(),V}),D=(typeof exports=="object"&&typeof module=="object"?module.exports=N:typeof define=="function"&&define.amd?define([],function(){return N}):typeof exports=="object"&&(exports._em_module=N),N())})(ne=ne||{});var W0=(c=>(c[c.Max=2]="Max",c[c.Min=.8]="Min",c))(W0||{}),m0=(c=>(c[c.Left=-1]="Left",c[c.Right=1]="Right",c[c.Bottom=-1]="Bottom",c[c.Top=1]="Top",c))(m0||{}),Gi=(c=>(c[c.Left=-2]="Left",c[c.Right=2]="Right",c[c.Bottom=-2]="Bottom",c[c.Top=2]="Top",c))(Gi||{}),ki=(c=>(c.Idle="Idle",c.TapBody="TapBody",c.TapLeft="TapLeft",c.TapRight="TapRight",c.Tap="Tap",c))(ki||{}),Qt=(c=>(c.Head="Head",c.Body="Body",c.Left="Left",c.Right="Right",c.Other="Other",c))(Qt||{}),je=(c=>(c[c.None=0]="None",c[c.Idle=1]="Idle",c[c.Normal=2]="Normal",c[c.Force=3]="Force",c))(je||{});const ci=globalThis.document||{},me={canvas:{width:280,height:360},scale:1,debug:!1,target:ci.body,source:{path:"",models:[]},cubismCorePath:"/live2d/core/live2dCubismCore.min.js"},Rr=c=>{me.target=ci.body,Object.keys(c).forEach(i=>{me.hasOwnProperty(i)&&(me[i]=c[i])})};class At{constructor(i=0){i<1?(this._ptr=[],this._capacity=0,this._size=0):(this._ptr=new Array(i),this._capacity=i,this._size=0)}at(i){return this._ptr[i]}set(i,s){this._ptr[i]=s}get(i=0){const s=new Array;for(let o=i;o<this._size;o++)s.push(this._ptr[o]);return s}pushBack(i){this._size>=this._capacity&&this.prepareCapacity(this._capacity==0?At.s_defaultSize:this._capacity*2),this._ptr[this._size++]=i}clear(){this._ptr.length=0,this._size=0}getSize(){return this._size}assign(i,s){this._size<i&&this.prepareCapacity(i);for(let _=0;_<i;_++)this._ptr[_]=s;this._size=i}resize(i,s=null){this.updateSize(i,s,!0)}updateSize(i,s=null,o=!0){if(this._size<i)if(this.prepareCapacity(i),o)for(let w=this._size;w<i;w++)typeof s=="function"?this._ptr[w]=JSON.parse(JSON.stringify(new s)):this._ptr[w]=s;else for(let w=this._size;w<i;w++)this._ptr[w]=s;else{const w=this._size-i;this._ptr.splice(this._size-w,w)}this._size=i}insert(i,s,o){let _=i._index;const w=s._index,T=o._index,I=T-w;this.prepareCapacity(this._size+I);const N=this._size-_;if(N>0)for(let D=0;D<N;D++)this._ptr.splice(_+D,0,null);for(let D=w;D<T;D++,_++)this._ptr[_]=s._vector._ptr[D];this._size=this._size+I}remove(i){return i<0||this._size<=i?!1:(this._ptr.splice(i,1),--this._size,!0)}erase(i){const s=i._index;return s<0||this._size<=s?i:(this._ptr.splice(s,1),--this._size,new _0(this,s))}prepareCapacity(i){i>this._capacity&&(this._capacity==0?(this._ptr=new Array(i),this._capacity=i):(this._ptr.length=i,this._capacity=i))}begin(){return this._size==0?this.end():new _0(this,0)}end(){return new _0(this,this._size)}getOffset(i){const s=new At;return s._ptr=this.get(i),s._size=this.get(i).length,s._capacity=this.get(i).length,s}_ptr;_size;_capacity;static s_defaultSize=10}let _0=class Vr{constructor(i,s){this._vector=i??null,this._index=s??0}set(i){return this._index=i._index,this._vector=i._vector,this}preIncrement(){return++this._index,this}preDecrement(){return--this._index,this}increment(){return new Vr(this._vector,this._index++)}decrement(){return new Vr(this._vector,this._index--)}ptr(){return this._vector._ptr[this._index]}substitution(i){return this._index=i._index,this._vector=i._vector,this}notEqual(i){return this._index!=i._index||this._vector!=i._vector}_index;_vector};var Tr;(c=>{c.csmVector=At,c.iterator=_0})(Tr||(Tr={}));class Be{append(i,s){return this.s+=s!==void 0?i.substr(0,s):i,this}expansion(i,s){for(let o=0;o<i;o++)this.append(s);return this}getBytes(){return encodeURIComponent(this.s).replace(/%../g,"x").length}getLength(){return this.s.length}isLess(i){return this.s<i.s}isGreat(i){return this.s>i.s}isEqual(i){return this.s==i}isEmpty(){return this.s.length==0}constructor(i){this.s=i}s}var Fr;(c=>{c.csmString=Be})(Fr||(Fr={}));class Xi{getString(){return this._id}constructor(i){if(typeof i=="string"){this._id=new Be(i);return}this._id=i}isEqual(i){return typeof i=="string"?this._id.isEqual(i):i instanceof Be?this._id.isEqual(i.s):i instanceof Xi?this._id.isEqual(i._id.s):!1}isNotEqual(i){return typeof i=="string"?!this._id.isEqual(i):i instanceof Be?!this._id.isEqual(i.s):i instanceof Xi?!this._id.isEqual(i._id.s):!1}_id}var br;(c=>{c.CubismId=Xi})(br||(br={}));class Er{constructor(){this._ids=new At}release(){for(let i=0;i<this._ids.getSize();++i)this._ids.set(i,void 0);this._ids=null}registerIds(i){for(let s=0;s<i.length;s++)this.registerId(i[s])}registerId(i){let s=null;if(typeof i=="string"){if((s=this.findId(i))!=null)return s;s=new Xi(i),this._ids.pushBack(s)}else return this.registerId(i.s);return s}getId(i){return this.registerId(i)}isExist(i){return typeof i=="string"?this.findId(i)!=null:this.isExist(i.s)}findId(i){for(let s=0;s<this._ids.getSize();++s)if(this._ids.at(s).getString().isEqual(i))return this._ids.at(s);return null}_ids}var Dr;(c=>{c.CubismIdManager=Er})(Dr||(Dr={}));class oe{constructor(){this._tr=new Float32Array(16),this.loadIdentity()}static multiply(i,s,o){const _=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),w=4;for(let T=0;T<w;++T)for(let I=0;I<w;++I)for(let N=0;N<w;++N)_[I+T*4]+=i[N+T*4]*s[I+N*4];for(let T=0;T<16;++T)o[T]=_[T]}loadIdentity(){const i=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(i)}setMatrix(i){for(let s=0;s<16;++s)this._tr[s]=i[s]}getArray(){return this._tr}getScaleX(){return this._tr[0]}getScaleY(){return this._tr[5]}getTranslateX(){return this._tr[12]}getTranslateY(){return this._tr[13]}transformX(i){return this._tr[0]*i+this._tr[12]}transformY(i){return this._tr[5]*i+this._tr[13]}invertTransformX(i){return(i-this._tr[12])/this._tr[0]}invertTransformY(i){return(i-this._tr[13])/this._tr[5]}translateRelative(i,s){const o=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,i,s,0,1]);oe.multiply(o,this._tr,this._tr)}translate(i,s){this._tr[12]=i,this._tr[13]=s}translateX(i){this._tr[12]=i}translateY(i){this._tr[13]=i}scaleRelative(i,s){const o=new Float32Array([i,0,0,0,0,s,0,0,0,0,1,0,0,0,0,1]);oe.multiply(o,this._tr,this._tr)}scale(i,s){this._tr[0]=i,this._tr[5]=s}multiplyByMatrix(i){oe.multiply(i.getArray(),this._tr,this._tr)}clone(){const i=new oe;for(let s=0;s<this._tr.length;s++)i._tr[s]=this._tr[s];return i}_tr}var Lr;(c=>{c.CubismMatrix44=oe})(Lr||(Lr={}));class p0{static create(){return null}static delete(i){}initialize(i){this._model=i}drawModel(){this.getModel()!=null&&(this.saveProfile(),this.doDrawModel(),this.restoreProfile())}setMvpMatrix(i){this._mvpMatrix4x4.setMatrix(i.getArray())}getMvpMatrix(){return this._mvpMatrix4x4}setModelColor(i,s,o,_){i<0?i=0:i>1&&(i=1),s<0?s=0:s>1&&(s=1),o<0?o=0:o>1&&(o=1),_<0?_=0:_>1&&(_=1),this._modelColor.R=i,this._modelColor.G=s,this._modelColor.B=o,this._modelColor.A=_}getModelColor(){return JSON.parse(JSON.stringify(this._modelColor))}setIsPremultipliedAlpha(i){this._isPremultipliedAlpha=i}isPremultipliedAlpha(){return this._isPremultipliedAlpha}setIsCulling(i){this._isCulling=i}isCulling(){return this._isCulling}setAnisotropy(i){this._anisotropy=i}getAnisotropy(){return this._anisotropy}getModel(){return this._model}useHighPrecisionMask(i){this._useHighPrecisionMask=i}isUsingHighPrecisionMask(){return this._useHighPrecisionMask}constructor(){this._isCulling=!1,this._isPremultipliedAlpha=!1,this._anisotropy=0,this._model=null,this._modelColor=new He,this._useHighPrecisionMask=!1,this._mvpMatrix4x4=new oe,this._mvpMatrix4x4.loadIdentity()}static staticRelease;_mvpMatrix4x4;_modelColor;_isCulling;_isPremultipliedAlpha;_anisotropy;_model;_useHighPrecisionMask}var Oe=(c=>(c[c.CubismBlendMode_Normal=0]="CubismBlendMode_Normal",c[c.CubismBlendMode_Additive=1]="CubismBlendMode_Additive",c[c.CubismBlendMode_Multiplicative=2]="CubismBlendMode_Multiplicative",c))(Oe||{});class He{constructor(){this.R=1,this.G=1,this.B=1,this.A=1}R;G;B;A}var Or;(c=>{c.CubismBlendMode=Oe,c.CubismRenderer=p0,c.CubismTextureColor=He})(Or||(Or={}));const yn=(c,i,s)=>{Ur.print(c,"[CSM]"+i,s)},y0=(c,i,s)=>{yn(c,i+`
`,s)},Ue=c=>{console.assert(c)};let Yi,We,ei,Ce;Yi=(c,...i)=>{y0(Vi.LogLevel_Debug,"[D]"+c,i)},We=(c,...i)=>{y0(Vi.LogLevel_Info,"[I]"+c,i)},ei=(c,...i)=>{y0(Vi.LogLevel_Warning,"[W]"+c,i)},Ce=(c,...i)=>{y0(Vi.LogLevel_Error,"[E]"+c,i)};class Ur{static print(i,s,o){if(i<ee.getLoggingLevel())return;const _=ee.coreLogFunction;if(!_)return;const w=s.replace(/\{(\d+)\}/g,(T,I)=>o[I]);_(w)}static dumpBytes(i,s,o){for(let _=0;_<o;_++)_%16==0&&_>0?this.print(i,`
`):_%8==0&&_>0&&this.print(i,"  "),this.print(i,"{0} ",[s[_]&255]);this.print(i,`
`)}constructor(){}}var Nr;(c=>{c.CubismDebug=Ur})(Nr||(Nr={}));class zr{constructor(i,s){this.first=i??null,this.second=s??null}first;second}class we{constructor(i){i!=null?i<1?(this._keyValues=[],this._dummyValue=null,this._size=0):(this._keyValues=new Array(i),this._size=i):(this._keyValues=[],this._dummyValue=null,this._size=0)}release(){this.clear()}appendKey(i){this.prepareCapacity(this._size+1,!1),this._keyValues[this._size]=new zr(i),this._size+=1}getValue(i){let s=-1;for(let o=0;o<this._size;o++)if(this._keyValues[o].first==i){s=o;break}return s>=0?this._keyValues[s].second:(this.appendKey(i),this._keyValues[this._size-1].second)}setValue(i,s){let o=-1;for(let _=0;_<this._size;_++)if(this._keyValues[_].first==i){o=_;break}o>=0?this._keyValues[o].second=s:(this.appendKey(i),this._keyValues[this._size-1].second=s)}isExist(i){for(let s=0;s<this._size;s++)if(this._keyValues[s].first==i)return!0;return!1}clear(){this._keyValues=void 0,this._keyValues=null,this._keyValues=[],this._size=0}getSize(){return this._size}prepareCapacity(i,s){i>this._keyValues.length&&(this._keyValues.length==0?(!s&&i<we.DefaultSize&&(i=we.DefaultSize),this._keyValues.length=i):(!s&&i<this._keyValues.length*2&&(i=this._keyValues.length*2),this._keyValues.length=i))}begin(){return new fi(this,0)}end(){return new fi(this,this._size)}erase(i){const s=i._index;return s<0||this._size<=s?i:(this._keyValues.splice(s,1),--this._size,new fi(this,s))}dumpAsInt(){for(let i=0;i<this._size;i++)Yi("{0} ,",this._keyValues[i]),Yi(`
`)}static DefaultSize=10;_keyValues;_dummyValue;_size}class fi{constructor(i,s){this._map=i??new we,this._index=s??0}set(i){return this._index=i._index,this._map=i._map,this}preIncrement(){return++this._index,this}preDecrement(){return--this._index,this}increment(){return new fi(this._map,this._index++)}decrement(){const i=new fi(this._map,this._index);return this._map=i._map,this._index=i._index,this}ptr(){return this._map._keyValues[this._index]}notEqual(i){return this._index!=i._index||this._map!=i._map}_index;_map}var Gr;(c=>{c.csmMap=we,c.csmPair=zr,c.iterator=fi})(Gr||(Gr={}));class A0{static parseJsonObject(i,s){return Object.keys(i).forEach(o=>{typeof i[o]=="boolean"?s.put(o,new Te(i[o])):typeof i[o]=="string"?s.put(o,new Mi(i[o])):typeof i[o]=="number"?s.put(o,new S0(i[o])):i[o]instanceof Array?s.put(o,A0.parseJsonArray(i[o])):i[o]instanceof Object?s.put(o,A0.parseJsonObject(i[o],new vi)):i[o]==null?s.put(o,new Pi):s.put(o,i[o])}),s}static parseJsonArray(i){const s=new Z0;return Object.keys(i).forEach(o=>{const _=Number(o);if(typeof _=="number")typeof i[_]=="boolean"?s.add(new Te(i[_])):typeof i[_]=="string"?s.add(new Mi(i[_])):typeof i[_]=="number"?s.add(new S0(i[_])):i[o]instanceof Array?s.add(this.parseJsonArray(i[o])):i[o]instanceof Object?s.add(this.parseJsonObject(i[o],new vi)):i[o]==null?s.add(new Pi):s.add(i[o]);else if(i[o]instanceof Array)s.add(this.parseJsonArray(i[o]));else if(i[o]instanceof Object)s.add(this.parseJsonObject(i[o],new vi));else if(i[o]==null)s.add(new Pi);else for(let w=0;w<i[o].length;w++)s.add(i[o][w])}),s}}const x0="Error: type mismatch",An="Error: index out of bounds";let Ae=class Ye{constructor(){}getRawString(i,s){return this.getString(i,s)}toInt(i=0){return i}toFloat(i=0){return i}toBoolean(i=!1){return i}getSize(){return 0}getArray(i=null){return i}getVector(i=new At){return i}getMap(i){return i}getValueByIndex(i){return Ye.errorValue.setErrorNotForClientCall(x0)}getValueByString(i){return Ye.nullValue.setErrorNotForClientCall(x0)}getKeys(){return Ye.s_dummyKeys}isError(){return!1}isNull(){return!1}isBool(){return!1}isFloat(){return!1}isString(){return!1}isArray(){return!1}isMap(){return!1}equals(i){return!1}isStatic(){return!1}setErrorNotForClientCall(i){return ji.errorValue}static staticInitializeNotForClientCall(){Te.trueValue=new Te(!0),Te.falseValue=new Te(!1),Ye.errorValue=new ji("ERROR",!0),Ye.nullValue=new Pi,Ye.s_dummyKeys=new At}static staticReleaseNotForClientCall(){Te.trueValue=null,Te.falseValue=null,Ye.errorValue=null,Ye.nullValue=null,Ye.s_dummyKeys=null}_stringBuffer;static s_dummyKeys;static errorValue;static nullValue};class _e{constructor(i,s){this._error=null,this._lineCount=0,this._root=null,i!=null&&this.parseBytes(i,s,this._parseCallback)}static create(i,s){const o=new _e;return o.parseBytes(i,s,o._parseCallback)?o:(_e.delete(o),null)}static delete(i){}getRoot(){return this._root}static arrayBufferToString(i){const s=new Uint8Array(i);let o="";for(let _=0,w=s.length;_<w;++_)o+="%"+this.pad(s[_].toString(16));return o=decodeURIComponent(o),o}static pad(i){return i.length<2?"0"+i:i}parseBytes(i,s,o){const _=new Array(1),w=_e.arrayBufferToString(i);if(o==null?this._root=this.parseValue(w,s,0,_):this._root=o(JSON.parse(w),new vi),this._error){let T="\0";return T="Json parse error : @line "+(this._lineCount+1)+`
`,this._root=new Mi(T),We("{0}",this._root.getRawString()),!1}else if(this._root==null)return this._root=new ji(new Be(this._error),!1),!1;return!0}getParseError(){return this._error}checkEndOfFile(){return this._root.getArray()[1].equals("EOF")}parseValue(i,s,o,_){if(this._error)return null;let w=null,T=o,I;for(;T<s;T++)switch(i[T]){case"-":case".":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{const D=new Array(1);return I=xn(i.slice(T),D),_[0]=i.indexOf(D[0]),new S0(I)}case'"':return new Mi(this.parseString(i,s,T+1,_));case"[":return w=this.parseArray(i,s,T+1,_),w;case"{":return w=this.parseObject(i,s,T+1,_),w;case"n":return T+3<s?(w=new Pi,_[0]=T+4):this._error="parse null",w;case"t":return T+3<s?(w=Te.trueValue,_[0]=T+4):this._error="parse true",w;case"f":return T+4<s?(w=Te.falseValue,_[0]=T+5):this._error="illegal ',' position",w;case",":return this._error="illegal ',' position",null;case"]":return _[0]=T,null;case`
`:this._lineCount++}return this._error="illegal end of value",null}parseString(i,s,o,_){if(this._error)return null;let w=o,T,I;const N=new Be("");let D=o;for(;w<s;w++)switch(T=i[w],T){case'"':return _[0]=w+1,N.append(i.slice(D),w-D),N.s;case"//":if(w++,w-1>D&&N.append(i.slice(D),w-D),D=w+1,w<s)switch(I=i[w],I){case"\\":N.expansion(1,"\\");break;case'"':N.expansion(1,'"');break;case"/":N.expansion(1,"/");break;case"b":N.expansion(1,"\b");break;case"f":N.expansion(1,"\f");break;case"n":N.expansion(1,`
`);break;case"r":N.expansion(1,"\r");break;case"t":N.expansion(1,"	");break;case"u":this._error="parse string/unicord escape not supported";break}else this._error="parse string/escape error"}return this._error="parse string/illegal end",null}parseObject(i,s,o,_){if(this._error)return null;const w=new vi;let T="",I=o,N="";const D=Array(1);let V=!1;for(;I<s;I++){e:for(;I<s;I++)switch(N=i[I],N){case'"':if(T=this.parseString(i,s,I+1,D),this._error)return null;I=D[0],V=!0;break e;case"}":return _[0]=I+1,w;case":":this._error="illegal ':' position";break;case`
`:this._lineCount++}if(!V)return this._error="key not found",null;V=!1;e:for(;I<s;I++)switch(N=i[I],N){case":":V=!0,I++;break e;case"}":this._error="illegal '}' position";break;case`
`:this._lineCount++}if(!V)return this._error="':' not found",null;const A=this.parseValue(i,s,I,D);if(this._error)return null;I=D[0],w.put(T,A);e:for(;I<s;I++)switch(N=i[I],N){case",":break e;case"}":return _[0]=I+1,w;case`
`:this._lineCount++}}return this._error="illegal end of perseObject",null}parseArray(i,s,o,_){if(this._error)return null;let w=new Z0,T=o,I;const N=new Array(1);for(;T<s;T++){const D=this.parseValue(i,s,T,N);if(this._error)return null;T=N[0],D&&w.add(D);e:for(;T<s;T++)switch(I=i[T],I){case",":break e;case"]":return _[0]=T+1,w;case`
`:++this._lineCount}}return w=void 0,this._error="illegal end of parseObject",null}_parseCallback=A0.parseJsonObject;_error;_lineCount;_root}class S0 extends Ae{constructor(i){super(),this._value=i}isFloat(){return!0}getString(i,s){const o="\0";return this._value=parseFloat(o),this._stringBuffer=o,this._stringBuffer}toInt(i=0){return parseInt(this._value.toString())}toFloat(i=0){return this._value}equals(i){return typeof i=="number"?Math.round(i)?!1:i==this._value:!1}_value}class Te extends Ae{isBool(){return!0}toBoolean(i=!1){return this._boolValue}getString(i,s){return this._stringBuffer=this._boolValue?"true":"false",this._stringBuffer}equals(i){return typeof i=="boolean"?i==this._boolValue:!1}isStatic(){return!0}constructor(i){super(),this._boolValue=i}static trueValue;static falseValue;_boolValue}class Mi extends Ae{constructor(i){super(),typeof i=="string"&&(this._stringBuffer=i),i instanceof Be&&(this._stringBuffer=i.s)}isString(){return!0}getString(i,s){return this._stringBuffer}equals(i){return typeof i=="string"?this._stringBuffer==i:i instanceof Be?this._stringBuffer==i.s:!1}}class ji extends Mi{isStatic(){return this._isStatic}setErrorNotForClientCall(i){return this._stringBuffer=i,this}constructor(i,s){typeof i=="string"?super(i):super(i),this._isStatic=s}isError(){return!0}_isStatic}class Pi extends Ae{isNull(){return!0}getString(i,s){return this._stringBuffer}isStatic(){return!0}setErrorNotForClientCall(i){return this._stringBuffer=i,ji.nullValue}constructor(){super(),this._stringBuffer="NullValue"}}class Z0 extends Ae{constructor(){super(),this._array=new At}release(){for(let i=this._array.begin();i.notEqual(this._array.end());i.preIncrement()){let s=i.ptr();s&&!s.isStatic()&&(s=void 0,s=null)}}isArray(){return!0}getValueByIndex(i){if(i<0||this._array.getSize()<=i)return Ae.errorValue.setErrorNotForClientCall(An);const s=this._array.at(i);return s??Ae.nullValue}getValueByString(i){return Ae.errorValue.setErrorNotForClientCall(x0)}getString(i,s){const o=s+`[
`;for(let _=this._array.begin();_.notEqual(this._array.end());_.increment()){const w=_.ptr();this._stringBuffer+=s+""+w.getString(s+" ")+`
`}return this._stringBuffer=o+s+`]
`,this._stringBuffer}add(i){this._array.pushBack(i)}getVector(i=null){return this._array}getSize(){return this._array.getSize()}_array}class vi extends Ae{constructor(){super(),this._map=new we}release(){const i=this._map.begin();for(;i.notEqual(this._map.end());){let s=i.ptr().second;s&&!s.isStatic()&&(s=void 0,s=null),i.preIncrement()}}isMap(){return!0}getValueByString(i){if(i instanceof Be){const s=this._map.getValue(i.s);return s??Ae.nullValue}for(let s=this._map.begin();s.notEqual(this._map.end());s.preIncrement())if(s.ptr().first==i)return s.ptr().second==null?Ae.nullValue:s.ptr().second;return Ae.nullValue}getValueByIndex(i){return Ae.errorValue.setErrorNotForClientCall(x0)}getString(i,s){this._stringBuffer=s+`{
`;const o=this._map.begin();for(;o.notEqual(this._map.end());){const _=o.ptr().first,w=o.ptr().second;this._stringBuffer+=s+" "+_+" : "+w.getString(s+"   ")+` 
`,o.preIncrement()}return this._stringBuffer+=s+`}
`,this._stringBuffer}getMap(i){return this._map}put(i,s){this._map.setValue(i,s)}getKeys(){if(!this._keys){this._keys=new At;const i=this._map.begin();for(;i.notEqual(this._map.end());){const s=i.ptr().first;this._keys.pushBack(s),i.preIncrement()}}return this._keys}getSize(){return this._keys.getSize()}_map;_keys}var Xr;(c=>{c.CubismJson=_e,c.JsonArray=Z0,c.JsonBoolean=Te,c.JsonError=ji,c.JsonFloat=S0,c.JsonMap=vi,c.JsonNullvalue=Pi,c.JsonString=Mi,c.Value=Ae})(Xr||(Xr={}));function xn(c,i){let s=0;for(let _=1;;_++){const w=c.slice(_-1,_);if(w=="e"||w=="-"||w=="E")continue;const T=c.substring(0,_),I=Number(T);if(isNaN(I))break;s=_}let o=parseFloat(c);return isNaN(o)&&(o=NaN),i[0]=c.slice(s),o}let Fe=!1,Bi=!1,Ii=null,Hi=null;const ii=Object.freeze({vertexOffset:0,vertexStep:2});function Sn(c){c&&(c=void 0)}class ee{static startUp(i=null){if(Fe)return We("CubismFramework.startUp() is already done."),Fe;if(Ii=i,Ii!=null&&ne.Logging.csmSetLogFunction(Ii.logFunction),Fe=!0,Fe){const s=ne.Version.csmGetVersion(),o=(s&4278190080)>>24,_=(s&16711680)>>16,w=s&65535,T=s;We("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+o).slice(-2),("00"+_).slice(-2),("0000"+w).slice(-4),T)}return We("CubismFramework.startUp() is complete."),Fe}static cleanUp(){Fe=!1,Bi=!1,Ii=null,Hi=null}static initialize(i=0){if(Ue(Fe),!Fe){ei("CubismFramework is not started.");return}if(Bi){ei("CubismFramework.initialize() skipped, already initialized.");return}Ae.staticInitializeNotForClientCall(),Hi=new Er,ne.Memory.initializeAmountOfMemory(i),Bi=!0,We("CubismFramework.initialize() is complete.")}static dispose(){if(Ue(Fe),!Fe){ei("CubismFramework is not started.");return}if(!Bi){ei("CubismFramework.dispose() skipped, not initialized.");return}Ae.staticReleaseNotForClientCall(),Hi.release(),Hi=null,p0.staticRelease(),Bi=!1,We("CubismFramework.dispose() is complete.")}static isStarted(){return Fe}static isInitialized(){return Bi}static coreLogFunction(i){ne.Logging.csmGetLogFunction()&&ne.Logging.csmGetLogFunction()(i)}static getLoggingLevel(){return Ii!=null?Ii.loggingLevel:5}static getIdManager(){return Hi}constructor(){}}class Cn{logFunction;loggingLevel}var Vi=(c=>(c[c.LogLevel_Verbose=0]="LogLevel_Verbose",c[c.LogLevel_Debug=1]="LogLevel_Debug",c[c.LogLevel_Info=2]="LogLevel_Info",c[c.LogLevel_Warning=3]="LogLevel_Warning",c[c.LogLevel_Error=4]="LogLevel_Error",c[c.LogLevel_Off=5]="LogLevel_Off",c))(Vi||{}),Yr;(c=>{c.Constant=ii,c.csmDelete=Sn,c.CubismFramework=ee})(Yr||(Yr={}));function jr(c,i){for(var s=0,o=c.length-1;o>=0;o--){var _=c[o];_==="."?c.splice(o,1):_===".."?(c.splice(o,1),s++):s&&(c.splice(o,1),s--)}if(i)for(;s--;s)c.unshift("..");return c}var wn=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,J0=function(c){return wn.exec(c).slice(1)};function q0(){for(var c="",i=!1,s=arguments.length-1;s>=-1&&!i;s--){var o=s>=0?arguments[s]:"/";if(typeof o!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!o)continue;c=o+"/"+c,i=o.charAt(0)==="/"}return c=jr($0(c.split("/"),function(_){return!!_}),!i).join("/"),(i?"/":"")+c||"."}function Hr(c){var i=Wr(c),s=Rn(c,-1)==="/";return c=jr($0(c.split("/"),function(o){return!!o}),!i).join("/"),!c&&!i&&(c="."),c&&s&&(c+="/"),(i?"/":"")+c}function Wr(c){return c.charAt(0)==="/"}function kn(){var c=Array.prototype.slice.call(arguments,0);return Hr($0(c,function(i,s){if(typeof i!="string")throw new TypeError("Arguments to path.join must be strings");return i}).join("/"))}function Mn(c,i){c=q0(c).substr(1),i=q0(i).substr(1);function s(D){for(var V=0;V<D.length&&D[V]==="";V++);for(var A=D.length-1;A>=0&&D[A]==="";A--);return V>A?[]:D.slice(V,A-V+1)}for(var o=s(c.split("/")),_=s(i.split("/")),w=Math.min(o.length,_.length),T=w,I=0;I<w;I++)if(o[I]!==_[I]){T=I;break}for(var N=[],I=T;I<o.length;I++)N.push("..");return N=N.concat(_.slice(T)),N.join("/")}var Pn="/",vn=":";function Bn(c){var i=J0(c),s=i[0],o=i[1];return!s&&!o?".":(o&&(o=o.substr(0,o.length-1)),s+o)}function In(c,i){var s=J0(c)[2];return i&&s.substr(-1*i.length)===i&&(s=s.substr(0,s.length-i.length)),s}function Vn(c){return J0(c)[3]}var Ne={extname:Vn,basename:In,dirname:Bn,sep:Pn,delimiter:vn,relative:Mn,join:kn,isAbsolute:Wr,normalize:Hr,resolve:q0};function $0(c,i){if(c.filter)return c.filter(i);for(var s=[],o=0;o<c.length;o++)i(c[o],o,c)&&s.push(c[o]);return s}var Rn="ab".substr(-1)==="b"?function(c,i,s){return c.substr(i,s)}:function(c,i,s){return i<0&&(i=c.length+i),c.substr(i,s)};const xt=Object.freeze({HitAreaPrefix:"HitArea",HitAreaHead:"Head",HitAreaBody:"Body",PartsIdCore:"Parts01Core",PartsArmPrefix:"Parts01Arm_",PartsArmLPrefix:"Parts01ArmL_",PartsArmRPrefix:"Parts01ArmR_",ParamAngleX:"ParamAngleX",ParamAngleY:"ParamAngleY",ParamAngleZ:"ParamAngleZ",ParamEyeLOpen:"ParamEyeLOpen",ParamEyeLSmile:"ParamEyeLSmile",ParamEyeROpen:"ParamEyeROpen",ParamEyeRSmile:"ParamEyeRSmile",ParamEyeBallX:"ParamEyeBallX",ParamEyeBallY:"ParamEyeBallY",ParamEyeBallForm:"ParamEyeBallForm",ParamBrowLY:"ParamBrowLY",ParamBrowRY:"ParamBrowRY",ParamBrowLX:"ParamBrowLX",ParamBrowRX:"ParamBrowRX",ParamBrowLAngle:"ParamBrowLAngle",ParamBrowRAngle:"ParamBrowRAngle",ParamBrowLForm:"ParamBrowLForm",ParamBrowRForm:"ParamBrowRForm",ParamMouthForm:"ParamMouthForm",ParamMouthOpenY:"ParamMouthOpenY",ParamCheek:"ParamCheek",ParamBodyAngleX:"ParamBodyAngleX",ParamBodyAngleY:"ParamBodyAngleY",ParamBodyAngleZ:"ParamBodyAngleZ",ParamBreath:"ParamBreath",ParamArmLA:"ParamArmLA",ParamArmRA:"ParamArmRA",ParamArmLB:"ParamArmLB",ParamArmRB:"ParamArmRB",ParamHandL:"ParamHandL",ParamHandR:"ParamHandR",ParamHairFront:"ParamHairFront",ParamHairSide:"ParamHairSide",ParamHairBack:"ParamHairBack",ParamHairFluffy:"ParamHairFluffy",ParamShoulderY:"ParamShoulderY",ParamBustX:"ParamBustX",ParamBustY:"ParamBustY",ParamBaseX:"ParamBaseX",ParamBaseY:"ParamBaseY",ParamNONE:"NONE:"});var Zr;(c=>{c.HitAreaBody=xt.HitAreaBody,c.HitAreaHead=xt.HitAreaHead,c.HitAreaPrefix=xt.HitAreaPrefix,c.ParamAngleX=xt.ParamAngleX,c.ParamAngleY=xt.ParamAngleY,c.ParamAngleZ=xt.ParamAngleZ,c.ParamArmLA=xt.ParamArmLA,c.ParamArmLB=xt.ParamArmLB,c.ParamArmRA=xt.ParamArmRA,c.ParamArmRB=xt.ParamArmRB,c.ParamBaseX=xt.ParamBaseX,c.ParamBaseY=xt.ParamBaseY,c.ParamBodyAngleX=xt.ParamBodyAngleX,c.ParamBodyAngleY=xt.ParamBodyAngleY,c.ParamBodyAngleZ=xt.ParamBodyAngleZ,c.ParamBreath=xt.ParamBreath,c.ParamBrowLAngle=xt.ParamBrowLAngle,c.ParamBrowLForm=xt.ParamBrowLForm,c.ParamBrowLX=xt.ParamBrowLX,c.ParamBrowLY=xt.ParamBrowLY,c.ParamBrowRAngle=xt.ParamBrowRAngle,c.ParamBrowRForm=xt.ParamBrowRForm,c.ParamBrowRX=xt.ParamBrowRX,c.ParamBrowRY=xt.ParamBrowRY,c.ParamBustX=xt.ParamBustX,c.ParamBustY=xt.ParamBustY,c.ParamCheek=xt.ParamCheek,c.ParamEyeBallForm=xt.ParamEyeBallForm,c.ParamEyeBallX=xt.ParamEyeBallX,c.ParamEyeBallY=xt.ParamEyeBallY,c.ParamEyeLOpen=xt.ParamEyeLOpen,c.ParamEyeLSmile=xt.ParamEyeLSmile,c.ParamEyeROpen=xt.ParamEyeROpen,c.ParamEyeRSmile=xt.ParamEyeRSmile,c.ParamHairBack=xt.ParamHairBack,c.ParamHairFluffy=xt.ParamHairFluffy,c.ParamHairFront=xt.ParamHairFront,c.ParamHairSide=xt.ParamHairSide,c.ParamHandL=xt.ParamHandL,c.ParamHandR=xt.ParamHandR,c.ParamMouthForm=xt.ParamMouthForm,c.ParamMouthOpenY=xt.ParamMouthOpenY,c.ParamNONE=xt.ParamNONE,c.ParamShoulderY=xt.ParamShoulderY,c.PartsArmLPrefix=xt.PartsArmLPrefix,c.PartsArmPrefix=xt.PartsArmPrefix,c.PartsArmRPrefix=xt.PartsArmRPrefix,c.PartsIdCore=xt.PartsIdCore})(Zr||(Zr={}));class Jr{}var qr;(c=>{c.ICubismModelSetting=Jr})(qr||(qr={}));const ri="FileReferences",Tn="Groups",Fn="Layout",bn="HitAreas",En="Moc",Dn="Textures",Ln="Physics",On="Pose",Un="Expressions",Nn="Motions",$r="UserData",si="Name",Kr="File",zn="Id",C0="Ids",Qr="Sound",ts="FadeInTime",es="FadeOutTime",K0="LipSync",Q0="EyeBlink";class is extends Jr{constructor(i,s){super(),this._json=_e.create(i,s),this._json&&(this._jsonValue=new At,this._jsonValue.pushBack(this._json.getRoot().getValueByString(Tn)),this._jsonValue.pushBack(this._json.getRoot().getValueByString(ri).getValueByString(En)),this._jsonValue.pushBack(this._json.getRoot().getValueByString(ri).getValueByString(Nn)),this._jsonValue.pushBack(this._json.getRoot().getValueByString(ri).getValueByString(Un)),this._jsonValue.pushBack(this._json.getRoot().getValueByString(ri).getValueByString(Dn)),this._jsonValue.pushBack(this._json.getRoot().getValueByString(ri).getValueByString(Ln)),this._jsonValue.pushBack(this._json.getRoot().getValueByString(ri).getValueByString(On)),this._jsonValue.pushBack(this._json.getRoot().getValueByString(bn)))}release(){_e.delete(this._json),this._jsonValue=null}GetJson(){return this._json}getModelFileName(){return this.isExistModelFile()?this._jsonValue.at(1).getRawString():""}getTextureCount(){return this.isExistTextureFiles()?this._jsonValue.at(4).getSize():0}getTextureDirectory(){const s=this._jsonValue.at(4).getValueByIndex(0).getRawString().split("/"),o=s.length-1;let _="";for(let w=0;w<o;w++)_+=s[w],w<o-1&&(_+="/");return _}getTextureFileName(i){return this._jsonValue.at(4).getValueByIndex(i).getRawString()}getHitAreasCount(){return this.isExistHitAreas()?this._jsonValue.at(7).getSize():0}getHitAreaId(i){return ee.getIdManager().getId(this._jsonValue.at(7).getValueByIndex(i).getValueByString(zn).getRawString())}getHitAreaName(i){return this._jsonValue.at(7).getValueByIndex(i).getValueByString(si).getRawString()}getPhysicsFileName(){return this.isExistPhysicsFile()?this._jsonValue.at(5).getRawString():""}getPoseFileName(){return this.isExistPoseFile()?this._jsonValue.at(6).getRawString():""}getExpressionCount(){return this.isExistExpressionFile()?this._jsonValue.at(3).getSize():0}getExpressionName(i){return this._jsonValue.at(3).getValueByIndex(i).getValueByString(si).getRawString()}getExpressionFileName(i){return this._jsonValue.at(3).getValueByIndex(i).getValueByString(Kr).getRawString()}getMotionGroupCount(){return this.isExistMotionGroups()?this._jsonValue.at(2).getKeys().getSize():0}getMotionGroupName(i){return this.isExistMotionGroups()?this._jsonValue.at(2).getKeys().at(i):null}getMotionCount(i){return this.isExistMotionGroupName(i)?this._jsonValue.at(2).getValueByString(i).getSize():0}getMotionFileName(i,s){return this.isExistMotionGroupName(i)?this._jsonValue.at(2).getValueByString(i).getValueByIndex(s).getValueByString(Kr).getRawString():""}getMotionSoundFileName(i,s){return this.isExistMotionSoundFile(i,s)?this._jsonValue.at(2).getValueByString(i).getValueByIndex(s).getValueByString(Qr).getRawString():""}getMotionFadeInTimeValue(i,s){return this.isExistMotionFadeIn(i,s)?this._jsonValue.at(2).getValueByString(i).getValueByIndex(s).getValueByString(ts).toFloat():-1}getMotionFadeOutTimeValue(i,s){return this.isExistMotionFadeOut(i,s)?this._jsonValue.at(2).getValueByString(i).getValueByIndex(s).getValueByString(es).toFloat():-1}getUserDataFile(){return this.isExistUserDataFile()?this._json.getRoot().getValueByString(ri).getValueByString($r).getRawString():""}getLayoutMap(i){const s=this._json.getRoot().getValueByString(Fn).getMap();if(s==null)return!1;let o=!1;for(const _=s.begin();_.notEqual(s.end());_.preIncrement())i.setValue(_.ptr().first,_.ptr().second.toFloat()),o=!0;return o}getEyeBlinkParameterCount(){if(!this.isExistEyeBlinkParameters())return 0;let i=0;for(let s=0;s<this._jsonValue.at(0).getSize();s++){const o=this._jsonValue.at(0).getValueByIndex(s);if(!(o.isNull()||o.isError())&&o.getValueByString(si).getRawString()==Q0){i=o.getValueByString(C0).getVector().getSize();break}}return i}getEyeBlinkParameterId(i){if(!this.isExistEyeBlinkParameters())return null;for(let s=0;s<this._jsonValue.at(0).getSize();s++){const o=this._jsonValue.at(0).getValueByIndex(s);if(!(o.isNull()||o.isError())&&o.getValueByString(si).getRawString()==Q0)return ee.getIdManager().getId(o.getValueByString(C0).getValueByIndex(i).getRawString())}return null}getLipSyncParameterCount(){if(!this.isExistLipSyncParameters())return 0;let i=0;for(let s=0;s<this._jsonValue.at(0).getSize();s++){const o=this._jsonValue.at(0).getValueByIndex(s);if(!(o.isNull()||o.isError())&&o.getValueByString(si).getRawString()==K0){i=o.getValueByString(C0).getVector().getSize();break}}return i}getLipSyncParameterId(i){if(!this.isExistLipSyncParameters())return null;for(let s=0;s<this._jsonValue.at(0).getSize();s++){const o=this._jsonValue.at(0).getValueByIndex(s);if(!(o.isNull()||o.isError())&&o.getValueByString(si).getRawString()==K0)return ee.getIdManager().getId(o.getValueByString(C0).getValueByIndex(i).getRawString())}return null}isExistModelFile(){const i=this._jsonValue.at(1);return!i.isNull()&&!i.isError()}isExistTextureFiles(){const i=this._jsonValue.at(4);return!i.isNull()&&!i.isError()}isExistHitAreas(){const i=this._jsonValue.at(7);return!i.isNull()&&!i.isError()}isExistPhysicsFile(){const i=this._jsonValue.at(5);return!i.isNull()&&!i.isError()}isExistPoseFile(){const i=this._jsonValue.at(6);return!i.isNull()&&!i.isError()}isExistExpressionFile(){const i=this._jsonValue.at(3);return!i.isNull()&&!i.isError()}isExistMotionGroups(){const i=this._jsonValue.at(2);return!i.isNull()&&!i.isError()}isExistMotionGroupName(i){const s=this._jsonValue.at(2).getValueByString(i);return!s.isNull()&&!s.isError()}isExistMotionSoundFile(i,s){const o=this._jsonValue.at(2).getValueByString(i).getValueByIndex(s).getValueByString(Qr);return!o.isNull()&&!o.isError()}isExistMotionFadeIn(i,s){const o=this._jsonValue.at(2).getValueByString(i).getValueByIndex(s).getValueByString(ts);return!o.isNull()&&!o.isError()}isExistMotionFadeOut(i,s){const o=this._jsonValue.at(2).getValueByString(i).getValueByIndex(s).getValueByString(es);return!o.isNull()&&!o.isError()}isExistUserDataFile(){const i=this._json.getRoot().getValueByString(ri).getValueByString($r);return!i.isNull()&&!i.isError()}isExistEyeBlinkParameters(){if(this._jsonValue.at(0).isNull()||this._jsonValue.at(0).isError())return!1;for(let i=0;i<this._jsonValue.at(0).getSize();++i)if(this._jsonValue.at(0).getValueByIndex(i).getValueByString(si).getRawString()==Q0)return!0;return!1}isExistLipSyncParameters(){if(this._jsonValue.at(0).isNull()||this._jsonValue.at(0).isError())return!1;for(let i=0;i<this._jsonValue.at(0).getSize();++i)if(this._jsonValue.at(0).getValueByIndex(i).getValueByString(si).getRawString()==K0)return!0;return!1}_json;_jsonValue}var rs;(c=>{c.CubismModelSettingJson=is})(rs||(rs={}));class Wi{static create(){return new Wi}static delete(i){}setParameters(i){this._breathParameters=i}getParameters(){return this._breathParameters}updateParameters(i,s){this._currentTime+=s;const o=this._currentTime*2*3.14159;for(let _=0;_<this._breathParameters.getSize();++_){const w=this._breathParameters.at(_);i.addParameterValueById(w.parameterId,w.offset+w.peak*Math.sin(o/w.cycle),w.weight)}}constructor(){this._currentTime=0}_breathParameters;_currentTime}class Ri{constructor(i,s,o,_,w){this.parameterId=i??null,this.offset=s??0,this.peak=o??0,this.cycle=_??0,this.weight=w??0}parameterId;offset;peak;cycle;weight}var ss;(c=>{c.BreathParameterData=Ri,c.CubismBreath=Wi})(ss||(ss={}));class Ti{static create(i=null){return new Ti(i)}static delete(i){}setBlinkingInterval(i){this._blinkingIntervalSeconds=i}setBlinkingSetting(i,s,o){this._closingSeconds=i,this._closedSeconds=s,this._openingSeconds=o}setParameterIds(i){this._parameterIds=i}getParameterIds(){return this._parameterIds}updateParameters(i,s){this._userTimeSeconds+=s;let o,_=0;switch(this._blinkingState){case 2:_=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closingSeconds,_>=1&&(_=1,this._blinkingState=3,this._stateStartTimeSeconds=this._userTimeSeconds),o=1-_;break;case 3:_=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closedSeconds,_>=1&&(this._blinkingState=4,this._stateStartTimeSeconds=this._userTimeSeconds),o=0;break;case 4:_=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._openingSeconds,_>=1&&(_=1,this._blinkingState=1,this._nextBlinkingTime=this.determinNextBlinkingTiming()),o=_;break;case 1:this._nextBlinkingTime<this._userTimeSeconds&&(this._blinkingState=2,this._stateStartTimeSeconds=this._userTimeSeconds),o=1;break;case 0:default:this._blinkingState=1,this._nextBlinkingTime=this.determinNextBlinkingTiming(),o=1;break}Ti.CloseIfZero||(o=-o);for(let w=0;w<this._parameterIds.getSize();++w)i.setParameterValueById(this._parameterIds.at(w),o)}constructor(i){if(this._blinkingState=0,this._nextBlinkingTime=0,this._stateStartTimeSeconds=0,this._blinkingIntervalSeconds=4,this._closingSeconds=.1,this._closedSeconds=.05,this._openingSeconds=.15,this._userTimeSeconds=0,this._parameterIds=new At,i!=null)for(let s=0;s<i.getEyeBlinkParameterCount();++s)this._parameterIds.pushBack(i.getEyeBlinkParameterId(s))}determinNextBlinkingTiming(){const i=Math.random();return this._userTimeSeconds+i*(2*this._blinkingIntervalSeconds-1)}_blinkingState;_parameterIds;_nextBlinkingTime;_stateStartTimeSeconds;_blinkingIntervalSeconds;_closingSeconds;_closedSeconds;_openingSeconds;_userTimeSeconds;static CloseIfZero=!0}var as=(c=>(c[c.EyeState_First=0]="EyeState_First",c[c.EyeState_Interval=1]="EyeState_Interval",c[c.EyeState_Closing=2]="EyeState_Closing",c[c.EyeState_Closed=3]="EyeState_Closed",c[c.EyeState_Opening=4]="EyeState_Opening",c))(as||{}),ns;(c=>{c.CubismEyeBlink=Ti,c.EyeState=as})(ns||(ns={}));const Gn=.001,tr=.5,os="FadeInTime",ls="Link",Xn="Groups",Yn="Id";class Zi{static create(i,s){const o=new Zi,_=_e.create(i,s),w=_.getRoot();w.getValueByString(os).isNull()||(o._fadeTimeSeconds=w.getValueByString(os).toFloat(tr),o._fadeTimeSeconds<=0&&(o._fadeTimeSeconds=tr));const T=w.getValueByString(Xn),I=T.getSize();for(let N=0;N<I;++N){const D=T.getValueByIndex(N),V=D.getSize();let A=0;for(let G=0;G<V;++G){const Z=D.getValueByIndex(G),q=new Ji,et=ee.getIdManager().getId(Z.getValueByString(Yn).getRawString());if(q.partId=et,!Z.getValueByString(ls).isNull()){const K=Z.getValueByString(ls),gt=K.getSize();for(let _t=0;_t<gt;++_t){const mt=new Ji,ct=ee.getIdManager().getId(K.getValueByIndex(_t).getString());mt.partId=ct,q.link.pushBack(mt)}}o._partGroups.pushBack(q.clone()),++A}o._partGroupCounts.pushBack(A)}return _e.delete(_),o}static delete(i){}updateParameters(i,s){i!=this._lastModel&&this.reset(i),this._lastModel=i,s<0&&(s=0);let o=0;for(let _=0;_<this._partGroupCounts.getSize();_++){const w=this._partGroupCounts.at(_);this.doFade(i,s,o,w),o+=w}this.copyPartOpacities(i)}reset(i){let s=0;for(let o=0;o<this._partGroupCounts.getSize();++o){const _=this._partGroupCounts.at(o);for(let w=s;w<s+_;++w){this._partGroups.at(w).initialize(i);const T=this._partGroups.at(w).partIndex,I=this._partGroups.at(w).parameterIndex;if(!(T<0)){i.setPartOpacityByIndex(T,w==s?1:0),i.setParameterValueByIndex(I,w==s?1:0);for(let N=0;N<this._partGroups.at(w).link.getSize();++N)this._partGroups.at(w).link.at(N).initialize(i)}}s+=_}}copyPartOpacities(i){for(let s=0;s<this._partGroups.getSize();++s){const o=this._partGroups.at(s);if(o.link.getSize()==0)continue;const _=this._partGroups.at(s).partIndex,w=i.getPartOpacityByIndex(_);for(let T=0;T<o.link.getSize();++T){const N=o.link.at(T).partIndex;N<0||i.setPartOpacityByIndex(N,w)}}}doFade(i,s,o,_){let w=-1,T=1;const I=.5,N=.15;for(let D=o;D<o+_;++D){const V=this._partGroups.at(D).partIndex,A=this._partGroups.at(D).parameterIndex;if(i.getParameterValueByIndex(A)>Gn){if(w>=0)break;w=D,T=i.getPartOpacityByIndex(V),T+=s/this._fadeTimeSeconds,T>1&&(T=1)}}w<0&&(w=0,T=1);for(let D=o;D<o+_;++D){const V=this._partGroups.at(D).partIndex;if(w==D)i.setPartOpacityByIndex(V,T);else{let A=i.getPartOpacityByIndex(V),G;T<I?G=T*(I-1)/I+1:G=(1-T)*I/(1-I),(1-G)*(1-T)>N&&(G=1-N/(1-T)),A>G&&(A=G),i.setPartOpacityByIndex(V,A)}}}constructor(){this._fadeTimeSeconds=tr,this._lastModel=null,this._partGroups=new At,this._partGroupCounts=new At}_partGroups;_partGroupCounts;_fadeTimeSeconds;_lastModel}class Ji{constructor(i){if(this.parameterIndex=0,this.partIndex=0,this.link=new At,i!=null){this.partId=i.partId;for(const s=i.link.begin();s.notEqual(i.link.end());s.preIncrement())this.link.pushBack(s.ptr().clone())}}assignment(i){this.partId=i.partId;for(const s=i.link.begin();s.notEqual(i.link.end());s.preIncrement())this.link.pushBack(s.ptr().clone());return this}initialize(i){this.parameterIndex=i.getParameterIndex(this.partId),this.partIndex=i.getPartIndex(this.partId),i.setParameterValueByIndex(this.parameterIndex,1)}clone(){const i=new Ji;i.partId=this.partId,i.parameterIndex=this.parameterIndex,i.partIndex=this.partIndex,i.link=new At;for(let s=this.link.begin();s.notEqual(this.link.end());s.increment())i.link.pushBack(s.ptr().clone());return i}partId;parameterIndex;partIndex;link}var us;(c=>{c.CubismPose=Zi,c.PartData=Ji})(us||(us={}));class hs extends oe{constructor(i,s){super(),this._width=i!==void 0?i:0,this._height=s!==void 0?s:0,this.setHeight(2)}setWidth(i){const s=i/this._width,o=s;this.scale(s,o)}setHeight(i){const s=i/this._height,o=s;this.scale(s,o)}setPosition(i,s){this.translate(i,s)}setCenterPosition(i,s){this.centerX(i),this.centerY(s)}top(i){this.setY(i)}bottom(i){const s=this._height*this.getScaleY();this.translateY(i-s)}left(i){this.setX(i)}right(i){const s=this._width*this.getScaleX();this.translateX(i-s)}centerX(i){const s=this._width*this.getScaleX();this.translateX(i-s/2)}setX(i){this.translateX(i)}centerY(i){const s=this._height*this.getScaleY();this.translateY(i-s/2)}setY(i){this.translateY(i)}setupFromLayout(i){const s="width",o="height",_="x",w="y",T="center_x",I="center_y",N="top",D="bottom",V="left",A="right";for(const G=i.begin();G.notEqual(i.end());G.preIncrement()){const Z=G.ptr().first,q=G.ptr().second;Z==s?this.setWidth(q):Z==o&&this.setHeight(q)}for(const G=i.begin();G.notEqual(i.end());G.preIncrement()){const Z=G.ptr().first,q=G.ptr().second;Z==_?this.setX(q):Z==w?this.setY(q):Z==T?this.centerX(q):Z==I?this.centerY(q):Z==N?this.top(q):Z==D?this.bottom(q):Z==V?this.left(q):Z==A&&this.right(q)}}_width;_height}var cs;(c=>{c.CubismModelMatrix=hs})(cs||(cs={}));class St{constructor(i,s){this.x=i,this.y=s,this.x=i??0,this.y=s??0}add(i){const s=new St(0,0);return s.x=this.x+i.x,s.y=this.y+i.y,s}substract(i){const s=new St(0,0);return s.x=this.x-i.x,s.y=this.y-i.y,s}multiply(i){const s=new St(0,0);return s.x=this.x*i.x,s.y=this.y*i.y,s}multiplyByScaler(i){return this.multiply(new St(i,i))}division(i){const s=new St(0,0);return s.x=this.x/i.x,s.y=this.y/i.y,s}divisionByScalar(i){return this.division(new St(i,i))}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y)}getDistanceWith(i){return Math.sqrt((this.x-i.x)*(this.x-i.x)+(this.y-i.y)*(this.y-i.y))}dot(i){return this.x*i.x+this.y*i.y}normalize(){const i=Math.pow(this.x*this.x+this.y*this.y,.5);this.x=this.x/i,this.y=this.y/i}isEqual(i){return this.x==i.x&&this.y==i.y}isNotEqual(i){return!this.isEqual(i)}}var fs;(c=>{c.CubismVector2=St})(fs||(fs={}));class It{static Epsilon=1e-5;static range(i,s,o){return i<s?i=s:i>o&&(i=o),i}static sin(i){return Math.sin(i)}static cos(i){return Math.cos(i)}static abs(i){return Math.abs(i)}static sqrt(i){return Math.sqrt(i)}static cbrt(i){if(i===0)return i;let s=i;const o=s<0;o&&(s=-s);let _;return s===1/0?_=1/0:(_=Math.exp(Math.log(s)/3),_=(s/(_*_)+2*_)/3),o?-_:_}static getEasingSine(i){return i<0?0:i>1?1:.5-.5*this.cos(i*Math.PI)}static max(i,s){return i>s?i:s}static min(i,s){return i>s?s:i}static degreesToRadian(i){return i/180*Math.PI}static radianToDegrees(i){return i*180/Math.PI}static directionToRadian(i,s){const o=Math.atan2(s.y,s.x),_=Math.atan2(i.y,i.x);let w=o-_;for(;w<-Math.PI;)w+=Math.PI*2;for(;w>Math.PI;)w-=Math.PI*2;return w}static directionToDegrees(i,s){const o=this.directionToRadian(i,s);let _=this.radianToDegrees(o);return s.x-i.x>0&&(_=-_),_}static radianToDirection(i){const s=new St;return s.x=this.sin(i),s.y=this.cos(i),s}static quadraticEquation(i,s,o){return this.abs(i)<It.Epsilon?this.abs(s)<It.Epsilon?-o:-o/s:-(s+this.sqrt(s*s-4*i*o))/(2*i)}static cardanoAlgorithmForBezier(i,s,o,_){if(this.sqrt(i)<It.Epsilon)return this.range(this.quadraticEquation(s,o,_),0,1);const w=s/i,T=o/i,I=_/i,N=(3*T-w*w)/3,D=N/3,V=(2*w*w*w-9*w*T+27*I)/27,A=V/2,G=A*A+D*D*D,Z=.5,q=Z+.01;if(G<0){const mt=-N/3,ct=mt*mt*mt,Et=this.sqrt(ct),Nt=-V/(2*Et),pe=this.range(Nt,-1,1),ke=Math.acos(pe),qe=2*this.cbrt(Et),i0=qe*this.cos(ke/3)-w/3;if(this.abs(i0-Z)<q)return this.range(i0,0,1);const pi=qe*this.cos((ke+2*Math.PI)/3)-w/3;if(this.abs(pi-Z)<q)return this.range(pi,0,1);const Di=qe*this.cos((ke+4*Math.PI)/3)-w/3;return this.range(Di,0,1)}if(G==0){let mt;A<0?mt=this.cbrt(-A):mt=-this.cbrt(A);const ct=2*mt-w/3;if(this.abs(ct-Z)<q)return this.range(ct,0,1);const Et=-mt-w/3;return this.range(Et,0,1)}const et=this.sqrt(G),K=this.cbrt(et-A),gt=this.cbrt(et+A),_t=K-gt-w/3;return this.range(_t,0,1)}constructor(){}}var gs;(c=>{c.CubismMath=It})(gs||(gs={}));const er=30,ds=.01;class ms{constructor(){this._faceTargetX=0,this._faceTargetY=0,this._faceX=0,this._faceY=0,this._faceVX=0,this._faceVY=0,this._lastTimeSeconds=0,this._userTimeSeconds=0}update(i){this._userTimeSeconds+=i;const o=40/10*1/er;if(this._lastTimeSeconds==0){this._lastTimeSeconds=this._userTimeSeconds;return}const _=(this._userTimeSeconds-this._lastTimeSeconds)*er;this._lastTimeSeconds=this._userTimeSeconds;const T=.15*er,I=_*o/T,N=this._faceTargetX-this._faceX,D=this._faceTargetY-this._faceY;if(It.abs(N)<=ds&&It.abs(D)<=ds)return;const V=It.sqrt(N*N+D*D),A=o*N/V,G=o*D/V;let Z=A-this._faceVX,q=G-this._faceVY;const et=It.sqrt(Z*Z+q*q);(et<-I||et>I)&&(Z*=I/et,q*=I/et),this._faceVX+=Z,this._faceVY+=q;{const K=.5*(It.sqrt(I*I+16*I*V-8*I*V)-I),gt=It.sqrt(this._faceVX*this._faceVX+this._faceVY*this._faceVY);gt>K&&(this._faceVX*=K/gt,this._faceVY*=K/gt)}this._faceX+=this._faceVX,this._faceY+=this._faceVY}getX(){return this._faceX}getY(){return this._faceY}set(i,s){this._faceTargetX=i,this._faceTargetY=s}_faceTargetX;_faceTargetY;_faceX;_faceY;_faceVX;_faceVY;_lastTimeSeconds;_userTimeSeconds}var _s;(c=>{c.CubismTargetPoint=ms})(_s||(_s={}));class Fi{static delete(i){i.release(),i=null}constructor(){this._fadeInSeconds=-1,this._fadeOutSeconds=-1,this._weight=1,this._offsetSeconds=0,this._firedEventValues=new At}release(){this._weight=0}updateParameters(i,s,o){if(!s.isAvailable()||s.isFinished())return;if(!s.isStarted()){s.setIsStarted(!0),s.setStartTime(o-this._offsetSeconds),s.setFadeInStartTime(o);const I=this.getDuration();s.getEndTime()<0&&s.setEndTime(I<=0?-1:s.getStartTime()+I)}let _=this._weight;const w=this._fadeInSeconds==0?1:It.getEasingSine((o-s.getFadeInStartTime())/this._fadeInSeconds),T=this._fadeOutSeconds==0||s.getEndTime()<0?1:It.getEasingSine((s.getEndTime()-o)/this._fadeOutSeconds);_=_*w*T,s.setState(o,_),Ue(0<=_&&_<=1),this.doUpdateParameters(i,o,_,s),s.getEndTime()>0&&s.getEndTime()<o&&s.setIsFinished(!0)}setFadeInTime(i){this._fadeInSeconds=i}setFadeOutTime(i){this._fadeOutSeconds=i}getFadeOutTime(){return this._fadeOutSeconds}getFadeInTime(){return this._fadeInSeconds}setWeight(i){this._weight=i}getWeight(){return this._weight}getDuration(){return-1}getLoopDuration(){return-1}setOffsetTime(i){this._offsetSeconds=i}getFiredEvent(i,s){return this._firedEventValues}setFinishedMotionHandler=i=>this._onFinishedMotion=i;getFinishedMotionHandler=()=>this._onFinishedMotion;_fadeInSeconds;_fadeOutSeconds;_weight;_offsetSeconds;_firedEventValues;_onFinishedMotion}var ps;(c=>{c.ACubismMotion=Fi})(ps||(ps={}));const jn="FadeInTime",Hn="FadeOutTime",ys="Parameters",Wn="Id",Zn="Value",w0="Blend",Jn="Add",qn="Multiply",$n="Overwrite",As=1;class k0 extends Fi{static create(i,s){const o=new k0,_=_e.create(i,s),w=_.getRoot();o.setFadeInTime(w.getValueByString(jn).toFloat(As)),o.setFadeOutTime(w.getValueByString(Hn).toFloat(As));const T=w.getValueByString(ys).getSize();o._parameters.prepareCapacity(T);for(let I=0;I<T;++I){const N=w.getValueByString(ys).getValueByIndex(I),D=ee.getIdManager().getId(N.getValueByString(Wn).getRawString()),V=N.getValueByString(Zn).toFloat();let A;N.getValueByString(w0).isNull()||N.getValueByString(w0).getString()==Jn?A=0:N.getValueByString(w0).getString()==qn?A=1:N.getValueByString(w0).getString()==$n?A=2:A=0;const G=new Ss;G.parameterId=D,G.blendType=A,G.value=V,o._parameters.pushBack(G)}return _e.delete(_),o}doUpdateParameters(i,s,o,_){for(let w=0;w<this._parameters.getSize();++w){const T=this._parameters.at(w);switch(T.blendType){case 0:{i.addParameterValueById(T.parameterId,T.value,o);break}case 1:{i.multiplyParameterValueById(T.parameterId,T.value,o);break}case 2:{i.setParameterValueById(T.parameterId,T.value,o);break}}}}constructor(){super(),this._parameters=new At}_parameters}var xs=(c=>(c[c.ExpressionBlendType_Add=0]="ExpressionBlendType_Add",c[c.ExpressionBlendType_Multiply=1]="ExpressionBlendType_Multiply",c[c.ExpressionBlendType_Overwrite=2]="ExpressionBlendType_Overwrite",c))(xs||{});class Ss{parameterId;blendType;value}var Cs;(c=>{c.CubismExpressionMotion=k0,c.ExpressionBlendType=xs,c.ExpressionParameter=Ss})(Cs||(Cs={}));var ai=(c=>(c[c.CubismMotionCurveTarget_Model=0]="CubismMotionCurveTarget_Model",c[c.CubismMotionCurveTarget_Parameter=1]="CubismMotionCurveTarget_Parameter",c[c.CubismMotionCurveTarget_PartOpacity=2]="CubismMotionCurveTarget_PartOpacity",c))(ai||{}),be=(c=>(c[c.CubismMotionSegmentType_Linear=0]="CubismMotionSegmentType_Linear",c[c.CubismMotionSegmentType_Bezier=1]="CubismMotionSegmentType_Bezier",c[c.CubismMotionSegmentType_Stepped=2]="CubismMotionSegmentType_Stepped",c[c.CubismMotionSegmentType_InverseStepped=3]="CubismMotionSegmentType_InverseStepped",c))(be||{});class ir{time=0;value=0}class ws{constructor(){this.evaluate=null,this.basePointIndex=0,this.segmentType=0}evaluate;basePointIndex;segmentType}class ks{constructor(){this.type=0,this.segmentCount=0,this.baseSegmentIndex=0,this.fadeInTime=0,this.fadeOutTime=0}type;id;segmentCount;baseSegmentIndex;fadeInTime;fadeOutTime}class Ms{fireTime=0;value}class Ps{constructor(){this.duration=0,this.loop=!1,this.curveCount=0,this.eventCount=0,this.fps=0,this.curves=new At,this.segments=new At,this.points=new At,this.events=new At}duration;loop;curveCount;eventCount;fps;curves;segments;points;events}var vs;(c=>{c.CubismMotionCurve=ks,c.CubismMotionCurveTarget=ai,c.CubismMotionData=Ps,c.CubismMotionEvent=Ms,c.CubismMotionPoint=ir,c.CubismMotionSegment=ws,c.CubismMotionSegmentType=be})(vs||(vs={}));const Me="Meta",Kn="Duration",Qn="Loop",to="AreBeziersRestricted",eo="CurveCount",io="Fps",ro="TotalSegmentCount",so="TotalPointCount",ni="Curves",ao="Target",no="Id",M0="FadeInTime",P0="FadeOutTime",Bs="Segments",Is="UserData",oo="UserDataCount",lo="TotalUserDataSize",uo="Time",ho="Value";class Vs{constructor(i,s){this._json=_e.create(i,s)}release(){_e.delete(this._json)}getMotionDuration(){return this._json.getRoot().getValueByString(Me).getValueByString(Kn).toFloat()}isMotionLoop(){return this._json.getRoot().getValueByString(Me).getValueByString(Qn).toBoolean()}getEvaluationOptionFlag(i){return i==0?this._json.getRoot().getValueByString(Me).getValueByString(to).toBoolean():!1}getMotionCurveCount(){return this._json.getRoot().getValueByString(Me).getValueByString(eo).toInt()}getMotionFps(){return this._json.getRoot().getValueByString(Me).getValueByString(io).toFloat()}getMotionTotalSegmentCount(){return this._json.getRoot().getValueByString(Me).getValueByString(ro).toInt()}getMotionTotalPointCount(){return this._json.getRoot().getValueByString(Me).getValueByString(so).toInt()}isExistMotionFadeInTime(){return!this._json.getRoot().getValueByString(Me).getValueByString(M0).isNull()}isExistMotionFadeOutTime(){return!this._json.getRoot().getValueByString(Me).getValueByString(P0).isNull()}getMotionFadeInTime(){return this._json.getRoot().getValueByString(Me).getValueByString(M0).toFloat()}getMotionFadeOutTime(){return this._json.getRoot().getValueByString(Me).getValueByString(P0).toFloat()}getMotionCurveTarget(i){return this._json.getRoot().getValueByString(ni).getValueByIndex(i).getValueByString(ao).getRawString()}getMotionCurveId(i){return ee.getIdManager().getId(this._json.getRoot().getValueByString(ni).getValueByIndex(i).getValueByString(no).getRawString())}isExistMotionCurveFadeInTime(i){return!this._json.getRoot().getValueByString(ni).getValueByIndex(i).getValueByString(M0).isNull()}isExistMotionCurveFadeOutTime(i){return!this._json.getRoot().getValueByString(ni).getValueByIndex(i).getValueByString(P0).isNull()}getMotionCurveFadeInTime(i){return this._json.getRoot().getValueByString(ni).getValueByIndex(i).getValueByString(M0).toFloat()}getMotionCurveFadeOutTime(i){return this._json.getRoot().getValueByString(ni).getValueByIndex(i).getValueByString(P0).toFloat()}getMotionCurveSegmentCount(i){return this._json.getRoot().getValueByString(ni).getValueByIndex(i).getValueByString(Bs).getVector().getSize()}getMotionCurveSegment(i,s){return this._json.getRoot().getValueByString(ni).getValueByIndex(i).getValueByString(Bs).getValueByIndex(s).toFloat()}getEventCount(){return this._json.getRoot().getValueByString(Me).getValueByString(oo).toInt()}getTotalEventValueSize(){return this._json.getRoot().getValueByString(Me).getValueByString(lo).toInt()}getEventTime(i){return this._json.getRoot().getValueByString(Is).getValueByIndex(i).getValueByString(uo).toFloat()}getEventValue(i){return new Be(this._json.getRoot().getValueByString(Is).getValueByIndex(i).getValueByString(ho).getRawString())}_json}var Rs=(c=>(c[c.EvaluationOptionFlag_AreBeziersRistricted=0]="EvaluationOptionFlag_AreBeziersRistricted",c))(Rs||{}),Ts;(c=>{c.CubismMotionJson=Vs})(Ts||(Ts={}));const co="EyeBlink",fo="LipSync",go="Model",mo="Parameter",_o="PartOpacity",po=!1;function Ie(c,i,s){const o=new ir;return o.time=c.time+(i.time-c.time)*s,o.value=c.value+(i.value-c.value)*s,o}function yo(c,i){let s=(i-c[0].time)/(c[1].time-c[0].time);return s<0&&(s=0),c[0].value+(c[1].value-c[0].value)*s}function Ao(c,i){let s=(i-c[0].time)/(c[3].time-c[0].time);s<0&&(s=0);const o=Ie(c[0],c[1],s),_=Ie(c[1],c[2],s),w=Ie(c[2],c[3],s),T=Ie(o,_,s),I=Ie(_,w,s);return Ie(T,I,s).value}function xo(c,i){const s=i,o=c[0].time,_=c[3].time,w=c[1].time,T=c[2].time,I=_-3*T+3*w-o,N=3*T-6*w+3*o,D=3*w-3*o,V=o-s,A=It.cardanoAlgorithmForBezier(I,N,D,V),G=Ie(c[0],c[1],A),Z=Ie(c[1],c[2],A),q=Ie(c[2],c[3],A),et=Ie(G,Z,A),K=Ie(Z,q,A);return Ie(et,K,A).value}function So(c,i){return c[0].value}function Co(c,i){return c[1].value}function rr(c,i,s){const o=c.curves.at(i);let _=-1;const w=o.baseSegmentIndex+o.segmentCount;let T=0;for(let N=o.baseSegmentIndex;N<w;++N)if(T=c.segments.at(N).basePointIndex+(c.segments.at(N).segmentType==be.CubismMotionSegmentType_Bezier?3:1),c.points.at(T).time>s){_=N;break}if(_==-1)return c.points.at(T).value;const I=c.segments.at(_);return I.evaluate(c.points.get(I.basePointIndex),s)}class v0 extends Fi{static create(i,s,o){const _=new v0;return _.parse(i,s),_._sourceFrameRate=_._motionData.fps,_._loopDurationSeconds=_._motionData.duration,_._onFinishedMotion=o,_}doUpdateParameters(i,s,o,_){this._modelCurveIdEyeBlink==null&&(this._modelCurveIdEyeBlink=ee.getIdManager().getId(co)),this._modelCurveIdLipSync==null&&(this._modelCurveIdLipSync=ee.getIdManager().getId(fo));let w=s-_.getStartTime();w<0&&(w=0);let T=Number.MAX_VALUE,I=Number.MAX_VALUE;const N=64;let D=0,V=0;this._eyeBlinkParameterIds.getSize()>N&&Yi("too many eye blink targets : {0}",this._eyeBlinkParameterIds.getSize()),this._lipSyncParameterIds.getSize()>N&&Yi("too many lip sync targets : {0}",this._lipSyncParameterIds.getSize());const A=this._fadeInSeconds<=0?1:It.getEasingSine((s-_.getFadeInStartTime())/this._fadeInSeconds),G=this._fadeOutSeconds<=0||_.getEndTime()<0?1:It.getEasingSine((_.getEndTime()-s)/this._fadeOutSeconds);let Z,q,et,K=w;if(this._isLoop)for(;K>this._motionData.duration;)K-=this._motionData.duration;const gt=this._motionData.curves;for(q=0;q<this._motionData.curveCount&&gt.at(q).type==ai.CubismMotionCurveTarget_Model;++q)Z=rr(this._motionData,q,K),gt.at(q).id==this._modelCurveIdEyeBlink?I=Z:gt.at(q).id==this._modelCurveIdLipSync&&(T=Z);for(;q<this._motionData.curveCount&&gt.at(q).type==ai.CubismMotionCurveTarget_Parameter;++q){if(et=i.getParameterIndex(gt.at(q).id),et==-1)continue;const _t=i.getParameterValueByIndex(et);if(Z=rr(this._motionData,q,K),I!=Number.MAX_VALUE){for(let ct=0;ct<this._eyeBlinkParameterIds.getSize()&&ct<N;++ct)if(this._eyeBlinkParameterIds.at(ct)==gt.at(q).id){Z*=I,V|=1<<ct;break}}if(T!=Number.MAX_VALUE){for(let ct=0;ct<this._lipSyncParameterIds.getSize()&&ct<N;++ct)if(this._lipSyncParameterIds.at(ct)==gt.at(q).id){Z+=T,D|=1<<ct;break}}let mt;if(gt.at(q).fadeInTime<0&&gt.at(q).fadeOutTime<0)mt=_t+(Z-_t)*o;else{let ct,Et;gt.at(q).fadeInTime<0?ct=A:ct=gt.at(q).fadeInTime==0?1:It.getEasingSine((s-_.getFadeInStartTime())/gt.at(q).fadeInTime),gt.at(q).fadeOutTime<0?Et=G:Et=gt.at(q).fadeOutTime==0||_.getEndTime()<0?1:It.getEasingSine((_.getEndTime()-s)/gt.at(q).fadeOutTime);const Nt=this._weight*ct*Et;mt=_t+(Z-_t)*Nt}i.setParameterValueByIndex(et,mt,1)}{if(I!=Number.MAX_VALUE)for(let _t=0;_t<this._eyeBlinkParameterIds.getSize()&&_t<N;++_t){const mt=i.getParameterValueById(this._eyeBlinkParameterIds.at(_t));if(V>>_t&1)continue;const ct=mt+(I-mt)*o;i.setParameterValueById(this._eyeBlinkParameterIds.at(_t),ct)}if(T!=Number.MAX_VALUE)for(let _t=0;_t<this._lipSyncParameterIds.getSize()&&_t<N;++_t){const mt=i.getParameterValueById(this._lipSyncParameterIds.at(_t));if(D>>_t&1)continue;const ct=mt+(T-mt)*o;i.setParameterValueById(this._lipSyncParameterIds.at(_t),ct)}}for(;q<this._motionData.curveCount&&gt.at(q).type==ai.CubismMotionCurveTarget_PartOpacity;++q)et=i.getParameterIndex(gt.at(q).id),et!=-1&&(Z=rr(this._motionData,q,K),i.setParameterValueByIndex(et,Z));w>=this._motionData.duration&&(this._isLoop?(_.setStartTime(s),this._isLoopFadeIn&&_.setFadeInStartTime(s)):(this._onFinishedMotion&&this._onFinishedMotion(this),_.setIsFinished(!0))),this._lastWeight=o}setIsLoop(i){this._isLoop=i}isLoop(){return this._isLoop}setIsLoopFadeIn(i){this._isLoopFadeIn=i}isLoopFadeIn(){return this._isLoopFadeIn}getDuration(){return this._isLoop?-1:this._loopDurationSeconds}getLoopDuration(){return this._loopDurationSeconds}setParameterFadeInTime(i,s){const o=this._motionData.curves;for(let _=0;_<this._motionData.curveCount;++_)if(i==o.at(_).id){o.at(_).fadeInTime=s;return}}setParameterFadeOutTime(i,s){const o=this._motionData.curves;for(let _=0;_<this._motionData.curveCount;++_)if(i==o.at(_).id){o.at(_).fadeOutTime=s;return}}getParameterFadeInTime(i){const s=this._motionData.curves;for(let o=0;o<this._motionData.curveCount;++o)if(i==s.at(o).id)return s.at(o).fadeInTime;return-1}getParameterFadeOutTime(i){const s=this._motionData.curves;for(let o=0;o<this._motionData.curveCount;++o)if(i==s.at(o).id)return s.at(o).fadeOutTime;return-1}setEffectIds(i,s){this._eyeBlinkParameterIds=i,this._lipSyncParameterIds=s}constructor(){super(),this._sourceFrameRate=30,this._loopDurationSeconds=-1,this._isLoop=!1,this._isLoopFadeIn=!0,this._lastWeight=0,this._motionData=null,this._modelCurveIdEyeBlink=null,this._modelCurveIdLipSync=null,this._eyeBlinkParameterIds=null,this._lipSyncParameterIds=null}release(){this._motionData=void 0,this._motionData=null}parse(i,s){this._motionData=new Ps;let o=new Vs(i,s);this._motionData.duration=o.getMotionDuration(),this._motionData.loop=o.isMotionLoop(),this._motionData.curveCount=o.getMotionCurveCount(),this._motionData.fps=o.getMotionFps(),this._motionData.eventCount=o.getEventCount();const _=o.getEvaluationOptionFlag(Rs.EvaluationOptionFlag_AreBeziersRistricted);o.isExistMotionFadeInTime()?this._fadeInSeconds=o.getMotionFadeInTime()<0?1:o.getMotionFadeInTime():this._fadeInSeconds=1,o.isExistMotionFadeOutTime()?this._fadeOutSeconds=o.getMotionFadeOutTime()<0?1:o.getMotionFadeOutTime():this._fadeOutSeconds=1,this._motionData.curves.updateSize(this._motionData.curveCount,ks,!0),this._motionData.segments.updateSize(o.getMotionTotalSegmentCount(),ws,!0),this._motionData.points.updateSize(o.getMotionTotalPointCount(),ir,!0),this._motionData.events.updateSize(this._motionData.eventCount,Ms,!0);let w=0,T=0;for(let I=0;I<this._motionData.curveCount;++I){o.getMotionCurveTarget(I)==go?this._motionData.curves.at(I).type=ai.CubismMotionCurveTarget_Model:o.getMotionCurveTarget(I)==mo?this._motionData.curves.at(I).type=ai.CubismMotionCurveTarget_Parameter:o.getMotionCurveTarget(I)==_o?this._motionData.curves.at(I).type=ai.CubismMotionCurveTarget_PartOpacity:ei('Warning : Unable to get segment type from Curve! The number of "CurveCount" may be incorrect!'),this._motionData.curves.at(I).id=o.getMotionCurveId(I),this._motionData.curves.at(I).baseSegmentIndex=T,this._motionData.curves.at(I).fadeInTime=o.isExistMotionCurveFadeInTime(I)?o.getMotionCurveFadeInTime(I):-1,this._motionData.curves.at(I).fadeOutTime=o.isExistMotionCurveFadeOutTime(I)?o.getMotionCurveFadeOutTime(I):-1;for(let N=0;N<o.getMotionCurveSegmentCount(I);){switch(N==0?(this._motionData.segments.at(T).basePointIndex=w,this._motionData.points.at(w).time=o.getMotionCurveSegment(I,N),this._motionData.points.at(w).value=o.getMotionCurveSegment(I,N+1),w+=1,N+=2):this._motionData.segments.at(T).basePointIndex=w-1,o.getMotionCurveSegment(I,N)){case be.CubismMotionSegmentType_Linear:{this._motionData.segments.at(T).segmentType=be.CubismMotionSegmentType_Linear,this._motionData.segments.at(T).evaluate=yo,this._motionData.points.at(w).time=o.getMotionCurveSegment(I,N+1),this._motionData.points.at(w).value=o.getMotionCurveSegment(I,N+2),w+=1,N+=3;break}case be.CubismMotionSegmentType_Bezier:{this._motionData.segments.at(T).segmentType=be.CubismMotionSegmentType_Bezier,_||po?this._motionData.segments.at(T).evaluate=Ao:this._motionData.segments.at(T).evaluate=xo,this._motionData.points.at(w).time=o.getMotionCurveSegment(I,N+1),this._motionData.points.at(w).value=o.getMotionCurveSegment(I,N+2),this._motionData.points.at(w+1).time=o.getMotionCurveSegment(I,N+3),this._motionData.points.at(w+1).value=o.getMotionCurveSegment(I,N+4),this._motionData.points.at(w+2).time=o.getMotionCurveSegment(I,N+5),this._motionData.points.at(w+2).value=o.getMotionCurveSegment(I,N+6),w+=3,N+=7;break}case be.CubismMotionSegmentType_Stepped:{this._motionData.segments.at(T).segmentType=be.CubismMotionSegmentType_Stepped,this._motionData.segments.at(T).evaluate=So,this._motionData.points.at(w).time=o.getMotionCurveSegment(I,N+1),this._motionData.points.at(w).value=o.getMotionCurveSegment(I,N+2),w+=1,N+=3;break}case be.CubismMotionSegmentType_InverseStepped:{this._motionData.segments.at(T).segmentType=be.CubismMotionSegmentType_InverseStepped,this._motionData.segments.at(T).evaluate=Co,this._motionData.points.at(w).time=o.getMotionCurveSegment(I,N+1),this._motionData.points.at(w).value=o.getMotionCurveSegment(I,N+2),w+=1,N+=3;break}default:{Ue(0);break}}++this._motionData.curves.at(I).segmentCount,++T}}for(let I=0;I<o.getEventCount();++I)this._motionData.events.at(I).fireTime=o.getEventTime(I),this._motionData.events.at(I).value=o.getEventValue(I);o.release(),o=void 0,o=null}getFiredEvent(i,s){this._firedEventValues.updateSize(0);for(let o=0;o<this._motionData.eventCount;++o)this._motionData.events.at(o).fireTime>i&&this._motionData.events.at(o).fireTime<=s&&this._firedEventValues.pushBack(new Be(this._motionData.events.at(o).value.s));return this._firedEventValues}_sourceFrameRate;_loopDurationSeconds;_isLoop;_isLoopFadeIn;_lastWeight;_motionData;_eyeBlinkParameterIds;_lipSyncParameterIds;_modelCurveIdEyeBlink;_modelCurveIdLipSync}var Fs;(c=>{c.CubismMotion=v0})(Fs||(Fs={}));class bs{constructor(){this._autoDelete=!1,this._motion=null,this._available=!0,this._finished=!1,this._started=!1,this._startTimeSeconds=-1,this._fadeInStartTimeSeconds=0,this._endTimeSeconds=-1,this._stateTimeSeconds=0,this._stateWeight=0,this._lastEventCheckSeconds=0,this._motionQueueEntryHandle=this,this._fadeOutSeconds=0,this._isTriggeredFadeOut=!1}release(){this._autoDelete&&this._motion&&Fi.delete(this._motion)}setFadeOut(i){this._fadeOutSeconds=i,this._isTriggeredFadeOut=!0}startFadeOut(i,s){const o=s+i;this._isTriggeredFadeOut=!0,(this._endTimeSeconds<0||o<this._endTimeSeconds)&&(this._endTimeSeconds=o)}isFinished(){return this._finished}isStarted(){return this._started}getStartTime(){return this._startTimeSeconds}getFadeInStartTime(){return this._fadeInStartTimeSeconds}getEndTime(){return this._endTimeSeconds}setStartTime(i){this._startTimeSeconds=i}setFadeInStartTime(i){this._fadeInStartTimeSeconds=i}setEndTime(i){this._endTimeSeconds=i}setIsFinished(i){this._finished=i}setIsStarted(i){this._started=i}isAvailable(){return this._available}setIsAvailable(i){this._available=i}setState(i,s){this._stateTimeSeconds=i,this._stateWeight=s}getStateTime(){return this._stateTimeSeconds}getStateWeight(){return this._stateWeight}getLastCheckEventSeconds(){return this._lastEventCheckSeconds}setLastCheckEventSeconds(i){this._lastEventCheckSeconds=i}isTriggeredFadeOut(){return this._isTriggeredFadeOut}getFadeOutSeconds(){return this._fadeOutSeconds}_autoDelete;_motion;_available;_finished;_started;_startTimeSeconds;_fadeInStartTimeSeconds;_endTimeSeconds;_stateTimeSeconds;_stateWeight;_lastEventCheckSeconds;_fadeOutSeconds;_isTriggeredFadeOut;_motionQueueEntryHandle}var Es;(c=>{c.CubismMotionQueueEntry=bs})(Es||(Es={}));class Ds{constructor(){this._userTimeSeconds=0,this._eventCallBack=null,this._eventCustomData=null,this._motions=new At}release(){for(let i=0;i<this._motions.getSize();++i)this._motions.at(i)&&(this._motions.at(i).release(),this._motions.set(i,null));this._motions=null}startMotion(i,s,o){if(i==null)return gi;let _=null;for(let w=0;w<this._motions.getSize();++w)_=this._motions.at(w),_?.setFadeOut(_._motion.getFadeOutTime());return _=new bs,_._autoDelete=s,_._motion=i,this._motions.pushBack(_),_._motionQueueEntryHandle}isFinished(){for(let i=this._motions.begin();i.notEqual(this._motions.end());){let s=i.ptr();if(s==null){i=this._motions.erase(i);continue}if(s._motion==null){s.release(),s=null,i=this._motions.erase(i);continue}if(s.isFinished())i.preIncrement();else return!1}return!0}isFinishedByHandle(i){for(let s=this._motions.begin();s.notEqual(this._motions.end());s.increment()){const o=s.ptr();if(o!=null&&o._motionQueueEntryHandle==i&&!o.isFinished())return!1}return!0}stopAllMotions(){for(let i=this._motions.begin();i.notEqual(this._motions.end());){let s=i.ptr();if(s==null){i=this._motions.erase(i);continue}s.release(),s=null,i=this._motions.erase(i)}}getCubismMotionQueueEntry(i){for(let s=this._motions.begin();s.notEqual(this._motions.end());s.preIncrement()){const o=s.ptr();if(o!=null&&o._motionQueueEntryHandle==i)return o}return null}setEventCallback(i,s=null){this._eventCallBack=i,this._eventCustomData=s}doUpdateMotion(i,s){let o=!1;for(let _=this._motions.begin();_.notEqual(this._motions.end());){let w=_.ptr();if(w==null){_=this._motions.erase(_);continue}const T=w._motion;if(T==null){w.release(),w=null,_=this._motions.erase(_);continue}T.updateParameters(i,w,s),o=!0;const I=T.getFiredEvent(w.getLastCheckEventSeconds()-w.getStartTime(),s-w.getStartTime());for(let N=0;N<I.getSize();++N)this._eventCallBack(this,I.at(N),this._eventCustomData);w.setLastCheckEventSeconds(s),w.isFinished()?(w.release(),w=null,_=this._motions.erase(_)):(w.isTriggeredFadeOut()&&w.startFadeOut(w.getFadeOutSeconds(),s),_.preIncrement())}return o}_userTimeSeconds;_motions;_eventCallBack;_eventCustomData}const gi=-1;var Ls;(c=>{c.CubismMotionQueueManager=Ds,c.InvalidMotionQueueEntryHandleValue=gi})(Ls||(Ls={}));class qi extends Ds{constructor(){super(),this._currentPriority=0,this._reservePriority=0}getCurrentPriority(){return this._currentPriority}getReservePriority(){return this._reservePriority}setReservePriority(i){this._reservePriority=i}startMotionPriority(i,s,o){return o==this._reservePriority&&(this._reservePriority=0),this._currentPriority=o,super.startMotion(i,s,this._userTimeSeconds)}updateMotion(i,s){this._userTimeSeconds+=s;const o=super.doUpdateMotion(i,this._userTimeSeconds);return this.isFinished()&&(this._currentPriority=0),o}reserveMotion(i){return i<=this._reservePriority||i<=this._currentPriority?!1:(this._reservePriority=i,!0)}_currentPriority;_reservePriority}var Os;(c=>{c.CubismMotionManager=qi})(Os||(Os={}));var B0=(c=>(c[c.CubismPhysicsTargetType_Parameter=0]="CubismPhysicsTargetType_Parameter",c))(B0||{}),oi=(c=>(c[c.CubismPhysicsSource_X=0]="CubismPhysicsSource_X",c[c.CubismPhysicsSource_Y=1]="CubismPhysicsSource_Y",c[c.CubismPhysicsSource_Angle=2]="CubismPhysicsSource_Angle",c))(oi||{});class wo{constructor(){this.gravity=new St(0,0),this.wind=new St(0,0)}gravity;wind}class sr{id;targetType}class ar{minimum;maximum;defalut}class Us{constructor(){this.initialPosition=new St(0,0),this.position=new St(0,0),this.lastPosition=new St(0,0),this.lastGravity=new St(0,0),this.force=new St(0,0),this.velocity=new St(0,0)}initialPosition;mobility;delay;acceleration;radius;position;lastPosition;lastGravity;force;velocity}class Ns{constructor(){this.normalizationPosition=new ar,this.normalizationAngle=new ar}inputCount;outputCount;particleCount;baseInputIndex;baseOutputIndex;baseParticleIndex;normalizationPosition;normalizationAngle}class zs{constructor(){this.source=new sr}source;sourceParameterIndex;weight;type;reflect;getNormalizedParameterValue}class Gs{constructor(){this.destination=new sr,this.translationScale=new St(0,0)}destination;destinationParameterIndex;vertexIndex;translationScale;angleScale;weight;type;reflect;valueBelowMinimum;valueExceededMaximum;getValue;getScale}class Xs{constructor(){this.settings=new At,this.inputs=new At,this.outputs=new At,this.particles=new At,this.gravity=new St(0,0),this.wind=new St(0,0),this.fps=0}subRigCount;settings;inputs;outputs;particles;gravity;wind;fps}var Ys;(c=>{c.CubismPhysicsInput=zs,c.CubismPhysicsNormalization=ar,c.CubismPhysicsOutput=Gs,c.CubismPhysicsParameter=sr,c.CubismPhysicsParticle=Us,c.CubismPhysicsRig=Xs,c.CubismPhysicsSource=oi,c.CubismPhysicsSubRig=Ns,c.CubismPhysicsTargetType=B0,c.PhysicsJsonEffectiveForces=wo})(Ys||(Ys={}));const $i="Position",nr="X",or="Y",lr="Angle",js="Type",Hs="Id",Ze="Meta",I0="EffectiveForces",ko="TotalInputCount",Mo="TotalOutputCount",Po="PhysicsSettingCount",Ws="Gravity",Zs="Wind",vo="VertexCount",Bo="Fps",se="PhysicsSettings",bi="Normalization",Js="Minimum",qs="Maximum",$s="Default",Ks="Reflect",Qs="Weight",Ki="Input",Io="Source",di="Output",Vo="Scale",Ro="VertexIndex",To="Destination",mi="Vertices",Fo="Mobility",bo="Delay",Eo="Radius",Do="Acceleration";class ta{constructor(i,s){this._json=_e.create(i,s)}release(){_e.delete(this._json)}getGravity(){const i=new St(0,0);return i.x=this._json.getRoot().getValueByString(Ze).getValueByString(I0).getValueByString(Ws).getValueByString(nr).toFloat(),i.y=this._json.getRoot().getValueByString(Ze).getValueByString(I0).getValueByString(Ws).getValueByString(or).toFloat(),i}getWind(){const i=new St(0,0);return i.x=this._json.getRoot().getValueByString(Ze).getValueByString(I0).getValueByString(Zs).getValueByString(nr).toFloat(),i.y=this._json.getRoot().getValueByString(Ze).getValueByString(I0).getValueByString(Zs).getValueByString(or).toFloat(),i}getFps(){return this._json.getRoot().getValueByString(Ze).getValueByString(Bo).toFloat(0)}getSubRigCount(){return this._json.getRoot().getValueByString(Ze).getValueByString(Po).toInt()}getTotalInputCount(){return this._json.getRoot().getValueByString(Ze).getValueByString(ko).toInt()}getTotalOutputCount(){return this._json.getRoot().getValueByString(Ze).getValueByString(Mo).toInt()}getVertexCount(){return this._json.getRoot().getValueByString(Ze).getValueByString(vo).toInt()}getNormalizationPositionMinimumValue(i){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(bi).getValueByString($i).getValueByString(Js).toFloat()}getNormalizationPositionMaximumValue(i){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(bi).getValueByString($i).getValueByString(qs).toFloat()}getNormalizationPositionDefaultValue(i){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(bi).getValueByString($i).getValueByString($s).toFloat()}getNormalizationAngleMinimumValue(i){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(bi).getValueByString(lr).getValueByString(Js).toFloat()}getNormalizationAngleMaximumValue(i){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(bi).getValueByString(lr).getValueByString(qs).toFloat()}getNormalizationAngleDefaultValue(i){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(bi).getValueByString(lr).getValueByString($s).toFloat()}getInputCount(i){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(Ki).getVector().getSize()}getInputWeight(i,s){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(Ki).getValueByIndex(s).getValueByString(Qs).toFloat()}getInputReflect(i,s){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(Ki).getValueByIndex(s).getValueByString(Ks).toBoolean()}getInputType(i,s){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(Ki).getValueByIndex(s).getValueByString(js).getRawString()}getInputSourceId(i,s){return ee.getIdManager().getId(this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(Ki).getValueByIndex(s).getValueByString(Io).getValueByString(Hs).getRawString())}getOutputCount(i){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(di).getVector().getSize()}getOutputVertexIndex(i,s){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(di).getValueByIndex(s).getValueByString(Ro).toInt()}getOutputAngleScale(i,s){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(di).getValueByIndex(s).getValueByString(Vo).toFloat()}getOutputWeight(i,s){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(di).getValueByIndex(s).getValueByString(Qs).toFloat()}getOutputDestinationId(i,s){return ee.getIdManager().getId(this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(di).getValueByIndex(s).getValueByString(To).getValueByString(Hs).getRawString())}getOutputType(i,s){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(di).getValueByIndex(s).getValueByString(js).getRawString()}getOutputReflect(i,s){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(di).getValueByIndex(s).getValueByString(Ks).toBoolean()}getParticleCount(i){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(mi).getVector().getSize()}getParticleMobility(i,s){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(mi).getValueByIndex(s).getValueByString(Fo).toFloat()}getParticleDelay(i,s){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(mi).getValueByIndex(s).getValueByString(bo).toFloat()}getParticleAcceleration(i,s){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(mi).getValueByIndex(s).getValueByString(Do).toFloat()}getParticleRadius(i,s){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(mi).getValueByIndex(s).getValueByString(Eo).toFloat()}getParticlePosition(i,s){const o=new St(0,0);return o.x=this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(mi).getValueByIndex(s).getValueByString($i).getValueByString(nr).toFloat(),o.y=this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(mi).getValueByIndex(s).getValueByString($i).getValueByString(or).toFloat(),o}_json}var ea;(c=>{c.CubismPhysicsJson=ta})(ea||(ea={}));const ia="X",ra="Y",sa="Angle",Lo=5,ur=100,aa=.001,Oo=5;class Qi{static create(i,s){const o=new Qi;return o.parse(i,s),o._physicsRig.gravity.y=0,o}static delete(i){i!=null&&(i.release(),i=null)}parse(i,s){this._physicsRig=new Xs;let o=new ta(i,s);this._physicsRig.gravity=o.getGravity(),this._physicsRig.wind=o.getWind(),this._physicsRig.subRigCount=o.getSubRigCount(),this._physicsRig.fps=o.getFps(),this._physicsRig.settings.updateSize(this._physicsRig.subRigCount,Ns,!0),this._physicsRig.inputs.updateSize(o.getTotalInputCount(),zs,!0),this._physicsRig.outputs.updateSize(o.getTotalOutputCount(),Gs,!0),this._physicsRig.particles.updateSize(o.getVertexCount(),Us,!0),this._currentRigOutputs.clear(),this._previousRigOutputs.clear();let _=0,w=0,T=0;for(let I=0;I<this._physicsRig.settings.getSize();++I){this._physicsRig.settings.at(I).normalizationPosition.minimum=o.getNormalizationPositionMinimumValue(I),this._physicsRig.settings.at(I).normalizationPosition.maximum=o.getNormalizationPositionMaximumValue(I),this._physicsRig.settings.at(I).normalizationPosition.defalut=o.getNormalizationPositionDefaultValue(I),this._physicsRig.settings.at(I).normalizationAngle.minimum=o.getNormalizationAngleMinimumValue(I),this._physicsRig.settings.at(I).normalizationAngle.maximum=o.getNormalizationAngleMaximumValue(I),this._physicsRig.settings.at(I).normalizationAngle.defalut=o.getNormalizationAngleDefaultValue(I),this._physicsRig.settings.at(I).inputCount=o.getInputCount(I),this._physicsRig.settings.at(I).baseInputIndex=_;for(let V=0;V<this._physicsRig.settings.at(I).inputCount;++V)this._physicsRig.inputs.at(_+V).sourceParameterIndex=-1,this._physicsRig.inputs.at(_+V).weight=o.getInputWeight(I,V),this._physicsRig.inputs.at(_+V).reflect=o.getInputReflect(I,V),o.getInputType(I,V)==ia?(this._physicsRig.inputs.at(_+V).type=oi.CubismPhysicsSource_X,this._physicsRig.inputs.at(_+V).getNormalizedParameterValue=No):o.getInputType(I,V)==ra?(this._physicsRig.inputs.at(_+V).type=oi.CubismPhysicsSource_Y,this._physicsRig.inputs.at(_+V).getNormalizedParameterValue=zo):o.getInputType(I,V)==sa&&(this._physicsRig.inputs.at(_+V).type=oi.CubismPhysicsSource_Angle,this._physicsRig.inputs.at(_+V).getNormalizedParameterValue=Go),this._physicsRig.inputs.at(_+V).source.targetType=B0.CubismPhysicsTargetType_Parameter,this._physicsRig.inputs.at(_+V).source.id=o.getInputSourceId(I,V);_+=this._physicsRig.settings.at(I).inputCount,this._physicsRig.settings.at(I).outputCount=o.getOutputCount(I),this._physicsRig.settings.at(I).baseOutputIndex=w;const N=new oa;N.outputs.resize(this._physicsRig.settings.at(I).outputCount);const D=new oa;D.outputs.resize(this._physicsRig.settings.at(I).outputCount);for(let V=0;V<this._physicsRig.settings.at(I).outputCount;++V)N.outputs[V]=0,D.outputs[V]=0,this._physicsRig.outputs.at(w+V).destinationParameterIndex=-1,this._physicsRig.outputs.at(w+V).vertexIndex=o.getOutputVertexIndex(I,V),this._physicsRig.outputs.at(w+V).angleScale=o.getOutputAngleScale(I,V),this._physicsRig.outputs.at(w+V).weight=o.getOutputWeight(I,V),this._physicsRig.outputs.at(w+V).destination.targetType=B0.CubismPhysicsTargetType_Parameter,this._physicsRig.outputs.at(w+V).destination.id=o.getOutputDestinationId(I,V),o.getOutputType(I,V)==ia?(this._physicsRig.outputs.at(w+V).type=oi.CubismPhysicsSource_X,this._physicsRig.outputs.at(w+V).getValue=Xo,this._physicsRig.outputs.at(w+V).getScale=Zo):o.getOutputType(I,V)==ra?(this._physicsRig.outputs.at(w+V).type=oi.CubismPhysicsSource_Y,this._physicsRig.outputs.at(w+V).getValue=Yo,this._physicsRig.outputs.at(w+V).getScale=Jo):o.getOutputType(I,V)==sa&&(this._physicsRig.outputs.at(w+V).type=oi.CubismPhysicsSource_Angle,this._physicsRig.outputs.at(w+V).getValue=jo,this._physicsRig.outputs.at(w+V).getScale=qo),this._physicsRig.outputs.at(w+V).reflect=o.getOutputReflect(I,V);this._currentRigOutputs.pushBack(N),this._previousRigOutputs.pushBack(D),w+=this._physicsRig.settings.at(I).outputCount,this._physicsRig.settings.at(I).particleCount=o.getParticleCount(I),this._physicsRig.settings.at(I).baseParticleIndex=T;for(let V=0;V<this._physicsRig.settings.at(I).particleCount;++V)this._physicsRig.particles.at(T+V).mobility=o.getParticleMobility(I,V),this._physicsRig.particles.at(T+V).delay=o.getParticleDelay(I,V),this._physicsRig.particles.at(T+V).acceleration=o.getParticleAcceleration(I,V),this._physicsRig.particles.at(T+V).radius=o.getParticleRadius(I,V),this._physicsRig.particles.at(T+V).position=o.getParticlePosition(I,V);T+=this._physicsRig.settings.at(I).particleCount}this.initialize(),o.release(),o=void 0,o=null}stabilization(i){let s,o,_,w;const T=new St;let I,N,D,V,A,G,Z,q;A=i.getModel().parameters.values,G=i.getModel().parameters.maximumValues,Z=i.getModel().parameters.minimumValues,q=i.getModel().parameters.defaultValues,(this._parameterCaches?.length??0)<i.getParameterCount()&&(this._parameterCaches=new Float32Array(i.getParameterCount())),(this._parameterInputCaches?.length??0)<i.getParameterCount()&&(this._parameterInputCaches=new Float32Array(i.getParameterCount()));for(let et=0;et<i.getParameterCount();++et)this._parameterCaches[et]=A[et],this._parameterInputCaches[et]=A[et];for(let et=0;et<this._physicsRig.subRigCount;++et){s={angle:0},T.x=0,T.y=0,I=this._physicsRig.settings.at(et),N=this._physicsRig.inputs.get(I.baseInputIndex),D=this._physicsRig.outputs.get(I.baseOutputIndex),V=this._physicsRig.particles.get(I.baseParticleIndex);for(let K=0;K<I.inputCount;++K)o=N[K].weight/ur,N[K].sourceParameterIndex==-1&&(N[K].sourceParameterIndex=i.getParameterIndex(N[K].source.id)),N[K].getNormalizedParameterValue(T,s,A[N[K].sourceParameterIndex],Z[N[K].sourceParameterIndex],G[N[K].sourceParameterIndex],q[N[K].sourceParameterIndex],I.normalizationPosition,I.normalizationAngle,N[K].reflect,o),this._parameterCaches[N[K].sourceParameterIndex]=A[N[K].sourceParameterIndex];_=It.degreesToRadian(-s.angle),T.x=T.x*It.cos(_)-T.y*It.sin(_),T.y=T.x*It.sin(_)+T.y*It.cos(_),Ko(V,I.particleCount,T,s.angle,this._options.wind,aa*I.normalizationPosition.maximum);for(let K=0;K<I.outputCount;++K){const gt=D[K].vertexIndex;if(D[K].destinationParameterIndex==-1&&(D[K].destinationParameterIndex=i.getParameterIndex(D[K].destination.id)),gt<1||gt>=I.particleCount)continue;let _t=new St;_t=V[gt].position.substract(V[gt-1].position),w=D[K].getValue(_t,V,gt,D[K].reflect,this._options.gravity),this._currentRigOutputs.at(et).outputs[K]=w,this._previousRigOutputs.at(et).outputs[K]=w;const mt=D[K].destinationParameterIndex,ct=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(A.subarray(mt))):A.slice(mt);hr(ct,Z[mt],G[mt],w,D[K]);for(let Et=mt,Nt=0;Et<this._parameterCaches.length;Et++,Nt++)A[Et]=this._parameterCaches[Et]=ct[Nt]}}}evaluate(i,s){let o,_,w,T;const I=new St;let N,D,V,A;if(0>=s)return;let G,Z,q,et,K;if(this._currentRemainTime+=s,this._currentRemainTime>Oo&&(this._currentRemainTime=0),G=i.getModel().parameters.values,Z=i.getModel().parameters.maximumValues,q=i.getModel().parameters.minimumValues,et=i.getModel().parameters.defaultValues,(this._parameterCaches?.length??0)<i.getParameterCount()&&(this._parameterCaches=new Float32Array(i.getParameterCount())),(this._parameterInputCaches?.length??0)<i.getParameterCount()){this._parameterInputCaches=new Float32Array(i.getParameterCount());for(let _t=0;_t<i.getParameterCount();++_t)this._parameterInputCaches[_t]=G[_t]}for(this._physicsRig.fps>0?K=1/this._physicsRig.fps:K=s;this._currentRemainTime>=K;){for(let mt=0;mt<this._physicsRig.subRigCount;++mt){N=this._physicsRig.settings.at(mt),V=this._physicsRig.outputs.get(N.baseOutputIndex);for(let ct=0;ct<N.outputCount;++ct)this._previousRigOutputs.at(mt).outputs[ct]=this._currentRigOutputs.at(mt).outputs[ct]}const _t=K/this._currentRemainTime;for(let mt=0;mt<i.getParameterCount();++mt)this._parameterCaches[mt]=this._parameterInputCaches[mt]*(1-_t)+G[mt]*_t,this._parameterInputCaches[mt]=this._parameterCaches[mt];for(let mt=0;mt<this._physicsRig.subRigCount;++mt){o={angle:0},I.x=0,I.y=0,N=this._physicsRig.settings.at(mt),D=this._physicsRig.inputs.get(N.baseInputIndex),V=this._physicsRig.outputs.get(N.baseOutputIndex),A=this._physicsRig.particles.get(N.baseParticleIndex);for(let ct=0;ct<N.inputCount;++ct)_=D[ct].weight/ur,D[ct].sourceParameterIndex==-1&&(D[ct].sourceParameterIndex=i.getParameterIndex(D[ct].source.id)),D[ct].getNormalizedParameterValue(I,o,this._parameterCaches[D[ct].sourceParameterIndex],q[D[ct].sourceParameterIndex],Z[D[ct].sourceParameterIndex],et[D[ct].sourceParameterIndex],N.normalizationPosition,N.normalizationAngle,D[ct].reflect,_);w=It.degreesToRadian(-o.angle),I.x=I.x*It.cos(w)-I.y*It.sin(w),I.y=I.x*It.sin(w)+I.y*It.cos(w),$o(A,N.particleCount,I,o.angle,this._options.wind,aa*N.normalizationPosition.maximum,K,Lo);for(let ct=0;ct<N.outputCount;++ct){const Et=V[ct].vertexIndex;if(V[ct].destinationParameterIndex==-1&&(V[ct].destinationParameterIndex=i.getParameterIndex(V[ct].destination.id)),Et<1||Et>=N.particleCount)continue;const Nt=new St;Nt.x=A[Et].position.x-A[Et-1].position.x,Nt.y=A[Et].position.y-A[Et-1].position.y,T=V[ct].getValue(Nt,A,Et,V[ct].reflect,this._options.gravity),this._currentRigOutputs.at(mt).outputs[ct]=T;const pe=V[ct].destinationParameterIndex,ke=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(this._parameterCaches.subarray(pe))):this._parameterCaches.slice(pe);hr(ke,q[pe],Z[pe],T,V[ct]);for(let he=pe,qe=0;he<this._parameterCaches.length;he++,qe++)this._parameterCaches[he]=ke[qe]}}this._currentRemainTime-=K}const gt=this._currentRemainTime/K;this.interpolate(i,gt)}interpolate(i,s){let o,_,w,T,I;w=i.getModel().parameters.values,T=i.getModel().parameters.maximumValues,I=i.getModel().parameters.minimumValues;for(let N=0;N<this._physicsRig.subRigCount;++N){_=this._physicsRig.settings.at(N),o=this._physicsRig.outputs.get(_.baseOutputIndex);for(let D=0;D<_.outputCount;++D){if(o[D].destinationParameterIndex==-1)continue;const V=o[D].destinationParameterIndex,A=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(w.subarray(V))):w.slice(V);hr(A,I[V],T[V],this._previousRigOutputs.at(N).outputs[D]*(1-s)+this._currentRigOutputs.at(N).outputs[D]*s,o[D]);for(let G=V,Z=0;G<w.length;G++,Z++)w[G]=A[Z]}}}setOptions(i){this._options=i}getOption(){return this._options}constructor(){this._physicsRig=null,this._options=new na,this._options.gravity.y=-1,this._options.gravity.x=0,this._options.wind.x=0,this._options.wind.y=0,this._currentRigOutputs=new At,this._previousRigOutputs=new At,this._currentRemainTime=0,this._parameterCaches=null,this._parameterInputCaches=null}release(){this._physicsRig=void 0,this._physicsRig=null}initialize(){let i,s,o;for(let _=0;_<this._physicsRig.subRigCount;++_){s=this._physicsRig.settings.at(_),i=this._physicsRig.particles.get(s.baseParticleIndex),i[0].initialPosition=new St(0,0),i[0].lastPosition=new St(i[0].initialPosition.x,i[0].initialPosition.y),i[0].lastGravity=new St(0,-1),i[0].lastGravity.y*=-1,i[0].velocity=new St(0,0),i[0].force=new St(0,0);for(let w=1;w<s.particleCount;++w)o=new St(0,0),o.y=i[w].radius,i[w].initialPosition=new St(i[w-1].initialPosition.x+o.x,i[w-1].initialPosition.y+o.y),i[w].position=new St(i[w].initialPosition.x,i[w].initialPosition.y),i[w].lastPosition=new St(i[w].initialPosition.x,i[w].initialPosition.y),i[w].lastGravity=new St(0,-1),i[w].lastGravity.y*=-1,i[w].velocity=new St(0,0),i[w].force=new St(0,0)}}_physicsRig;_options;_currentRigOutputs;_previousRigOutputs;_currentRemainTime;_parameterCaches;_parameterInputCaches}class na{constructor(){this.gravity=new St(0,0),this.wind=new St(0,0)}gravity;wind}class oa{constructor(){this.outputs=new At(0)}outputs}function Uo(c){let i=0;return c>0?i=1:c<0&&(i=-1),i}function No(c,i,s,o,_,w,T,I,N,D){c.x+=cr(s,o,_,w,T.minimum,T.maximum,T.defalut,N)*D}function zo(c,i,s,o,_,w,T,I,N,D){c.y+=cr(s,o,_,w,T.minimum,T.maximum,T.defalut,N)*D}function Go(c,i,s,o,_,w,T,I,N,D){i.angle+=cr(s,o,_,w,I.minimum,I.maximum,I.defalut,N)*D}function Xo(c,i,s,o,_){let w=c.x;return o&&(w*=-1),w}function Yo(c,i,s,o,_){let w=c.y;return o&&(w*=-1),w}function jo(c,i,s,o,_){let w;return s>=2?_=i[s-1].position.substract(i[s-2].position):_=_.multiplyByScaler(-1),w=It.directionToRadian(_,c),o&&(w*=-1),w}function Ho(c,i){const s=It.max(c,i),o=It.min(c,i);return It.abs(s-o)}function Wo(c,i){return It.min(c,i)+Ho(c,i)/2}function Zo(c,i){return JSON.parse(JSON.stringify(c.x))}function Jo(c,i){return JSON.parse(JSON.stringify(c.y))}function qo(c,i){return JSON.parse(JSON.stringify(i))}function $o(c,i,s,o,_,w,T,I){let N,D,V,A,G=new St(0,0),Z=new St(0,0),q=new St(0,0),et=new St(0,0);c[0].position=new St(s.x,s.y),N=It.degreesToRadian(o),A=It.radianToDirection(N),A.normalize();for(let K=1;K<i;++K)c[K].force=A.multiplyByScaler(c[K].acceleration).add(_),c[K].lastPosition=new St(c[K].position.x,c[K].position.y),D=c[K].delay*T*30,G=c[K].position.substract(c[K-1].position),V=It.directionToRadian(c[K].lastGravity,A)/I,G.x=It.cos(V)*G.x-G.y*It.sin(V),G.y=It.sin(V)*G.x+G.y*It.cos(V),c[K].position=c[K-1].position.add(G),Z=c[K].velocity.multiplyByScaler(D),q=c[K].force.multiplyByScaler(D).multiplyByScaler(D),c[K].position=c[K].position.add(Z).add(q),et=c[K].position.substract(c[K-1].position),et.normalize(),c[K].position=c[K-1].position.add(et.multiplyByScaler(c[K].radius)),It.abs(c[K].position.x)<w&&(c[K].position.x=0),D!=0&&(c[K].velocity=c[K].position.substract(c[K].lastPosition),c[K].velocity=c[K].velocity.divisionByScalar(D),c[K].velocity=c[K].velocity.multiplyByScaler(c[K].mobility)),c[K].force=new St(0,0),c[K].lastGravity=new St(A.x,A.y)}function Ko(c,i,s,o,_,w){let T,I,N=new St(0,0);c[0].position=new St(s.x,s.y),T=It.degreesToRadian(o),I=It.radianToDirection(T),I.normalize();for(let D=1;D<i;++D)c[D].force=I.multiplyByScaler(c[D].acceleration).add(_),c[D].lastPosition=new St(c[D].position.x,c[D].position.y),c[D].velocity=new St(0,0),N=c[D].force,N.normalize(),N=N.multiplyByScaler(c[D].radius),c[D].position=c[D-1].position.add(N),It.abs(c[D].position.x)<w&&(c[D].position.x=0),c[D].force=new St(0,0),c[D].lastGravity=new St(I.x,I.y)}function hr(c,i,s,o,_){let w,T,I;w=_.getScale(_.translationScale,_.angleScale),T=o*w,T<i?(T<_.valueBelowMinimum&&(_.valueBelowMinimum=T),T=i):T>s&&(T>_.valueExceededMaximum&&(_.valueExceededMaximum=T),T=s),I=_.weight/ur,I>=1||(T=c[0]*(1-I)+T*I),c[0]=T}function cr(c,i,s,o,_,w,T,I){let N=0;const D=It.max(s,i);D<c&&(c=D);const V=It.min(s,i);V>c&&(c=V);const A=It.min(_,w),G=It.max(_,w),Z=T,q=Wo(V,D),et=c-q;switch(Uo(et)){case 1:{const K=G-Z,gt=D-q;gt!=0&&(N=et*(K/gt),N+=Z);break}case-1:{const K=A-Z,gt=V-q;gt!=0&&(N=et*(K/gt),N+=Z);break}case 0:{N=Z;break}}return I?N:N*-1}var la;(c=>{c.CubismPhysics=Qi,c.Options=na})(la||(la={}));class V0{constructor(i,s,o,_){this.x=i,this.y=s,this.width=o,this.height=_}getCenterX(){return this.x+.5*this.width}getCenterY(){return this.y+.5*this.height}getRight(){return this.x+this.width}getBottom(){return this.y+this.height}setRect(i){this.x=i.x,this.y=i.y,this.width=i.width,this.height=i.height}expand(i,s){this.x-=i,this.y-=s,this.width+=i*2,this.height+=s*2}x;y;width;height}var ua;(c=>{c.csmRect=V0})(ua||(ua={}));const R0=4,Qo=36,t2=32,e2=10;let _i,Je,T0;class fr{getChannelFlagAsColor(i){return this._channelColors.at(i)}getMaskRenderTexture(){if(this._maskTexture&&this._maskTexture.textures!=null)this._maskTexture.frameNo=this._currentFrameNo;else{this._maskRenderTextures!=null&&this._maskRenderTextures.clear(),this._maskRenderTextures=new At,this._maskColorBuffers!=null&&this._maskColorBuffers.clear(),this._maskColorBuffers=new At;const i=this._clippingMaskBufferSize;for(let s=0;s<this._renderTextureCount;s++)this._maskColorBuffers.pushBack(this.gl.createTexture()),this.gl.bindTexture(this.gl.TEXTURE_2D,this._maskColorBuffers.at(s)),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,i,i,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this._maskRenderTextures.pushBack(this.gl.createFramebuffer()),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._maskRenderTextures.at(s)),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this._maskColorBuffers.at(s),0);this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,T0),this._maskTexture=new ha(this._currentFrameNo,this._maskRenderTextures)}return this._maskTexture.textures}setGL(i){this.gl=i}calcClippedDrawTotalBounds(i,s){let o=Number.MAX_VALUE,_=Number.MAX_VALUE,w=Number.MIN_VALUE,T=Number.MIN_VALUE;const I=s._clippedDrawableIndexList.length;for(let N=0;N<I;N++){const D=s._clippedDrawableIndexList[N],V=i.getDrawableVertexCount(D),A=i.getDrawableVertices(D);let G=Number.MAX_VALUE,Z=Number.MAX_VALUE,q=-Number.MAX_VALUE,et=-Number.MAX_VALUE;const K=V*ii.vertexStep;for(let gt=ii.vertexOffset;gt<K;gt+=ii.vertexStep){const _t=A[gt],mt=A[gt+1];_t<G&&(G=_t),_t>q&&(q=_t),mt<Z&&(Z=mt),mt>et&&(et=mt)}if(G!=Number.MAX_VALUE)if(G<o&&(o=G),Z<_&&(_=Z),q>w&&(w=q),et>T&&(T=et),o==Number.MAX_VALUE)s._allClippedDrawRect.x=0,s._allClippedDrawRect.y=0,s._allClippedDrawRect.width=0,s._allClippedDrawRect.height=0,s._isUsing=!1;else{s._isUsing=!0;const gt=w-o,_t=T-_;s._allClippedDrawRect.x=o,s._allClippedDrawRect.y=_,s._allClippedDrawRect.width=gt,s._allClippedDrawRect.height=_t}}}constructor(){this._currentMaskRenderTexture=null,this._maskColorBuffers=null,this._currentFrameNo=0,this._renderTextureCount=0,this._clippingMaskBufferSize=256,this._clippingContextListForMask=new At,this._clippingContextListForDraw=new At,this._channelColors=new At,this._tmpBoundsOnModel=new V0,this._tmpMatrix=new oe,this._tmpMatrixForMask=new oe,this._tmpMatrixForDraw=new oe,this._maskTexture=null;let i=new He;i.R=1,i.G=0,i.B=0,i.A=0,this._channelColors.pushBack(i),i=new He,i.R=0,i.G=1,i.B=0,i.A=0,this._channelColors.pushBack(i),i=new He,i.R=0,i.G=0,i.B=1,i.A=0,this._channelColors.pushBack(i),i=new He,i.R=0,i.G=0,i.B=0,i.A=1,this._channelColors.pushBack(i)}release(){for(let i=0;i<this._clippingContextListForMask.getSize();i++)this._clippingContextListForMask.at(i)&&(this._clippingContextListForMask.at(i).release(),this._clippingContextListForMask.set(i,void 0)),this._clippingContextListForMask.set(i,null);this._clippingContextListForMask=null;for(let i=0;i<this._clippingContextListForDraw.getSize();i++)this._clippingContextListForDraw.set(i,null);if(this._clippingContextListForDraw=null,this._maskTexture){for(let i=0;i<this._maskTexture.textures.getSize();i++)this.gl.deleteFramebuffer(this._maskTexture.textures.at(i));this._maskTexture.textures.clear(),this._maskTexture.textures=null,this._maskTexture=null}for(let i=0;i<this._channelColors.getSize();i++)this._channelColors.set(i,null);if(this._channelColors=null,this._maskColorBuffers!=null){for(let i=0;i<this._maskColorBuffers.getSize();i++)this.gl.deleteTexture(this._maskColorBuffers.at(i));this._maskColorBuffers.clear()}this._maskColorBuffers=null,this._maskRenderTextures!=null&&this._maskRenderTextures.clear(),this._maskRenderTextures=null,this._clearedFrameBufferflags!=null&&this._clearedFrameBufferflags.clear(),this._clearedFrameBufferflags=null}initialize(i,s,o,_,w){w%1!=0&&(ei("The number of render textures must be specified as an integer. The decimal point is rounded down and corrected to an integer."),w=~~w),w<1&&ei("The number of render textures must be an integer greater than or equal to 1. Set the number of render textures to 1."),this._renderTextureCount=w<1?1:w,this._clearedFrameBufferflags=new At(this._renderTextureCount);for(let T=0;T<s;T++){if(_[T]<=0){this._clippingContextListForDraw.pushBack(null);continue}let I=this.findSameClip(o[T],_[T]);I==null&&(I=new ca(this,o[T],_[T]),this._clippingContextListForMask.pushBack(I)),I.addClippedDrawable(T),this._clippingContextListForDraw.pushBack(I)}}setupClippingContext(i,s){this._currentFrameNo++;let o=0;for(let _=0;_<this._clippingContextListForMask.getSize();_++){const w=this._clippingContextListForMask.at(_);this.calcClippedDrawTotalBounds(i,w),w._isUsing&&o++}if(o>0){this.setupLayoutBounds(s.isUsingHighPrecisionMask()?0:o),s.isUsingHighPrecisionMask()||(this.gl.viewport(0,0,this._clippingMaskBufferSize,this._clippingMaskBufferSize),this._currentMaskRenderTexture=this.getMaskRenderTexture().at(0),s.preDraw(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._currentMaskRenderTexture)),this._clearedFrameBufferflags.getSize()!=this._renderTextureCount&&(this._clearedFrameBufferflags.clear(),this._clearedFrameBufferflags=new At(this._renderTextureCount));for(let _=0;_<this._clearedFrameBufferflags.getSize();_++)this._clearedFrameBufferflags[_]=!1;for(let _=0;_<this._clippingContextListForMask.getSize();_++){const w=this._clippingContextListForMask.at(_),T=w._allClippedDrawRect,I=w._layoutBounds,N=.05;let D=0,V=0;const A=this.getMaskRenderTexture().at(w._bufferIndex);if(this._currentMaskRenderTexture!=A&&!s.isUsingHighPrecisionMask()&&(this._currentMaskRenderTexture=A,s.preDraw(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._currentMaskRenderTexture)),s.isUsingHighPrecisionMask()){const G=i.getPixelsPerUnit(),Z=w.getClippingManager()._clippingMaskBufferSize,q=I.width*Z,et=I.height*Z;this._tmpBoundsOnModel.setRect(T),this._tmpBoundsOnModel.width*G>q?(this._tmpBoundsOnModel.expand(T.width*N,0),D=I.width/this._tmpBoundsOnModel.width):D=G/q,this._tmpBoundsOnModel.height*G>et?(this._tmpBoundsOnModel.expand(0,T.height*N),V=I.height/this._tmpBoundsOnModel.height):V=G/et}else this._tmpBoundsOnModel.setRect(T),this._tmpBoundsOnModel.expand(T.width*N,T.height*N),D=I.width/this._tmpBoundsOnModel.width,V=I.height/this._tmpBoundsOnModel.height;if(this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(-1,-1),this._tmpMatrix.scaleRelative(2,2),this._tmpMatrix.translateRelative(I.x,I.y),this._tmpMatrix.scaleRelative(D,V),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()),this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(I.x,I.y),this._tmpMatrix.scaleRelative(D,V),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray()),w._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()),w._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray()),!s.isUsingHighPrecisionMask()){const G=w._clippingIdCount;for(let Z=0;Z<G;Z++){const q=w._clippingIdList[Z];i.getDrawableDynamicFlagVertexPositionsDidChange(q)&&(s.setIsCulling(i.getDrawableCulling(q)!=!1),this._clearedFrameBufferflags[w._bufferIndex]||(this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this._clearedFrameBufferflags[w._bufferIndex]=!0),s.setClippingContextBufferForMask(w),s.drawMesh(i.getDrawableTextureIndex(q),i.getDrawableVertexIndexCount(q),i.getDrawableVertexCount(q),i.getDrawableVertexIndices(q),i.getDrawableVertices(q),i.getDrawableVertexUvs(q),i.getMultiplyColor(q),i.getScreenColor(q),i.getDrawableOpacity(q),Oe.CubismBlendMode_Normal,!1))}}}s.isUsingHighPrecisionMask()||(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,T0),s.setClippingContextBufferForMask(null),this.gl.viewport(Je[0],Je[1],Je[2],Je[3]))}}findSameClip(i,s){for(let o=0;o<this._clippingContextListForMask.getSize();o++){const _=this._clippingContextListForMask.at(o),w=_._clippingIdCount;if(w!=s)continue;let T=0;for(let I=0;I<w;I++){const N=_._clippingIdList[I];for(let D=0;D<w;D++)if(i[D]==N){T++;break}}if(T==w)return _}return null}setupLayoutBounds(i){const s=this._renderTextureCount<=1?Qo:t2*this._renderTextureCount;if(i<=0||i>s){i>s&&Ce(`not supported mask count : {0}
[Details] render texture count : {1}, mask count : {2}`,i-s,this._renderTextureCount,i);for(let D=0;D<this._clippingContextListForMask.getSize();D++){const V=this._clippingContextListForMask.at(D);V._layoutChannelNo=0,V._layoutBounds.x=0,V._layoutBounds.y=0,V._layoutBounds.width=1,V._layoutBounds.height=1,V._bufferIndex=0}return}const o=this._renderTextureCount<=1?9:8;let _=i/this._renderTextureCount,w=i%this._renderTextureCount;_=~~_,w=~~w;let T=_/R0,I=_%R0;T=~~T,I=~~I;let N=0;for(let D=0;D<this._renderTextureCount;D++)for(let V=0;V<R0;V++){let A=T+(V<I?1:0);const G=I+1>=R0?0:I+1;if(A<o&&V==G&&(A+=D<w?1:0),A!=0)if(A==1){const Z=this._clippingContextListForMask.at(N++);Z._layoutChannelNo=V,Z._layoutBounds.x=0,Z._layoutBounds.y=0,Z._layoutBounds.width=1,Z._layoutBounds.height=1,Z._bufferIndex=D}else if(A==2)for(let Z=0;Z<A;Z++){let q=Z%2;q=~~q;const et=this._clippingContextListForMask.at(N++);et._layoutChannelNo=V,et._layoutBounds.x=q*.5,et._layoutBounds.y=0,et._layoutBounds.width=.5,et._layoutBounds.height=1,et._bufferIndex=D}else if(A<=4)for(let Z=0;Z<A;Z++){let q=Z%2,et=Z/2;q=~~q,et=~~et;const K=this._clippingContextListForMask.at(N++);K._layoutChannelNo=V,K._layoutBounds.x=q*.5,K._layoutBounds.y=et*.5,K._layoutBounds.width=.5,K._layoutBounds.height=.5,K._bufferIndex=D}else if(A<=o)for(let Z=0;Z<A;Z++){let q=Z%3,et=Z/3;q=~~q,et=~~et;const K=this._clippingContextListForMask.at(N++);K._layoutChannelNo=V,K._layoutBounds.x=q/3,K._layoutBounds.y=et/3,K._layoutBounds.width=.3333333333333333,K._layoutBounds.height=.3333333333333333,K._bufferIndex=D}else{Ce(`not supported mask count : {0}
[Details] render texture count : {1}, mask count : {2}`,i-s,this._renderTextureCount,i);for(let Z=0;Z<A;Z++){const q=this._clippingContextListForMask.at(N++);q._layoutChannelNo=0,q._layoutBounds.x=0,q._layoutBounds.y=0,q._layoutBounds.width=1,q._layoutBounds.height=1,q._bufferIndex=0}}}}getColorBuffer(){return this._maskColorBuffers}getClippingContextListForDraw(){return this._clippingContextListForDraw}getClippingMaskCount(){return this._clippingContextListForMask.getSize()}setClippingMaskBufferSize(i){this._clippingMaskBufferSize=i}getClippingMaskBufferSize(){return this._clippingMaskBufferSize}getRenderTextureCount(){return this._renderTextureCount}_currentMaskRenderTexture;_maskRenderTextures;_maskColorBuffers;_currentFrameNo;_channelColors;_maskTexture;_clippingContextListForMask;_clippingContextListForDraw;_clippingMaskBufferSize;_renderTextureCount;_tmpMatrix;_tmpMatrixForMask;_tmpMatrixForDraw;_tmpBoundsOnModel;_clearedFrameBufferflags;gl}class ha{constructor(i,s){this.frameNo=i,this.textures=s}frameNo;textures}class ca{constructor(i,s,o){this._owner=i,this._clippingIdList=s,this._clippingIdCount=o,this._allClippedDrawRect=new V0,this._layoutBounds=new V0,this._clippedDrawableIndexList=[],this._matrixForMask=new oe,this._matrixForDraw=new oe,this._bufferIndex=0}release(){this._layoutBounds!=null&&(this._layoutBounds=null),this._allClippedDrawRect!=null&&(this._allClippedDrawRect=null),this._clippedDrawableIndexList!=null&&(this._clippedDrawableIndexList=null)}addClippedDrawable(i){this._clippedDrawableIndexList.push(i)}getClippingManager(){return this._owner}setGl(i){this._owner.setGL(i)}_isUsing;_clippingIdList;_clippingIdCount;_layoutChannelNo;_layoutBounds;_allClippedDrawRect;_matrixForMask;_matrixForDraw;_clippedDrawableIndexList;_bufferIndex;_owner}class i2{setGlEnable(i,s){s?this.gl.enable(i):this.gl.disable(i)}setGlEnableVertexAttribArray(i,s){s?this.gl.enableVertexAttribArray(i):this.gl.disableVertexAttribArray(i)}save(){if(this.gl==null){Ce(`'gl' is null. WebGLRenderingContext is required.
Please call 'CubimRenderer_WebGL.startUp' function.`);return}this._lastArrayBufferBinding=this.gl.getParameter(this.gl.ARRAY_BUFFER_BINDING),this._lastElementArrayBufferBinding=this.gl.getParameter(this.gl.ELEMENT_ARRAY_BUFFER_BINDING),this._lastProgram=this.gl.getParameter(this.gl.CURRENT_PROGRAM),this._lastActiveTexture=this.gl.getParameter(this.gl.ACTIVE_TEXTURE),this.gl.activeTexture(this.gl.TEXTURE1),this._lastTexture1Binding2D=this.gl.getParameter(this.gl.TEXTURE_BINDING_2D),this.gl.activeTexture(this.gl.TEXTURE0),this._lastTexture0Binding2D=this.gl.getParameter(this.gl.TEXTURE_BINDING_2D),this._lastVertexAttribArrayEnabled[0]=this.gl.getVertexAttrib(0,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastVertexAttribArrayEnabled[1]=this.gl.getVertexAttrib(1,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastVertexAttribArrayEnabled[2]=this.gl.getVertexAttrib(2,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastVertexAttribArrayEnabled[3]=this.gl.getVertexAttrib(3,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastScissorTest=this.gl.isEnabled(this.gl.SCISSOR_TEST),this._lastStencilTest=this.gl.isEnabled(this.gl.STENCIL_TEST),this._lastDepthTest=this.gl.isEnabled(this.gl.DEPTH_TEST),this._lastCullFace=this.gl.isEnabled(this.gl.CULL_FACE),this._lastBlend=this.gl.isEnabled(this.gl.BLEND),this._lastFrontFace=this.gl.getParameter(this.gl.FRONT_FACE),this._lastColorMask=this.gl.getParameter(this.gl.COLOR_WRITEMASK),this._lastBlending[0]=this.gl.getParameter(this.gl.BLEND_SRC_RGB),this._lastBlending[1]=this.gl.getParameter(this.gl.BLEND_DST_RGB),this._lastBlending[2]=this.gl.getParameter(this.gl.BLEND_SRC_ALPHA),this._lastBlending[3]=this.gl.getParameter(this.gl.BLEND_DST_ALPHA),this._lastFBO=this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING),this._lastViewport=this.gl.getParameter(this.gl.VIEWPORT)}restore(){if(this.gl==null){Ce(`'gl' is null. WebGLRenderingContext is required.
Please call 'CubimRenderer_WebGL.startUp' function.`);return}this.gl.useProgram(this._lastProgram),this.setGlEnableVertexAttribArray(0,this._lastVertexAttribArrayEnabled[0]),this.setGlEnableVertexAttribArray(1,this._lastVertexAttribArrayEnabled[1]),this.setGlEnableVertexAttribArray(2,this._lastVertexAttribArrayEnabled[2]),this.setGlEnableVertexAttribArray(3,this._lastVertexAttribArrayEnabled[3]),this.setGlEnable(this.gl.SCISSOR_TEST,this._lastScissorTest),this.setGlEnable(this.gl.STENCIL_TEST,this._lastStencilTest),this.setGlEnable(this.gl.DEPTH_TEST,this._lastDepthTest),this.setGlEnable(this.gl.CULL_FACE,this._lastCullFace),this.setGlEnable(this.gl.BLEND,this._lastBlend),this.gl.frontFace(this._lastFrontFace),this.gl.colorMask(this._lastColorMask[0],this._lastColorMask[1],this._lastColorMask[2],this._lastColorMask[3]),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this._lastArrayBufferBinding),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this._lastElementArrayBufferBinding),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,this._lastTexture1Binding2D),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this._lastTexture0Binding2D),this.gl.activeTexture(this._lastActiveTexture),this.gl.blendFuncSeparate(this._lastBlending[0],this._lastBlending[1],this._lastBlending[2],this._lastBlending[3])}setGl(i){this.gl=i}constructor(){this._lastVertexAttribArrayEnabled=new Array(4),this._lastColorMask=new Array(4),this._lastBlending=new Array(4),this._lastViewport=new Array(4)}_lastArrayBufferBinding;_lastElementArrayBufferBinding;_lastProgram;_lastActiveTexture;_lastTexture0Binding2D;_lastTexture1Binding2D;_lastVertexAttribArrayEnabled;_lastScissorTest;_lastBlend;_lastStencilTest;_lastDepthTest;_lastCullFace;_lastFrontFace;_lastColorMask;_lastBlending;_lastFBO;_lastViewport;gl}class Ei{static getInstance(){return _i==null&&(_i=new Ei),_i}static deleteInstance(){_i&&(_i.release(),_i=null)}constructor(){this._shaderSets=new At}release(){this.releaseShaderProgram()}setupShaderProgram(i,s,o,_,w,T,I,N,D,V,A,G,Z,q,et){Z||Ce("NoPremultipliedAlpha is not allowed"),this._shaderSets.getSize()==0&&this.generateShaders();let K,gt,_t,mt;if(i.getClippingContextBufferForMask()!=null){const ct=this._shaderSets.at(0);this.gl.useProgram(ct.shaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,s),this.gl.uniform1i(ct.samplerTexture0Location,0),I.vertex==null&&(I.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,I.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,_,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(ct.attributePositionLocation),this.gl.vertexAttribPointer(ct.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),I.uv==null&&(I.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,I.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,T,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(ct.attributeTexCoordLocation),this.gl.vertexAttribPointer(ct.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0);const Et=i.getClippingContextBufferForMask()._layoutChannelNo,Nt=i.getClippingContextBufferForMask().getClippingManager().getChannelFlagAsColor(Et);this.gl.uniform4f(ct.uniformChannelFlagLocation,Nt.R,Nt.G,Nt.B,Nt.A),this.gl.uniformMatrix4fv(ct.uniformClipMatrixLocation,!1,i.getClippingContextBufferForMask()._matrixForMask.getArray());const pe=i.getClippingContextBufferForMask()._layoutBounds;this.gl.uniform4f(ct.uniformBaseColorLocation,pe.x*2-1,pe.y*2-1,pe.getRight()*2-1,pe.getBottom()*2-1),this.gl.uniform4f(ct.uniformMultiplyColorLocation,A.R,A.G,A.B,A.A),this.gl.uniform4f(ct.uniformScreenColorLocation,G.R,G.G,G.B,G.A),K=this.gl.ZERO,gt=this.gl.ONE_MINUS_SRC_COLOR,_t=this.gl.ZERO,mt=this.gl.ONE_MINUS_SRC_ALPHA}else{const ct=i.getClippingContextBufferForDraw()!=null,Et=ct?et?2:1:0;let Nt=new gr;switch(D){case Oe.CubismBlendMode_Normal:default:Nt=this._shaderSets.at(1+Et),K=this.gl.ONE,gt=this.gl.ONE_MINUS_SRC_ALPHA,_t=this.gl.ONE,mt=this.gl.ONE_MINUS_SRC_ALPHA;break;case Oe.CubismBlendMode_Additive:Nt=this._shaderSets.at(4+Et),K=this.gl.ONE,gt=this.gl.ONE,_t=this.gl.ZERO,mt=this.gl.ONE;break;case Oe.CubismBlendMode_Multiplicative:Nt=this._shaderSets.at(7+Et),K=this.gl.DST_COLOR,gt=this.gl.ONE_MINUS_SRC_ALPHA,_t=this.gl.ZERO,mt=this.gl.ONE;break}if(this.gl.useProgram(Nt.shaderProgram),I.vertex==null&&(I.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,I.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,_,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(Nt.attributePositionLocation),this.gl.vertexAttribPointer(Nt.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),I.uv==null&&(I.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,I.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,T,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(Nt.attributeTexCoordLocation),this.gl.vertexAttribPointer(Nt.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0),ct){this.gl.activeTexture(this.gl.TEXTURE1);const pe=i.getClippingContextBufferForDraw().getClippingManager().getColorBuffer().at(i.getClippingContextBufferForDraw()._bufferIndex);this.gl.bindTexture(this.gl.TEXTURE_2D,pe),this.gl.uniform1i(Nt.samplerTexture1Location,1),this.gl.uniformMatrix4fv(Nt.uniformClipMatrixLocation,!1,i.getClippingContextBufferForDraw()._matrixForDraw.getArray());const ke=i.getClippingContextBufferForDraw()._layoutChannelNo,he=i.getClippingContextBufferForDraw().getClippingManager().getChannelFlagAsColor(ke);this.gl.uniform4f(Nt.uniformChannelFlagLocation,he.R,he.G,he.B,he.A)}this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,s),this.gl.uniform1i(Nt.samplerTexture0Location,0),this.gl.uniformMatrix4fv(Nt.uniformMatrixLocation,!1,q.getArray()),this.gl.uniform4f(Nt.uniformBaseColorLocation,V.R,V.G,V.B,V.A),this.gl.uniform4f(Nt.uniformMultiplyColorLocation,A.R,A.G,A.B,A.A),this.gl.uniform4f(Nt.uniformScreenColorLocation,G.R,G.G,G.B,G.A)}I.index==null&&(I.index=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,I.index),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,w,this.gl.DYNAMIC_DRAW),this.gl.blendFuncSeparate(K,gt,_t,mt)}releaseShaderProgram(){for(let i=0;i<this._shaderSets.getSize();i++)this.gl.deleteProgram(this._shaderSets.at(i).shaderProgram),this._shaderSets.at(i).shaderProgram=0,this._shaderSets.set(i,void 0),this._shaderSets.set(i,null)}generateShaders(){for(let i=0;i<e2;i++)this._shaderSets.pushBack(new gr);this._shaderSets.at(0).shaderProgram=this.loadShaderProgram(r2,s2),this._shaderSets.at(1).shaderProgram=this.loadShaderProgram(a2,n2),this._shaderSets.at(2).shaderProgram=this.loadShaderProgram(ga,o2),this._shaderSets.at(3).shaderProgram=this.loadShaderProgram(ga,l2),this._shaderSets.at(4).shaderProgram=this._shaderSets.at(1).shaderProgram,this._shaderSets.at(5).shaderProgram=this._shaderSets.at(2).shaderProgram,this._shaderSets.at(6).shaderProgram=this._shaderSets.at(3).shaderProgram,this._shaderSets.at(7).shaderProgram=this._shaderSets.at(1).shaderProgram,this._shaderSets.at(8).shaderProgram=this._shaderSets.at(2).shaderProgram,this._shaderSets.at(9).shaderProgram=this._shaderSets.at(3).shaderProgram,this._shaderSets.at(0).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram,"a_position"),this._shaderSets.at(0).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram,"a_texCoord"),this._shaderSets.at(0).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"s_texture0"),this._shaderSets.at(0).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_clipMatrix"),this._shaderSets.at(0).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_channelFlag"),this._shaderSets.at(0).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_baseColor"),this._shaderSets.at(0).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_multiplyColor"),this._shaderSets.at(0).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_screenColor"),this._shaderSets.at(1).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram,"a_position"),this._shaderSets.at(1).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram,"a_texCoord"),this._shaderSets.at(1).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"s_texture0"),this._shaderSets.at(1).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_matrix"),this._shaderSets.at(1).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_baseColor"),this._shaderSets.at(1).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_multiplyColor"),this._shaderSets.at(1).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_screenColor"),this._shaderSets.at(2).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram,"a_position"),this._shaderSets.at(2).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram,"a_texCoord"),this._shaderSets.at(2).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"s_texture0"),this._shaderSets.at(2).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"s_texture1"),this._shaderSets.at(2).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_matrix"),this._shaderSets.at(2).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_clipMatrix"),this._shaderSets.at(2).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_channelFlag"),this._shaderSets.at(2).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_baseColor"),this._shaderSets.at(2).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_multiplyColor"),this._shaderSets.at(2).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_screenColor"),this._shaderSets.at(3).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram,"a_position"),this._shaderSets.at(3).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram,"a_texCoord"),this._shaderSets.at(3).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"s_texture0"),this._shaderSets.at(3).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"s_texture1"),this._shaderSets.at(3).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_matrix"),this._shaderSets.at(3).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_clipMatrix"),this._shaderSets.at(3).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_channelFlag"),this._shaderSets.at(3).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_baseColor"),this._shaderSets.at(3).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_multiplyColor"),this._shaderSets.at(3).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_screenColor"),this._shaderSets.at(4).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram,"a_position"),this._shaderSets.at(4).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram,"a_texCoord"),this._shaderSets.at(4).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"s_texture0"),this._shaderSets.at(4).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_matrix"),this._shaderSets.at(4).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_baseColor"),this._shaderSets.at(4).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_multiplyColor"),this._shaderSets.at(4).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_screenColor"),this._shaderSets.at(5).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram,"a_position"),this._shaderSets.at(5).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram,"a_texCoord"),this._shaderSets.at(5).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"s_texture0"),this._shaderSets.at(5).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"s_texture1"),this._shaderSets.at(5).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_matrix"),this._shaderSets.at(5).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_clipMatrix"),this._shaderSets.at(5).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_channelFlag"),this._shaderSets.at(5).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_baseColor"),this._shaderSets.at(5).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_multiplyColor"),this._shaderSets.at(5).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_screenColor"),this._shaderSets.at(6).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram,"a_position"),this._shaderSets.at(6).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram,"a_texCoord"),this._shaderSets.at(6).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"s_texture0"),this._shaderSets.at(6).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"s_texture1"),this._shaderSets.at(6).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_matrix"),this._shaderSets.at(6).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_clipMatrix"),this._shaderSets.at(6).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_channelFlag"),this._shaderSets.at(6).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_baseColor"),this._shaderSets.at(6).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_multiplyColor"),this._shaderSets.at(6).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_screenColor"),this._shaderSets.at(7).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram,"a_position"),this._shaderSets.at(7).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram,"a_texCoord"),this._shaderSets.at(7).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"s_texture0"),this._shaderSets.at(7).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_matrix"),this._shaderSets.at(7).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_baseColor"),this._shaderSets.at(7).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_multiplyColor"),this._shaderSets.at(7).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_screenColor"),this._shaderSets.at(8).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram,"a_position"),this._shaderSets.at(8).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram,"a_texCoord"),this._shaderSets.at(8).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"s_texture0"),this._shaderSets.at(8).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"s_texture1"),this._shaderSets.at(8).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_matrix"),this._shaderSets.at(8).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_clipMatrix"),this._shaderSets.at(8).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_channelFlag"),this._shaderSets.at(8).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_baseColor"),this._shaderSets.at(8).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_multiplyColor"),this._shaderSets.at(8).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_screenColor"),this._shaderSets.at(9).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram,"a_position"),this._shaderSets.at(9).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram,"a_texCoord"),this._shaderSets.at(9).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"s_texture0"),this._shaderSets.at(9).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"s_texture1"),this._shaderSets.at(9).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_matrix"),this._shaderSets.at(9).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_clipMatrix"),this._shaderSets.at(9).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_channelFlag"),this._shaderSets.at(9).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_baseColor"),this._shaderSets.at(9).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_multiplyColor"),this._shaderSets.at(9).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_screenColor")}loadShaderProgram(i,s){let o=this.gl.createProgram(),_=this.compileShaderSource(this.gl.VERTEX_SHADER,i);if(!_)return Ce("Vertex shader compile error!"),0;let w=this.compileShaderSource(this.gl.FRAGMENT_SHADER,s);return w?(this.gl.attachShader(o,_),this.gl.attachShader(o,w),this.gl.linkProgram(o),this.gl.getProgramParameter(o,this.gl.LINK_STATUS)?(this.gl.deleteShader(_),this.gl.deleteShader(w),o):(Ce("Failed to link program: {0}",o),this.gl.deleteShader(_),_=0,this.gl.deleteShader(w),w=0,o&&(this.gl.deleteProgram(o),o=0),0)):(Ce("Vertex shader compile error!"),0)}compileShaderSource(i,s){const o=s,_=this.gl.createShader(i);if(this.gl.shaderSource(_,o),this.gl.compileShader(_),!_){const T=this.gl.getShaderInfoLog(_);Ce("Shader compile log: {0} ",T)}return this.gl.getShaderParameter(_,this.gl.COMPILE_STATUS)?_:(this.gl.deleteShader(_),null)}setGl(i){this.gl=i}_shaderSets;gl}class gr{shaderProgram;attributePositionLocation;attributeTexCoordLocation;uniformMatrixLocation;uniformClipMatrixLocation;samplerTexture0Location;samplerTexture1Location;uniformBaseColorLocation;uniformChannelFlagLocation;uniformMultiplyColorLocation;uniformScreenColorLocation}var fa=(c=>(c[c.ShaderNames_SetupMask=0]="ShaderNames_SetupMask",c[c.ShaderNames_NormalPremultipliedAlpha=1]="ShaderNames_NormalPremultipliedAlpha",c[c.ShaderNames_NormalMaskedPremultipliedAlpha=2]="ShaderNames_NormalMaskedPremultipliedAlpha",c[c.ShaderNames_NomralMaskedInvertedPremultipliedAlpha=3]="ShaderNames_NomralMaskedInvertedPremultipliedAlpha",c[c.ShaderNames_AddPremultipliedAlpha=4]="ShaderNames_AddPremultipliedAlpha",c[c.ShaderNames_AddMaskedPremultipliedAlpha=5]="ShaderNames_AddMaskedPremultipliedAlpha",c[c.ShaderNames_AddMaskedPremultipliedAlphaInverted=6]="ShaderNames_AddMaskedPremultipliedAlphaInverted",c[c.ShaderNames_MultPremultipliedAlpha=7]="ShaderNames_MultPremultipliedAlpha",c[c.ShaderNames_MultMaskedPremultipliedAlpha=8]="ShaderNames_MultMaskedPremultipliedAlpha",c[c.ShaderNames_MultMaskedPremultipliedAlphaInverted=9]="ShaderNames_MultMaskedPremultipliedAlphaInverted",c))(fa||{});const r2="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",s2="precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}",a2="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",ga="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",n2="precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;uniform vec4       u_multiplyColor;uniform vec4       u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 color = texColor * u_baseColor;   gl_FragColor = vec4(color.rgb, color.a);}",o2="precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;uniform vec4       u_multiplyColor;uniform vec4       u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 col_formask = texColor * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}",l2="precision mediump float;varying vec2      v_texCoord;varying vec4      v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4      u_channelFlag;uniform vec4      u_baseColor;uniform vec4      u_multiplyColor;uniform vec4      u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 col_formask = texColor * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * (1.0 - maskVal);   gl_FragColor = col_formask;}";class dr extends p0{initialize(i,s=1){i.isUsingMasking()&&(this._clippingManager=new fr,this._clippingManager.initialize(i,i.getDrawableCount(),i.getDrawableMasks(),i.getDrawableMaskCounts(),s)),this._sortedDrawableIndexList.resize(i.getDrawableCount(),0),super.initialize(i)}bindTexture(i,s){this._textures.setValue(i,s)}getBindedTextures(){return this._textures}setClippingMaskBufferSize(i){if(!this._model.isUsingMasking())return;const s=this._clippingManager.getRenderTextureCount();this._clippingManager.release(),this._clippingManager=void 0,this._clippingManager=null,this._clippingManager=new fr,this._clippingManager.setClippingMaskBufferSize(i),this._clippingManager.initialize(this.getModel(),this.getModel().getDrawableCount(),this.getModel().getDrawableMasks(),this.getModel().getDrawableMaskCounts(),s)}getClippingMaskBufferSize(){return this._model.isUsingMasking()?this._clippingManager.getClippingMaskBufferSize():-1}getRenderTextureCount(){return this._model.isUsingMasking()?this._clippingManager.getRenderTextureCount():-1}constructor(){super(),this._clippingContextBufferForMask=null,this._clippingContextBufferForDraw=null,this._rendererProfile=new i2,this.firstDraw=!0,this._textures=new we,this._sortedDrawableIndexList=new At,this._bufferData={vertex:WebGLBuffer=null,uv:WebGLBuffer=null,index:WebGLBuffer=null},this._textures.prepareCapacity(32,!0)}release(){this._clippingManager&&(this._clippingManager.release(),this._clippingManager=void 0,this._clippingManager=null),this.gl!=null&&(this.gl.deleteBuffer(this._bufferData.vertex),this._bufferData.vertex=null,this.gl.deleteBuffer(this._bufferData.uv),this._bufferData.uv=null,this.gl.deleteBuffer(this._bufferData.index),this._bufferData.index=null,this._bufferData=null,this._textures=null)}doDrawModel(){if(this.gl==null){Ce(`'gl' is null. WebGLRenderingContext is required.
Please call 'CubimRenderer_WebGL.startUp' function.`);return}this._clippingManager!=null&&(this.preDraw(),this._clippingManager.setupClippingContext(this.getModel(),this)),this.preDraw();const i=this.getModel().getDrawableCount(),s=this.getModel().getDrawableRenderOrders();for(let o=0;o<i;++o){const _=s[o];this._sortedDrawableIndexList.set(_,o)}for(let o=0;o<i;++o){const _=this._sortedDrawableIndexList.at(o);if(!this.getModel().getDrawableDynamicFlagIsVisible(_))continue;const w=this._clippingManager!=null?this._clippingManager.getClippingContextListForDraw().at(_):null;if(w!=null&&this.isUsingHighPrecisionMask()){w._isUsing&&(this.gl.viewport(0,0,this._clippingManager.getClippingMaskBufferSize(),this._clippingManager.getClippingMaskBufferSize()),this.preDraw(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,w.getClippingManager().getMaskRenderTexture().at(w._bufferIndex)),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT));{const T=w._clippingIdCount;for(let I=0;I<T;I++){const N=w._clippingIdList[I];this._model.getDrawableDynamicFlagVertexPositionsDidChange(N)&&(this.setIsCulling(this._model.getDrawableCulling(N)!=!1),this.setClippingContextBufferForMask(w),this.drawMesh(this.getModel().getDrawableTextureIndex(N),this.getModel().getDrawableVertexIndexCount(N),this.getModel().getDrawableVertexCount(N),this.getModel().getDrawableVertexIndices(N),this.getModel().getDrawableVertices(N),this.getModel().getDrawableVertexUvs(N),this.getModel().getMultiplyColor(N),this.getModel().getScreenColor(N),this.getModel().getDrawableOpacity(N),Oe.CubismBlendMode_Normal,!1))}}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,T0),this.setClippingContextBufferForMask(null),this.gl.viewport(Je[0],Je[1],Je[2],Je[3]),this.preDraw()}this.setClippingContextBufferForDraw(w),this.setIsCulling(this.getModel().getDrawableCulling(_)),this.drawMesh(this.getModel().getDrawableTextureIndex(_),this.getModel().getDrawableVertexIndexCount(_),this.getModel().getDrawableVertexCount(_),this.getModel().getDrawableVertexIndices(_),this.getModel().getDrawableVertices(_),this.getModel().getDrawableVertexUvs(_),this.getModel().getMultiplyColor(_),this.getModel().getScreenColor(_),this.getModel().getDrawableOpacity(_),this.getModel().getDrawableBlendMode(_),this.getModel().getDrawableInvertedMaskBit(_))}}drawMesh(i,s,o,_,w,T,I,N,D,V,A){this.isCulling()?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this.gl.frontFace(this.gl.CCW);const G=this.getModelColor();this.getClippingContextBufferForMask()==null&&(G.A*=D,this.isPremultipliedAlpha()&&(G.R*=G.A,G.G*=G.A,G.B*=G.A));let Z;this._textures.getValue(i)!=null?Z=this._textures.getValue(i):Z=null,Ei.getInstance().setupShaderProgram(this,Z,o,w,_,T,this._bufferData,D,V,G,I,N,this.isPremultipliedAlpha(),this.getMvpMatrix(),A),this.gl.drawElements(this.gl.TRIANGLES,s,this.gl.UNSIGNED_SHORT,0),this.gl.useProgram(null),this.setClippingContextBufferForDraw(null),this.setClippingContextBufferForMask(null)}saveProfile(){this._rendererProfile.save()}restoreProfile(){this._rendererProfile.restore()}static doStaticRelease(){Ei.deleteInstance()}setRenderState(i,s){T0=i,Je=s}preDraw(){if(this.firstDraw&&(this.firstDraw=!1),this.gl.disable(this.gl.SCISSOR_TEST),this.gl.disable(this.gl.STENCIL_TEST),this.gl.disable(this.gl.DEPTH_TEST),this.gl.frontFace(this.gl.CW),this.gl.enable(this.gl.BLEND),this.gl.colorMask(!0,!0,!0,!0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null),this.getAnisotropy()>0&&this._extension)for(let i=0;i<this._textures.getSize();++i)this.gl.bindTexture(this.gl.TEXTURE_2D,this._textures.getValue(i)),this.gl.texParameterf(this.gl.TEXTURE_2D,this._extension.TEXTURE_MAX_ANISOTROPY_EXT,this.getAnisotropy())}setClippingContextBufferForMask(i){this._clippingContextBufferForMask=i}getClippingContextBufferForMask(){return this._clippingContextBufferForMask}setClippingContextBufferForDraw(i){this._clippingContextBufferForDraw=i}getClippingContextBufferForDraw(){return this._clippingContextBufferForDraw}startUp(i){this.gl=i,this._clippingManager&&this._clippingManager.setGL(i),Ei.getInstance().setGl(i),this._rendererProfile.setGl(i),this._extension=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")}_textures;_sortedDrawableIndexList;_clippingManager;_clippingContextBufferForMask;_clippingContextBufferForDraw;_rendererProfile;firstDraw;_bufferData;_extension;gl}p0.staticRelease=()=>{dr.doStaticRelease()};var da;(c=>{c.CubismClippingContext=ca,c.CubismClippingManager_WebGL=fr,c.CubismRenderTextureResource=ha,c.CubismRenderer_WebGL=dr,c.CubismShaderSet=gr,c.CubismShader_WebGL=Ei,c.ShaderNames=fa})(da||(da={}));class ma{isOverwritten=!1;Color=new He}class _a{constructor(i=!1,s=!1){i=this.isOverwritten,s=this.isCulling}isOverwritten;isCulling}class pa{update(){this._model.update(),this._model.drawables.resetDynamicFlags()}getPixelsPerUnit(){return this._model==null?0:this._model.canvasinfo.PixelsPerUnit}getCanvasWidth(){return this._model==null?0:this._model.canvasinfo.CanvasWidth/this._model.canvasinfo.PixelsPerUnit}getCanvasHeight(){return this._model==null?0:this._model.canvasinfo.CanvasHeight/this._model.canvasinfo.PixelsPerUnit}saveParameters(){const i=this._model.parameters.count,s=this._savedParameters.getSize();for(let o=0;o<i;++o)o<s?this._savedParameters.set(o,this._parameterValues[o]):this._savedParameters.pushBack(this._parameterValues[o])}getMultiplyColor(i){return this.getOverwriteFlagForModelMultiplyColors()||this.getOverwriteFlagForDrawableMultiplyColors(i)?this._userMultiplyColors.at(i).Color:this.getDrawableMultiplyColor(i)}getScreenColor(i){return this.getOverwriteFlagForModelScreenColors()||this.getOverwriteFlagForDrawableScreenColors(i)?this._userScreenColors.at(i).Color:this.getDrawableScreenColor(i)}setMultiplyColorByTextureColor(i,s){this.setMultiplyColorByRGBA(i,s.R,s.G,s.B,s.A)}setMultiplyColorByRGBA(i,s,o,_,w=1){this._userMultiplyColors.at(i).Color.R=s,this._userMultiplyColors.at(i).Color.G=o,this._userMultiplyColors.at(i).Color.B=_,this._userMultiplyColors.at(i).Color.A=w}setScreenColorByTextureColor(i,s){this.setScreenColorByRGBA(i,s.R,s.G,s.B,s.A)}setScreenColorByRGBA(i,s,o,_,w=1){this._userScreenColors.at(i).Color.R=s,this._userScreenColors.at(i).Color.G=o,this._userScreenColors.at(i).Color.B=_,this._userScreenColors.at(i).Color.A=w}getOverwriteFlagForModelMultiplyColors(){return this._isOverwrittenModelMultiplyColors}getOverwriteFlagForModelScreenColors(){return this._isOverwrittenModelScreenColors}setOverwriteFlagForModelMultiplyColors(i){this._isOverwrittenModelMultiplyColors=i}setOverwriteFlagForModelScreenColors(i){this._isOverwrittenModelScreenColors=i}getOverwriteFlagForDrawableMultiplyColors(i){return this._userMultiplyColors.at(i).isOverwritten}getOverwriteFlagForDrawableScreenColors(i){return this._userMultiplyColors.at(i).isOverwritten}setOverwriteFlagForDrawableMultiplyColors(i,s){this._userMultiplyColors.at(i).isOverwritten=s}setOverwriteFlagForDrawableScreenColors(i,s){this._userScreenColors.at(i).isOverwritten=s}getDrawableCulling(i){if(this.getOverwriteFlagForModelCullings()||this.getOverwriteFlagForDrawableCullings(i))return this._userCullings.at(i).isCulling;const s=this._model.drawables.constantFlags;return!ne.Utils.hasIsDoubleSidedBit(s[i])}setDrawableCulling(i,s){this._userCullings.at(i).isCulling=s}getOverwriteFlagForModelCullings(){return this._isOverwrittenCullings}setOverwriteFlagForModelCullings(i){this._isOverwrittenCullings=i}getOverwriteFlagForDrawableCullings(i){return this._userCullings.at(i).isOverwritten}setOverwriteFlagForDrawableCullings(i,s){this._userCullings.at(i).isOverwritten=s}getModel(){return this._model}getPartIndex(i){let s;const o=this._model.parts.count;for(s=0;s<o;++s)if(i==this._partIds.at(s))return s;return this._notExistPartId.isExist(i)?this._notExistPartId.getValue(i):(s=o+this._notExistPartId.getSize(),this._notExistPartId.setValue(i,s),this._notExistPartOpacities.appendKey(s),s)}getPartCount(){return this._model.parts.count}setPartOpacityByIndex(i,s){if(this._notExistPartOpacities.isExist(i)){this._notExistPartOpacities.setValue(i,s);return}Ue(0<=i&&i<this.getPartCount()),this._partOpacities[i]=s}setPartOpacityById(i,s){const o=this.getPartIndex(i);o<0||this.setPartOpacityByIndex(o,s)}getPartOpacityByIndex(i){return this._notExistPartOpacities.isExist(i)?this._notExistPartOpacities.getValue(i):(Ue(0<=i&&i<this.getPartCount()),this._partOpacities[i])}getPartOpacityById(i){const s=this.getPartIndex(i);return s<0?0:this.getPartOpacityByIndex(s)}getParameterIndex(i){let s;const o=this._model.parameters.count;for(s=0;s<o;++s)if(i==this._parameterIds.at(s))return s;return this._notExistParameterId.isExist(i)?this._notExistParameterId.getValue(i):(s=this._model.parameters.count+this._notExistParameterId.getSize(),this._notExistParameterId.setValue(i,s),this._notExistParameterValues.appendKey(s),s)}getParameterCount(){return this._model.parameters.count}getParameterType(i){return this._model.parameters.types[i]}getParameterMaximumValue(i){return this._model.parameters.maximumValues[i]}getParameterMinimumValue(i){return this._model.parameters.minimumValues[i]}getParameterDefaultValue(i){return this._model.parameters.defaultValues[i]}getParameterValueByIndex(i){return this._notExistParameterValues.isExist(i)?this._notExistParameterValues.getValue(i):(Ue(0<=i&&i<this.getParameterCount()),this._parameterValues[i])}getParameterValueById(i){const s=this.getParameterIndex(i);return this.getParameterValueByIndex(s)}setParameterValueByIndex(i,s,o=1){if(this._notExistParameterValues.isExist(i)){this._notExistParameterValues.setValue(i,o==1?s:this._notExistParameterValues.getValue(i)*(1-o)+s*o);return}Ue(0<=i&&i<this.getParameterCount()),this._model.parameters.maximumValues[i]<s&&(s=this._model.parameters.maximumValues[i]),this._model.parameters.minimumValues[i]>s&&(s=this._model.parameters.minimumValues[i]),this._parameterValues[i]=o==1?s:this._parameterValues[i]=this._parameterValues[i]*(1-o)+s*o}setParameterValueById(i,s,o=1){const _=this.getParameterIndex(i);this.setParameterValueByIndex(_,s,o)}addParameterValueByIndex(i,s,o=1){this.setParameterValueByIndex(i,this.getParameterValueByIndex(i)+s*o)}addParameterValueById(i,s,o=1){const _=this.getParameterIndex(i);this.addParameterValueByIndex(_,s,o)}multiplyParameterValueById(i,s,o=1){const _=this.getParameterIndex(i);this.multiplyParameterValueByIndex(_,s,o)}multiplyParameterValueByIndex(i,s,o=1){this.setParameterValueByIndex(i,this.getParameterValueByIndex(i)*(1+(s-1)*o))}getDrawableIndex(i){const s=this._model.drawables.count;for(let o=0;o<s;++o)if(this._drawableIds.at(o)==i)return o;return-1}getDrawableCount(){return this._model.drawables.count}getDrawableId(i){const s=this._model.drawables.ids;return ee.getIdManager().getId(s[i])}getDrawableRenderOrders(){return this._model.drawables.renderOrders}getDrawableTextureIndices(i){return this.getDrawableTextureIndex(i)}getDrawableTextureIndex(i){return this._model.drawables.textureIndices[i]}getDrawableDynamicFlagVertexPositionsDidChange(i){const s=this._model.drawables.dynamicFlags;return ne.Utils.hasVertexPositionsDidChangeBit(s[i])}getDrawableVertexIndexCount(i){return this._model.drawables.indexCounts[i]}getDrawableVertexCount(i){return this._model.drawables.vertexCounts[i]}getDrawableVertices(i){return this.getDrawableVertexPositions(i)}getDrawableVertexIndices(i){return this._model.drawables.indices[i]}getDrawableVertexPositions(i){return this._model.drawables.vertexPositions[i]}getDrawableVertexUvs(i){return this._model.drawables.vertexUvs[i]}getDrawableOpacity(i){return this._model.drawables.opacities[i]}getDrawableMultiplyColor(i){const s=this._model.drawables.multiplyColors,o=i*4,_=new He;return _.R=s[o],_.G=s[o+1],_.B=s[o+2],_.A=s[o+3],_}getDrawableScreenColor(i){const s=this._model.drawables.screenColors,o=i*4,_=new He;return _.R=s[o],_.G=s[o+1],_.B=s[o+2],_.A=s[o+3],_}getDrawableParentPartIndex(i){return this._model.drawables.parentPartIndices[i]}getDrawableBlendMode(i){const s=this._model.drawables.constantFlags;return ne.Utils.hasBlendAdditiveBit(s[i])?Oe.CubismBlendMode_Additive:ne.Utils.hasBlendMultiplicativeBit(s[i])?Oe.CubismBlendMode_Multiplicative:Oe.CubismBlendMode_Normal}getDrawableInvertedMaskBit(i){const s=this._model.drawables.constantFlags;return ne.Utils.hasIsInvertedMaskBit(s[i])}getDrawableMasks(){return this._model.drawables.masks}getDrawableMaskCounts(){return this._model.drawables.maskCounts}isUsingMasking(){for(let i=0;i<this._model.drawables.count;++i)if(!(this._model.drawables.maskCounts[i]<=0))return!0;return!1}getDrawableDynamicFlagIsVisible(i){const s=this._model.drawables.dynamicFlags;return ne.Utils.hasIsVisibleBit(s[i])}getDrawableDynamicFlagVisibilityDidChange(i){const s=this._model.drawables.dynamicFlags;return ne.Utils.hasVisibilityDidChangeBit(s[i])}getDrawableDynamicFlagOpacityDidChange(i){const s=this._model.drawables.dynamicFlags;return ne.Utils.hasOpacityDidChangeBit(s[i])}getDrawableDynamicFlagRenderOrderDidChange(i){const s=this._model.drawables.dynamicFlags;return ne.Utils.hasRenderOrderDidChangeBit(s[i])}getDrawableDynamicFlagBlendColorDidChange(i){const s=this._model.drawables.dynamicFlags;return ne.Utils.hasBlendColorDidChangeBit(s[i])}loadParameters(){let i=this._model.parameters.count;const s=this._savedParameters.getSize();i>s&&(i=s);for(let o=0;o<i;++o)this._parameterValues[o]=this._savedParameters.at(o)}initialize(){Ue(this._model),this._parameterValues=this._model.parameters.values,this._partOpacities=this._model.parts.opacities,this._parameterMaximumValues=this._model.parameters.maximumValues,this._parameterMinimumValues=this._model.parameters.minimumValues;{const i=this._model.parameters.ids,s=this._model.parameters.count;this._parameterIds.prepareCapacity(s);for(let o=0;o<s;++o)this._parameterIds.pushBack(ee.getIdManager().getId(i[o]))}{const i=this._model.parts.ids,s=this._model.parts.count;this._partIds.prepareCapacity(s);for(let o=0;o<s;++o)this._partIds.pushBack(ee.getIdManager().getId(i[o]))}{const i=this._model.drawables.ids,s=this._model.drawables.count;this._userMultiplyColors=new At,this._userMultiplyColors.updateSize(s,ma,!0),this._userScreenColors=new At,this._userScreenColors.updateSize(s,ma,!0),this._userCullings=new At,this._userCullings.updateSize(s,_a,!0);const o=new _a(!1,!1);this._drawableIds.prepareCapacity(s);for(let _=0;_<s;++_)this._drawableIds.pushBack(ee.getIdManager().getId(i[_])),this.setMultiplyColorByRGBA(_,1,1,1,1),this.setScreenColorByRGBA(_,0,0,0,1),this._userCullings.pushBack(o)}}constructor(i){this._model=i,this._parameterValues=null,this._parameterMaximumValues=null,this._parameterMinimumValues=null,this._partOpacities=null,this._savedParameters=new At,this._parameterIds=new At,this._drawableIds=new At,this._partIds=new At,this._isOverwrittenModelMultiplyColors=!1,this._isOverwrittenModelScreenColors=!1,this._isOverwrittenCullings=!1,this._userMultiplyColors=null,this._userScreenColors=null,this._notExistPartId=new we,this._notExistParameterId=new we,this._notExistParameterValues=new we,this._notExistPartOpacities=new we}release(){this._model.release(),this._model=null}_notExistPartOpacities;_notExistPartId;_notExistParameterValues;_notExistParameterId;_savedParameters;_isOverwrittenModelMultiplyColors;_isOverwrittenModelScreenColors;_userMultiplyColors;_userScreenColors;_model;_parameterValues;_parameterMaximumValues;_parameterMinimumValues;_partOpacities;_parameterIds;_partIds;_drawableIds;_isOverwrittenCullings;_userCullings}var ya;(c=>{c.CubismModel=pa})(ya||(ya={}));class F0{static create(i){let s=null;const o=ne.Moc.fromArrayBuffer(i);return o&&(s=new F0(o),s._mocVersion=ne.Version.csmGetMocVersion(o,i)),s}static delete(i){i._moc._release(),i._moc=null,i=null}createModel(){let i=null;const s=ne.Model.fromMoc(this._moc);return s&&(i=new pa(s),i.initialize(),++this._modelCount),i}deleteModel(i){i!=null&&(i.release(),i=null,--this._modelCount)}constructor(i){this._moc=i,this._modelCount=0,this._mocVersion=0}release(){Ue(this._modelCount==0),this._moc._release(),this._moc=null}getLatestMocVersion(){return ne.Version.csmGetLatestMocVersion()}getMocVersion(){return this._mocVersion}static hasMocConsistency(i){return ne.Moc.prototype.hasMocConsistency(i)===1}_moc;_modelCount;_mocVersion}var Aa;(c=>{c.CubismMoc=F0})(Aa||(Aa={}));const xa="Meta",u2="UserDataCount",h2="TotalUserDataSize",mr="UserData",c2="Target",f2="Id",g2="Value";class Sa{constructor(i,s){this._json=_e.create(i,s)}release(){_e.delete(this._json)}getUserDataCount(){return this._json.getRoot().getValueByString(xa).getValueByString(u2).toInt()}getTotalUserDataSize(){return this._json.getRoot().getValueByString(xa).getValueByString(h2).toInt()}getUserDataTargetType(i){return this._json.getRoot().getValueByString(mr).getValueByIndex(i).getValueByString(c2).getRawString()}getUserDataId(i){return ee.getIdManager().getId(this._json.getRoot().getValueByString(mr).getValueByIndex(i).getValueByString(f2).getRawString())}getUserDataValue(i){return this._json.getRoot().getValueByString(mr).getValueByIndex(i).getValueByString(g2).getRawString()}_json}var Ca;(c=>{c.CubismModelUserDataJson=Sa})(Ca||(Ca={}));const d2="ArtMesh";class wa{targetType;targetId;value}class t0{static create(i,s){const o=new t0;return o.parseUserData(i,s),o}static delete(i){i!=null&&(i.release(),i=null)}getArtMeshUserDatas(){return this._artMeshUserDataNode}parseUserData(i,s){let o=new Sa(i,s);const _=ee.getIdManager().getId(d2),w=o.getUserDataCount();for(let T=0;T<w;T++){const I=new wa;I.targetId=o.getUserDataId(T),I.targetType=ee.getIdManager().getId(o.getUserDataTargetType(T)),I.value=new Be(o.getUserDataValue(T)),this._userDataNodes.pushBack(I),I.targetType==_&&this._artMeshUserDataNode.pushBack(I)}o.release(),o=void 0}constructor(){this._userDataNodes=new At,this._artMeshUserDataNode=new At}release(){for(let i=0;i<this._userDataNodes.getSize();++i)this._userDataNodes.set(i,null);this._userDataNodes=null}_userDataNodes;_artMeshUserDataNode}var ka;(c=>{c.CubismModelUserData=t0,c.CubismModelUserDataNode=wa})(ka||(ka={}));class b0{isInitialized(){return this._initialized}setInitialized(i){this._initialized=i}isUpdating(){return this._updating}setUpdating(i){this._updating=i}setDragging(i,s){this._dragManager.set(i,s)}setAcceleration(i,s,o){this._accelerationX=i,this._accelerationY=s,this._accelerationZ=o}getModelMatrix(){return this._modelMatrix}setOpacity(i){this._opacity=i}getOpacity(){return this._opacity}loadModel(i){if(this._moc=F0.create(i),this._moc==null){Ce("Failed to CubismMoc.create().");return}if(this._model=this._moc.createModel(),this._model==null){Ce("Failed to CreateModel().");return}this._model.saveParameters(),this._modelMatrix=new hs(this._model.getCanvasWidth(),this._model.getCanvasHeight())}loadMotion=(i,s,o,_)=>v0.create(i,s,_);loadExpression(i,s,o){return k0.create(i,s)}loadPose(i,s){this._pose=Zi.create(i,s)}loadUserData(i,s){this._modelUserData=t0.create(i,s)}loadPhysics(i,s){this._physics=Qi.create(i,s)}isHit(i,s,o){const _=this._model.getDrawableIndex(i);if(_<0)return!1;const w=this._model.getDrawableVertexCount(_),T=this._model.getDrawableVertices(_);let I=T[0],N=T[0],D=T[1],V=T[1];for(let Z=1;Z<w;++Z){const q=T[ii.vertexOffset+Z*ii.vertexStep],et=T[ii.vertexOffset+Z*ii.vertexStep+1];q<I&&(I=q),q>N&&(N=q),et<D&&(D=et),et>V&&(V=et)}const A=this._modelMatrix.invertTransformX(s),G=this._modelMatrix.invertTransformY(o);return I<=A&&A<=N&&D<=G&&G<=V}getModel(){return this._model}getRenderer(){return this._renderer}createRenderer(i=1){this._renderer&&this.deleteRenderer(),this._renderer=new dr,this._renderer.initialize(this._model,i)}deleteRenderer(){this._renderer!=null&&(this._renderer.release(),this._renderer=null)}motionEventFired(i){We("{0}",i.s)}static cubismDefaultMotionEventCallback(i,s,o){const _=o;_?.motionEventFired(s)}constructor(){this._moc=null,this._model=null,this._motionManager=null,this._expressionManager=null,this._eyeBlink=null,this._breath=null,this._modelMatrix=null,this._pose=null,this._dragManager=null,this._physics=null,this._modelUserData=null,this._initialized=!1,this._updating=!1,this._opacity=1,this._lipsync=!0,this._lastLipSyncValue=0,this._dragX=0,this._dragY=0,this._accelerationX=0,this._accelerationY=0,this._accelerationZ=0,this._debugMode=!1,this._renderer=null,this._motionManager=new qi,this._motionManager.setEventCallback(b0.cubismDefaultMotionEventCallback,this),this._expressionManager=new qi,this._dragManager=new ms}release(){this._motionManager!=null&&(this._motionManager.release(),this._motionManager=null),this._expressionManager!=null&&(this._expressionManager.release(),this._expressionManager=null),this._moc!=null&&(this._moc.deleteModel(this._model),this._moc.release(),this._moc=null),this._modelMatrix=null,Zi.delete(this._pose),Ti.delete(this._eyeBlink),Wi.delete(this._breath),this._dragManager=null,Qi.delete(this._physics),t0.delete(this._modelUserData),this.deleteRenderer()}_moc;_model;_motionManager;_expressionManager;_eyeBlink;_breath;_modelMatrix;_pose;_dragManager;_physics;_modelUserData;_initialized;_updating;_opacity;_lipsync;_lastLipSyncValue;_dragX;_dragY;_accelerationX;_accelerationY;_accelerationZ;_debugMode;_renderer}var Ma;(c=>{c.CubismUserModel=b0})(Ma||(Ma={}));class Wt{static _currentFrame=0;static _lastFrame=0;static _deltaTime=0;static loadFileAsBytes(i,s){fetch(i).then(o=>o.arrayBuffer()).then(o=>s(o,o.byteLength))}static getDeltaTime(){return this._deltaTime}static updateTime(){this._currentFrame=Date.now(),this._deltaTime=(this._currentFrame-this._lastFrame)/1e3,this._lastFrame=this._currentFrame}static printMessage(i){me.debug&&console.log(i)}}class _r{static _instance=null;pcmData;userTimeSeconds;lastRms;sampleOffset;wavFileInfo;byteReader;audio;audioPlayPromise;constructor(){this.pcmData=null,this.userTimeSeconds=0,this.lastRms=0,this.sampleOffset=0,this.wavFileInfo=new m2,this.byteReader=new _2,this.audio=new Audio}loadFileToBytes=i=>{this.byteReader._fileByte=i,this.byteReader._fileDataView=new DataView(this.byteReader._fileByte),this.byteReader._fileSize=this.byteReader._fileByte.byteLength,this.byteReader._readOffset=0};static getInstance(){return this._instance==null&&(this._instance=new _r),this._instance}static releaseInstance(){this._instance!=null&&(this._instance=void 0),this._instance=null}update(i){let s,o;if(this.pcmData==null||this.sampleOffset>=this.wavFileInfo._samplesPerChannel)return this.lastRms=0,!1;this.userTimeSeconds+=i,s=Math.floor(this.userTimeSeconds*this.wavFileInfo._samplingRate),s>this.wavFileInfo._samplesPerChannel&&(s=this.wavFileInfo._samplesPerChannel),o=0;for(let _=0;_<this.wavFileInfo._numberOfChannels;_++)for(let w=this.sampleOffset;w<s;w++){const T=this.pcmData[_][w];o+=T*T}return o=Math.sqrt(o/(this.wavFileInfo._numberOfChannels*(s-this.sampleOffset))),this.lastRms=o,this.sampleOffset=s,!0}async start(i){return this.sampleOffset=0,this.userTimeSeconds=0,this.lastRms=0,this.playWavFile(i),await this.loadWavFile(i)}getRms(){return this.lastRms}async loadWavFile(i){let s=!1;this.pcmData!=null&&this.releasePcmData();const o=async()=>fetch(i).then(_=>_.arrayBuffer());if(this.loadFileToBytes(await o()),this.byteReader._fileSize<4)return!1;this.wavFileInfo._fileName=i;try{if(!this.byteReader.getCheckSignature("RIFF"))throw s=!1,new Error('Cannot find Signeture "RIFF".');if(this.byteReader.get32LittleEndian(),!this.byteReader.getCheckSignature("WAVE"))throw s=!1,new Error('Cannot find Signeture "WAVE".');if(!this.byteReader.getCheckSignature("fmt "))throw s=!1,new Error('Cannot find Signeture "fmt".');const _=this.byteReader.get32LittleEndian();if(this.byteReader.get16LittleEndian()!=1)throw s=!1,new Error("File is not linear PCM.");for(this.wavFileInfo._numberOfChannels=this.byteReader.get16LittleEndian(),this.wavFileInfo._samplingRate=this.byteReader.get32LittleEndian(),this.byteReader.get32LittleEndian(),this.byteReader.get16LittleEndian(),this.wavFileInfo._bitsPerSample=this.byteReader.get16LittleEndian(),_>16&&(this.byteReader._readOffset+=_-16);!this.byteReader.getCheckSignature("data")&&this.byteReader._readOffset<this.byteReader._fileSize;)this.byteReader._readOffset+=this.byteReader.get32LittleEndian()+4;if(this.byteReader._readOffset>=this.byteReader._fileSize)throw s=!1,new Error('Cannot find "data" Chunk.');{const w=this.byteReader.get32LittleEndian();this.wavFileInfo._samplesPerChannel=w*8/(this.wavFileInfo._bitsPerSample*this.wavFileInfo._numberOfChannels)}this.pcmData=new Array(this.wavFileInfo._numberOfChannels);for(let w=0;w<this.wavFileInfo._numberOfChannels;w++)this.pcmData[w]=new Float32Array(this.wavFileInfo._samplesPerChannel);for(let w=0;w<this.wavFileInfo._samplesPerChannel;w++)for(let T=0;T<this.wavFileInfo._numberOfChannels;T++)this.pcmData[T][w]=this.getPcmSample();s=!0}catch(_){console.error(_)}return s}playWavFile(i){this.audio.src=i,this.audioPlayPromise=this.audio.play()}getPcmSample(){let i;switch(this.wavFileInfo._bitsPerSample){case 8:i=this.byteReader.get8()-128,i<<=24;break;case 16:i=this.byteReader.get16LittleEndian()<<16;break;case 24:i=this.byteReader.get24LittleEndian()<<8;break;default:i=0;break}return i/2147483647}releasePcmData(){for(let i=0;i<this.wavFileInfo._numberOfChannels;i++)delete this.pcmData[i];delete this.pcmData,this.pcmData=null}release(){this.audioPlayPromise?.then(()=>this.audio.pause())}}class m2{_fileName;_numberOfChannels;_bitsPerSample;_samplingRate;_samplesPerChannel;constructor(){this._fileName="",this._numberOfChannels=0,this._bitsPerSample=0,this._samplingRate=0,this._samplesPerChannel=0}}class _2{_fileByte;_fileDataView;_fileSize;_readOffset;constructor(){this._fileByte=null,this._fileDataView=null,this._fileSize=0,this._readOffset=0}get8(){const i=this._fileDataView.getUint8(this._readOffset);return this._readOffset++,i}get16LittleEndian(){const i=this._fileDataView.getUint8(this._readOffset+1)<<8|this._fileDataView.getUint8(this._readOffset);return this._readOffset+=2,i}get24LittleEndian(){const i=this._fileDataView.getUint8(this._readOffset+2)<<16|this._fileDataView.getUint8(this._readOffset+1)<<8|this._fileDataView.getUint8(this._readOffset);return this._readOffset+=3,i}get32LittleEndian(){const i=this._fileDataView.getUint8(this._readOffset+3)<<24|this._fileDataView.getUint8(this._readOffset+2)<<16|this._fileDataView.getUint8(this._readOffset+1)<<8|this._fileDataView.getUint8(this._readOffset);return this._readOffset+=4,i}getCheckSignature(i){const s=new Uint8Array(4),o=new TextEncoder().encode(i);if(i.length!=4)return!1;for(let _=0;_<4;_++)s[_]=this.get8();return s[0]==o[0]&&s[1]==o[1]&&s[2]==o[2]&&s[3]==o[3]}}class p2 extends b0{modelSetting;modelHomeDir;userTimeSeconds;eyeBlinkIds;lipSyncIds;motions;expressions;_hitArea;_userArea;idParamAngleX;idParamAngleY;idParamAngleZ;idParamEyeBallX;idParamEyeBallY;idParamBodyAngleX;state;expressionCount;textureCount;motionCount;allMotionCount;wavFileHandler;_rightArmMotionManager;_leftArmMotionManager;get model(){return this._model}constructor(){super(),this.modelSetting=null,this.modelHomeDir=null,this.userTimeSeconds=0,this.eyeBlinkIds=new At,this.lipSyncIds=new At,this.motions=new we,this.expressions=new we,this._hitArea=new At,this._userArea=new At,this.getParameterId(),this.state=0,this.expressionCount=0,this.textureCount=0,this.motionCount=0,this.allMotionCount=0,this.wavFileHandler=new _r,this._rightArmMotionManager=new qi,this._leftArmMotionManager=new qi}getParameterId(){const i=ee.getIdManager();this.idParamAngleX=i.getId(xt.ParamAngleX),this.idParamAngleY=i.getId(xt.ParamAngleY),this.idParamAngleZ=i.getId(xt.ParamAngleZ),this.idParamEyeBallX=i.getId(xt.ParamEyeBallX),this.idParamEyeBallY=i.getId(xt.ParamEyeBallY),this.idParamBodyAngleX=i.getId(xt.ParamBodyAngleX)}loadAssets(i,s){this.modelHomeDir=i,fetch(Ne.join(i,s),{cache:"no-cache"}).then(o=>o.arrayBuffer()).then(o=>{const _=new is(o,o.byteLength);this.state=1,this.setupModel(_)})}setupModel(i){if(this._updating=!0,this._initialized=!1,this.modelSetting=i,this.modelSetting.getModelFileName()!=""){const G=this.modelSetting.getModelFileName();fetch(Ne.join(this.modelHomeDir,G)).then(Z=>Z.arrayBuffer()).then(Z=>{this.loadModel(Z),this.state=3,s()}),this.state=2}else Wt.printMessage("Model data does not exist.");const s=()=>{if(this.modelSetting.getExpressionCount()>0){const G=this.modelSetting.getExpressionCount();for(let Z=0;Z<G;Z++){const q=this.modelSetting.getExpressionName(Z),et=this.modelSetting.getExpressionFileName(Z);fetch(Ne.join(this.modelHomeDir,et)).then(K=>K.arrayBuffer()).then(K=>{const gt=this.loadExpression(K,K.byteLength,q);this.expressions.getValue(q)!=null&&(Fi.delete(this.expressions.getValue(q)),this.expressions.setValue(q,null)),this.expressions.setValue(q,gt),this.expressionCount++,this.expressionCount>=G&&(this.state=5,o())})}this.state=4}else this.state=5,o()},o=()=>{if(this.modelSetting.getPhysicsFileName()!=""){const G=this.modelSetting.getPhysicsFileName();fetch(Ne.join(this.modelHomeDir,G)).then(Z=>Z.arrayBuffer()).then(Z=>{this.loadPhysics(Z,Z.byteLength),this.state=7,_()}),this.state=6}else this.state=7,_()},_=()=>{if(this.modelSetting.getPoseFileName()!=""){const G=this.modelSetting.getPoseFileName();fetch(Ne.join(this.modelHomeDir,G)).then(Z=>Z.arrayBuffer()).then(Z=>{this.loadPose(Z,Z.byteLength),this.state=9,w()}),this.state=8}else this.state=9,w()},w=()=>{this.modelSetting.getEyeBlinkParameterCount()>0&&(this._eyeBlink=Ti.create(this.modelSetting),this.state=10),T()},T=()=>{this._breath=Wi.create();const G=new At;G.pushBack(new Ri(this.idParamAngleX,0,15,6.5345,.5)),G.pushBack(new Ri(this.idParamAngleY,0,8,3.5345,.5)),G.pushBack(new Ri(this.idParamAngleZ,0,10,5.5345,.5)),G.pushBack(new Ri(this.idParamBodyAngleX,0,4,15.5345,.5)),G.pushBack(new Ri(ee.getIdManager().getId(xt.ParamBreath),.5,.5,3.2345,1)),this._breath.setParameters(G),this.state=11,I()},I=()=>{if(this.modelSetting.getUserDataFile()!==""){const G=this.modelSetting.getUserDataFile();fetch(Ne.join(this.modelHomeDir,G)).then(Z=>Z.arrayBuffer()).then(Z=>{this.loadUserData(Z,Z.byteLength),this.state=13,N()}),this.state=12}else this.state=13,N()},N=()=>{const G=this.modelSetting.getEyeBlinkParameterCount();for(let Z=0;Z<G;++Z)this.eyeBlinkIds.pushBack(this.modelSetting.getEyeBlinkParameterId(Z));this.state=14,D()},D=()=>{const G=this.modelSetting.getLipSyncParameterCount();for(let Z=0;Z<G;++Z)this.lipSyncIds.pushBack(this.modelSetting.getLipSyncParameterId(Z));this.state=15,V()},V=()=>{const G=new we;if(this.modelSetting===null||this._modelMatrix===null){Ce("Failed to setupLayout().");return}this.modelSetting.getLayoutMap(G),this._modelMatrix.setupFromLayout(G),this.state=16,A()},A=()=>{this.state=17,this.model.saveParameters(),this.allMotionCount=0,this.motionCount=0;const G=[],Z=this.modelSetting.getMotionGroupCount();for(let q=0;q<Z;q++)G[q]=this.modelSetting.getMotionGroupName(q),this.allMotionCount+=this.modelSetting.getMotionCount(G[q]);for(let q=0;q<Z;q++)this.preLoadMotionGroup(G[q]);Z==0&&this.reloadTextures()}}setupTextures(){if(this.state===20){const s=this.modelSetting.getTextureCount();for(let o=0;o<s;o++){if(this.modelSetting.getTextureFileName(o)===""){Wt.printMessage("getTextureFileName null");continue}const _=this.modelSetting.getTextureFileName(o),w=Ne.join(this.modelHomeDir,_),T=I=>{this.getRenderer()?.bindTexture(o,I.id),this.textureCount++,this.textureCount>=s&&(this.state=22)};Ct.instance.textureManager.createTextureFromPngFile(w,!0,T),this.getRenderer()?.setIsPremultipliedAlpha(!0)}this.state=21}}reloadRenderer(){this.deleteRenderer(),this.createRenderer(),this.setupTextures()}update(){if(this.state!=22)return;const i=Wt.getDeltaTime();this.userTimeSeconds+=i,this._dragManager.update(i),this._dragX=this._dragManager.getX(),this._dragY=this._dragManager.getY();let s=!1;if(this.model.loadParameters(),this._motionManager.isFinished())this.startRandomMotion(ki.Idle,je.Idle);else{const o=this._motionManager.updateMotion(this.model,i),_=this._rightArmMotionManager.updateMotion(this.model,i),w=this._leftArmMotionManager.updateMotion(this.model,i);s=[o,_,w].some(T=>T)}if(this.model.saveParameters(),s||this._eyeBlink?.updateParameters(this.model,i),this._expressionManager?.updateMotion(this.model,i),this.model.addParameterValueById(this.idParamAngleX,this._dragX*30),this.model.addParameterValueById(this.idParamAngleY,this._dragY*30),this.model.addParameterValueById(this.idParamAngleZ,this._dragX*this._dragY*-30),this.model.addParameterValueById(this.idParamBodyAngleX,this._dragX*10),this.model.addParameterValueById(this.idParamEyeBallX,this._dragX),this.model.addParameterValueById(this.idParamEyeBallY,this._dragY),this._breath?.updateParameters(this.model,i),this._physics?.evaluate(this.model,i),this._lipsync){this.wavFileHandler?.update(i);const o=this.wavFileHandler.getRms();for(let _=0;_<this.lipSyncIds.getSize();++_)this.model.addParameterValueById(this.lipSyncIds.at(_),o,.8)}this._pose?.updateParameters(this.model,i),this.model.update()}startMotion(i,s,o,_){if(o==je.Force)this._motionManager.setReservePriority(o);else if(!this._motionManager.reserveMotion(o))return this._debugMode&&Wt.printMessage("[APP]can't start motion."),gi;const{motion:w,autoDelete:T}=this.getMotion(i,s,_),I=this.modelSetting.getMotionSoundFileName(i,s);if(I.localeCompare("")!=0){let N=this.modelHomeDir+I;this.wavFileHandler.start(N).catch()}return this._debugMode&&Wt.printMessage(`[APP]start motion: [${i}_${s}`),this._motionManager.startMotionPriority(w,T,o)}startRandomMotion(i,s,o){if(this.modelSetting.getMotionCount(i)==0)return gi;const _=Math.floor(Math.random()*this.modelSetting.getMotionCount(i));return this.startMotion(i,_,s,o)}getMotion(i,s,o){const _=this.modelSetting.getMotionFileName(i,s),w=`${i}_${s}`;let T=this.motions.getValue(w),I=!1;const N=Ne.join(this.modelHomeDir,_);return T==null?fetch(N).then(D=>D.arrayBuffer()).then(D=>{T=this.loadMotion(D,D.byteLength,null,o);let V=this.modelSetting.getMotionFadeInTimeValue(i,s);V>=0&&T.setFadeInTime(V),V=this.modelSetting.getMotionFadeOutTimeValue(i,s),V>=0&&T.setFadeOutTime(V),T.setEffectIds(this.eyeBlinkIds,this.lipSyncIds),I=!0}):T.setFinishedMotionHandler(o),{motion:T,autoDelete:I}}startHandMotion(i,s,o,_,w){if(_==je.Force)i.setReservePriority(_);else if(!i.reserveMotion(_))return this._debugMode&&Wt.printMessage("[APP]can't start motion."),gi;const{motion:T,autoDelete:I}=this.getMotion(s,o,w),N=this.modelSetting.getMotionSoundFileName(s,o);if(N.localeCompare("")!=0){let D=this.modelHomeDir+N;this.wavFileHandler.start(D).catch()}return this._debugMode&&Wt.printMessage(`[APP]start motion: ${name}`),i.startMotionPriority(T,I,_)}startRandomRightHandMotion(i,s,o){if(this.modelSetting.getMotionCount(i)==0)return gi;let _=Math.floor(Math.random()*this.modelSetting.getMotionCount(i));return this.startHandMotion(this._rightArmMotionManager,i,_,s,o)}startRandomLeftHandMotion(i,s,o){if(this.modelSetting.getMotionCount(i)==0)return gi;let _=Math.floor(Math.random()*this.modelSetting.getMotionCount(i));return this.startHandMotion(this._leftArmMotionManager,i,_,s,o)}setExpression(i){const s=this.expressions.getValue(i);this._debugMode&&Wt.printMessage(`[APP]expression: [${i}]`),s!=null?this._expressionManager.startMotionPriority(s,!1,je.Force):this._debugMode&&Wt.printMessage(`[APP]expression[${i}] is null`)}setRandomExpression(){if(this.expressions.getSize()==0)return;const i=Math.floor(Math.random()*this.expressions.getSize());for(let s=0;s<this.expressions.getSize();s++)if(s==i){const o=this.expressions._keyValues[s].first;this.setExpression(o);return}}motionEventFired(i){We("{0} is fired on LAppModel!!",i.s)}hitOpacity(){return this._opacity<1}hitTest(i,s,o){if(this.hitOpacity())return!1;const _=this.modelSetting.getHitAreasCount();for(let w=0;w<_;w++)if(this.modelSetting.getHitAreaName(w)==i){const T=this.modelSetting.getHitAreaId(w);return this.isHit(T,s,o)}return!1}preLoadMotionGroup(i){for(let s=0;s<this.modelSetting.getMotionCount(i);s++){const o=this.modelSetting.getMotionFileName(i,s),_=`${i}_${s}`;this._debugMode&&Wt.printMessage(`[APP]load motion: ${o} => [${_}]`),fetch(Ne.join(this.modelHomeDir,o)).then(w=>w.arrayBuffer()).then(w=>{const T=this.loadMotion(w,w.byteLength,_);let I=this.modelSetting.getMotionFadeInTimeValue(i,s);I>=0&&T.setFadeInTime(I),I=this.modelSetting.getMotionFadeOutTimeValue(i,s),I>=0&&T.setFadeOutTime(I),T.setEffectIds(this.eyeBlinkIds,this.lipSyncIds),this.motions.getValue(_)!=null&&Fi.delete(this.motions.getValue(_)),this.motions.setValue(_,T),this.motionCount++,this.motionCount>=this.allMotionCount&&this.reloadTextures()})}}reloadTextures(){this.state=20,this._motionManager?.stopAllMotions(),this._updating=!1,this._initialized=!0,this.createRenderer(),this.setupTextures(),this.getRenderer().startUp(Ct.gl)}releaseMotions(){this.motions.clear()}releaseExpressions(){this.expressions.clear()}doDraw(){if(this.model==null)return;const i=[0,0,Ct.canvas.width,Ct.canvas.height];this.getRenderer().setRenderState(Ct.frameBuffer,i),this.getRenderer().drawModel()}draw(i){this.model!==null&&this.state==22&&(i.multiplyByMatrix(this._modelMatrix),this.getRenderer().setMvpMatrix(i),this.doDraw())}release(){this._leftArmMotionManager.release(),this._rightArmMotionManager.release(),this.wavFileHandler.release(),super.release()}}let e0=class{static eventListener={[Qt.Head]:[],[Qt.Body]:[],[Qt.Left]:[],[Qt.Right]:[],[Qt.Other]:[]};static get model(){return Ct.instance}static get scene(){return Ee.instance}static get view(){return this.model.view}static async loadScript(){return new Promise(i=>{globalThis.Live2DCubismCore&&i(globalThis.Live2DCubismCore);const s=ci.createElement("script");s.src=me.cubismCorePath,ci.body.appendChild(s),s.onload=()=>i(globalThis.Live2DCubismCore)})}static async init(i){Rr(i),await this.loadScript(),this.model.initialize()&&(this.model.run(),this.listener())}static async release(){return this.model.release()}static listener(){window.addEventListener("beforeunload",()=>this.model.release()),window.addEventListener("resize",()=>me.canvas==="auto"&&this.model.onResize())}static on(i,s){this.eventListener[i]?.push(s)}static emit(i){this.eventListener[i]?.forEach(s=>s())}};class Ee{viewMatrix;models;sceneIndex;static _instance=null;static get instance(){return this.initialize()}constructor(){this.viewMatrix=new oe,this.models=new At,this.sceneIndex=0,this.changeScene(0)}_finishedMotion=i=>{Wt.printMessage("Motion Finished: OK")};static initialize(){return this._instance==null&&(this._instance=new Ee),this._instance}static releaseInstance(){this._instance!=null&&(this._instance=void 0),this._instance=null}getModel(i){return i<this.models.getSize()?this.models.at(i):null}releaseAllModel(){for(let i=0;i<this.models.getSize();i++)this.models.at(i).release(),this.models.set(i,null);this.models.clear()}onDrag(i,s){for(let o=0;o<this.models.getSize();o++){const _=this.getModel(o);_&&_.setDragging(i,s)}}onTap(i,s){Wt.printMessage(`[APP]tap point: {x: ${i.toFixed(2)} y: ${s.toFixed(2)}}`);for(let o=0;o<this.models.getSize();o++){const _=this.models.at(o);if(_.modelSetting.getHitAreasCount()===0){Wt.printMessage(`[APP]hit area: [${Qt.Other}]`),_.startRandomMotion(ki.Tap,je.Normal,this._finishedMotion),e0.emit(Qt.Other);return}_.hitTest(Qt.Head,i,s)?(Wt.printMessage(`[APP]hit area: [${Qt.Head}]`),_.setRandomExpression(),e0.emit(Qt.Head)):_.hitTest(Qt.Left,i,s)?(Wt.printMessage(`[APP]hit area: [${Qt.Body+Qt.Left}]`),_.startRandomLeftHandMotion(ki.TapLeft,je.Normal,this._finishedMotion),e0.emit(Qt.Left)):_.hitTest(Qt.Right,i,s)?(Wt.printMessage(`[APP]hit area: [${Qt.Body+Qt.Right}]`),_.startRandomRightHandMotion(ki.TapRight,je.Normal,this._finishedMotion),e0.emit(Qt.Right)):_.hitTest(Qt.Body,i,s)&&(Wt.printMessage(`[APP]hit area: [${Qt.Body}]`),_.startRandomMotion(ki.TapBody,je.Normal,this._finishedMotion),e0.emit(Qt.Body))}}onUpdate(){const{width:i,height:s}=Ct.canvas,o=this.models.getSize();for(let _=0;_<o;++_){const w=new oe,T=this.getModel(_);T.getModel()&&(T.getModel().getCanvasWidth()>1&&i<s?(T.getModelMatrix().setWidth(2),w.scale(1,i/s)):w.scale(s/i,1),w.multiplyByMatrix(this.viewMatrix)),T.update(),T.draw(w)}}prevScene(){const i=(this.sceneIndex-1)%me.source.models.length;this.changeScene(i)}nextScene(){const i=(this.sceneIndex+1)%me.source.models.length;this.changeScene(i)}changeScene(i){this.sceneIndex=i,Wt.printMessage(`[APP]model index: ${this.sceneIndex}`);const s=me.source.models.at(i),o=Ne.join(me.source.path,s);let _=`${s}.model3.json`;this.releaseAllModel(),this.models.pushBack(new p2),this.models.at(0).loadAssets(o,_)}setViewMatrix(i){for(let s=0;s<16;s++)this.viewMatrix.getArray()[s]=i.getArray()[s]}}class y2{textures;constructor(){this.textures=new At}release(){for(let i=this.textures.begin();i.notEqual(this.textures.end());i.preIncrement())Ct.gl.deleteTexture(i.ptr().id);this.textures=new At}createTextureFromPngFile(i,s,o){for(let w=this.textures.begin();w.notEqual(this.textures.end());w.preIncrement())if(w.ptr().fileName==i&&w.ptr().usePremultply==s){w.ptr().img=new Image,w.ptr().img.onload=()=>o(w.ptr()),w.ptr().img.src=i;return}const _=new Image;_.onload=()=>{const w=Ct.gl,T=w.createTexture();w.bindTexture(w.TEXTURE_2D,T),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.LINEAR_MIPMAP_LINEAR),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.LINEAR),s&&w.pixelStorei(w.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,_),w.generateMipmap(w.TEXTURE_2D),w.bindTexture(w.TEXTURE_2D,null);const I=new A2;I!=null&&(I.fileName=i,I.width=_.width,I.height=_.height,I.id=T,I.img=_,I.usePremultply=s,this.textures.pushBack(I)),o(I)},_.src=i}releaseTextures(){for(let i=0;i<this.textures.getSize();i++)this.textures.set(i,null);this.textures.clear()}releaseTextureByTexture(i){for(let s=0;s<this.textures.getSize();s++)if(this.textures.at(s).id==i){this.textures.set(s,null),this.textures.remove(s);break}}releaseTextureByFilePath(i){for(let s=0;s<this.textures.getSize();s++)if(this.textures.at(s).fileName==i){this.textures.set(s,null),this.textures.remove(s);break}}}class A2{img;id=null;width=0;height=0;usePremultply;fileName}class Pa extends oe{constructor(){super(),this._screenLeft=0,this._screenRight=0,this._screenTop=0,this._screenBottom=0,this._maxLeft=0,this._maxRight=0,this._maxTop=0,this._maxBottom=0,this._maxScale=0,this._minScale=0}adjustTranslate(i,s){this._tr[0]*this._maxLeft+(this._tr[12]+i)>this._screenLeft&&(i=this._screenLeft-this._tr[0]*this._maxLeft-this._tr[12]),this._tr[0]*this._maxRight+(this._tr[12]+i)<this._screenRight&&(i=this._screenRight-this._tr[0]*this._maxRight-this._tr[12]),this._tr[5]*this._maxTop+(this._tr[13]+s)<this._screenTop&&(s=this._screenTop-this._tr[5]*this._maxTop-this._tr[13]),this._tr[5]*this._maxBottom+(this._tr[13]+s)>this._screenBottom&&(s=this._screenBottom-this._tr[5]*this._maxBottom-this._tr[13]);const o=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,i,s,0,1]);oe.multiply(o,this._tr,this._tr)}adjustScale(i,s,o){const _=this.getMaxScale(),w=this.getMinScale(),T=o*this._tr[0];T<w?this._tr[0]>0&&(o=w/this._tr[0]):T>_&&this._tr[0]>0&&(o=_/this._tr[0]);const I=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,i,s,0,1]),N=new Float32Array([o,0,0,0,0,o,0,0,0,0,1,0,0,0,0,1]),D=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,-i,-s,0,1]);oe.multiply(D,this._tr,this._tr),oe.multiply(N,this._tr,this._tr),oe.multiply(I,this._tr,this._tr)}setScreenRect(i,s,o,_){this._screenLeft=i,this._screenRight=s,this._screenBottom=o,this._screenTop=_}setMaxScreenRect(i,s,o,_){this._maxLeft=i,this._maxRight=s,this._maxTop=_,this._maxBottom=o}setMaxScale(i){this._maxScale=i}setMinScale(i){this._minScale=i}getMaxScale(){return this._maxScale}getMinScale(){return this._minScale}isMaxScale(){return this.getScaleX()>=this._maxScale}isMinScale(){return this.getScaleX()<=this._minScale}getScreenLeft(){return this._screenLeft}getScreenRight(){return this._screenRight}getScreenBottom(){return this._screenBottom}getScreenTop(){return this._screenTop}getMaxLeft(){return this._maxLeft}getMaxRight(){return this._maxRight}getMaxBottom(){return this._maxBottom}getMaxTop(){return this._maxTop}_screenLeft;_screenRight;_screenTop;_screenBottom;_maxLeft;_maxRight;_maxTop;_maxBottom;_maxScale;_minScale}var va;(c=>{c.CubismViewMatrix=Pa})(va||(va={}));class x2{texture;vertexBuffer;uvBuffer;indexBuffer;rect;positionLocation;uvLocation;textureLocation;positionArray;uvArray;indexArray;firstDraw;hitCallback;constructor(i,s,o,_,w,T){this.rect=new S2,this.rect.left=i-o*.5,this.rect.right=i+o*.5,this.rect.up=s+_*.5,this.rect.down=s-_*.5,this.texture=w,this.vertexBuffer=null,this.uvBuffer=null,this.indexBuffer=null,this.positionLocation=null,this.uvLocation=null,this.textureLocation=null,this.positionArray=null,this.uvArray=null,this.indexArray=null,this.firstDraw=!0,this.hitCallback=T}release(){this.rect=null;const i=Ct.gl;i.deleteTexture(this.texture),this.texture=null,i.deleteBuffer(this.uvBuffer),this.uvBuffer=null,i.deleteBuffer(this.vertexBuffer),this.vertexBuffer=null,i.deleteBuffer(this.indexBuffer),this.indexBuffer=null}getTexture(){return this.texture}render(i){if(this.texture==null)return;const s=Ct.gl;if(this.firstDraw){this.positionLocation=s.getAttribLocation(i,"position"),s.enableVertexAttribArray(this.positionLocation),this.uvLocation=s.getAttribLocation(i,"uv"),s.enableVertexAttribArray(this.uvLocation),this.textureLocation=s.getUniformLocation(i,"texture"),s.uniform1i(this.textureLocation,0),this.uvArray=new Float32Array([1,0,0,0,0,1,1,1]),this.uvBuffer=s.createBuffer();{const o=Ct.canvas.width,_=Ct.canvas.height;this.positionArray=new Float32Array([(this.rect.right-o*.5)/(o*.5),(this.rect.up-_*.5)/(_*.5),(this.rect.left-o*.5)/(o*.5),(this.rect.up-_*.5)/(_*.5),(this.rect.left-o*.5)/(o*.5),(this.rect.down-_*.5)/(_*.5),(this.rect.right-o*.5)/(o*.5),(this.rect.down-_*.5)/(_*.5)]),this.vertexBuffer=s.createBuffer()}this.indexArray=new Uint16Array([0,1,2,3,2,0]),this.indexBuffer=s.createBuffer(),this.firstDraw=!1}s.bindBuffer(s.ARRAY_BUFFER,this.uvBuffer),s.bufferData(s.ARRAY_BUFFER,this.uvArray,s.STATIC_DRAW),s.vertexAttribPointer(this.uvLocation,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ARRAY_BUFFER,this.vertexBuffer),s.bufferData(s.ARRAY_BUFFER,this.positionArray,s.STATIC_DRAW),s.vertexAttribPointer(this.positionLocation,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,this.indexBuffer),s.bufferData(s.ELEMENT_ARRAY_BUFFER,this.indexArray,s.DYNAMIC_DRAW),s.bindTexture(s.TEXTURE_2D,this.texture),s.drawElements(s.TRIANGLES,this.indexArray.length,s.UNSIGNED_SHORT,0)}isHit(i,s){const{height:o}=Ct.canvas,_=o-s;return i>=this.rect.left&&i<=this.rect.right&&_<=this.rect.up&&_>=this.rect.down}}class S2{left;right;up;down}class C2{startY;startX;lastX;lastY;lastX1;lastY1;lastX2;lastY2;lastTouchDistance;deltaX;deltaY;scale;touchSingle;flipAvailable;constructor(){this.startX=0,this.startY=0,this.lastX=0,this.lastY=0,this.lastX1=0,this.lastY1=0,this.lastX2=0,this.lastY2=0,this.lastTouchDistance=0,this.deltaX=0,this.deltaY=0,this.scale=1,this.touchSingle=!1,this.flipAvailable=!1}getCenterX(){return this.lastX}getCenterY(){return this.lastY}getDeltaX(){return this.deltaX}getDeltaY(){return this.deltaY}getStartX(){return this.startX}getStartY(){return this.startY}getScale(){return this.scale}getX(){return this.lastX}getY(){return this.lastY}getX1(){return this.lastX1}getY1(){return this.lastY1}getX2(){return this.lastX2}getY2(){return this.lastY2}isSingleTouch(){return this.touchSingle}isFlickAvailable(){return this.flipAvailable}disableFlick(){this.flipAvailable=!1}touchesBegan(i,s){this.lastX=i,this.lastY=s,this.startX=i,this.startY=s,this.lastTouchDistance=-1,this.flipAvailable=!0,this.touchSingle=!0}touchesMoved(i,s){this.lastX=i,this.lastY=s,this.lastTouchDistance=-1,this.touchSingle=!0}getFlickDistance(){return this.calculateDistance(this.startX,this.startY,this.lastX,this.lastY)}calculateDistance(i,s,o,_){return Math.sqrt((i-o)*(i-o)+(s-_)*(s-_))}calculateMovingAmount(i,s){if(i>0!=s>0)return 0;const o=i>0?1:-1,_=Math.abs(i),w=Math.abs(s);return o*(_<w?_:w)}}class w2{touchManager;deviceToScreen;viewMatrix;sprites=[];programId;released=!1;constructor(){this.programId=null,this.released=!1,this.touchManager=new C2,this.deviceToScreen=new oe,this.viewMatrix=new Pa}initialize(){const{width:i,height:s}=Ct.canvas,o=i/s,_=-o,w=o??m0.Right,T=m0.Bottom,I=m0.Top;if(this.viewMatrix.setScreenRect(_,w,T,I),this.viewMatrix.scale(me.scale,me.scale),this.deviceToScreen.loadIdentity(),i>s){const N=Math.abs(w-_);this.deviceToScreen.scaleRelative(N/i,-N/i)}else{const N=Math.abs(I-T);this.deviceToScreen.scaleRelative(N/s,-N/s)}this.deviceToScreen.translateRelative(-i*.5,-s*.5),this.viewMatrix.setMaxScale(W0.Max),this.viewMatrix.setMinScale(W0.Min),this.viewMatrix.setMaxScreenRect(Gi.Left,Gi.Right,Gi.Bottom,Gi.Top)}release(){this.sprites.forEach(i=>i.release()),this.sprites.length=0,Ct.gl.deleteProgram(this.programId),this.released=!0}render(){const i=Ct.gl;i.useProgram(this.programId),this.sprites.forEach(s=>s.render(this.programId)),i.flush(),Ee.instance.setViewMatrix(this.viewMatrix),Ee.instance.onUpdate()}addSprite(i,s,o,_){Ct.instance.textureManager.createTextureFromPngFile(i,!1,w=>{const{width:T,height:I}=Ct.canvas,N=s?s.x:T-w.width*.5,D=s?s.y:I-w.height*.5,V=o?o.width:w.width,A=o?o.height:w.height,G=new x2(N,D,V,A,w.id,_);this.sprites.push(G)})}initializeSprite(){this.programId=Ct.instance.createShader()}onTouchesBegan(i,s){this.touchManager.touchesBegan(i,s)}onTouchesMoved(i,s){const o=this.transformViewX(this.touchManager.getX()),_=this.transformViewY(this.touchManager.getY());this.touchManager.touchesMoved(i,s),Ee.instance.onDrag(o,_)}onTouchesEnded(i,s){Ee.instance.onDrag(0,0);{const o=this.deviceToScreen.transformX(this.touchManager.getX()),_=this.deviceToScreen.transformY(this.touchManager.getY());"ontouchend"in Ct.canvas&&Wt.printMessage(`[APP]touchesEnded x: ${o} y: ${_}`),Ee.instance.onTap(o,_),this.sprites.forEach(w=>{w.isHit(i,s)&&w.hitCallback()})}}transformViewX(i){const s=this.deviceToScreen.transformX(i);return this.viewMatrix.invertTransformX(s)}transformViewY(i){const s=this.deviceToScreen.transformY(i);return this.viewMatrix.invertTransformY(s)}transformScreenX(i){return this.deviceToScreen.transformX(i)}transformScreenY(i){return this.deviceToScreen.transformY(i)}}class Ct{cubismOption;view;captured;textureManager;static _instance=null;static frameBuffer=null;static canvas=null;static gl=null;canvasId="live2d-canvas";loopId=0;static get instance(){return this._instance==null&&(this._instance=new Ct),this._instance}constructor(){this.captured=!1,this.cubismOption=new Cn,this.view=new w2,this.textureManager=new y2}static releaseInstance(){this._instance!=null&&this._instance.release(),this._instance=null}initialize(){const i=Ct.canvas=this.getCanvas(),s=Ct.gl=i.getContext("webgl")||i.getContext("experimental-webgl");return s?(Ct.frameBuffer||(Ct.frameBuffer=s.getParameter(s.FRAMEBUFFER_BINDING)),s.enable(s.BLEND),s.blendFunc(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA),this.onEvent(),this.view.initialize(),this.initializeCubism(),!0):(alert("Cannot initialize WebGL. This browser does not support."),Ct.gl=null,ci.body.innerHTML="This browser does not support the <code>&lt;canvas&gt;</code> element.",!1)}getCanvas(){let i=ci.querySelector(`#${this.canvasId}`);return i?this.release():(i=ci.createElement("canvas"),i.setAttribute("id",this.canvasId)),me.canvas==="auto"?this._resizeCanvas():(i.width=me.canvas.width||i.width,i.height=me.canvas.height||i.height),me.target.appendChild(i),i}onEvent(){const i=Ct.canvas;"ontouchend"in i?(i.ontouchstart=v2,i.ontouchmove=B2,i.ontouchend=Ba,i.ontouchcancel=Ba):(i.onmousedown=k2,i.onmousemove=M2,i.onmouseup=P2)}onResize(){this._resizeCanvas(),this.view.initialize(),this.view.initializeSprite();const{width:i,height:s}=Ct.canvas;Ct.gl.viewport(0,0,i,s)}release(){this.textureManager.release(),this.view.release(),cancelAnimationFrame(this.loopId),Ee.releaseInstance(),ee.dispose()}run(){const i=()=>{if(!Ct.instance)return;Wt.updateTime();const s=Ct.gl;s.clearColor(0,0,0,0),s.enable(s.DEPTH_TEST),s.depthFunc(s.LEQUAL),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.clearDepth(1),s.enable(s.BLEND),s.blendFunc(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA),this.view.render(),this.loopId=requestAnimationFrame(i)};i()}createShader(){const i=Ct.gl,s=i.createShader(i.VERTEX_SHADER);if(s===null)return Wt.printMessage("failed to create vertexShader"),null;const o=`
        precision mediump float;
        attribute vec3 position;
        attribute vec2 uv;
        varying vec2 vuv;
        void main(void)
        {
           gl_Position = vec4(position, 1.0);
           vuv = uv;
        }
      `;i.shaderSource(s,o),i.compileShader(s);const _=i.createShader(i.FRAGMENT_SHADER);if(_==null)return Wt.printMessage("failed to create fragmentShader"),null;const w=`
        precision mediump float;
        varying vec2 vuv;
        uniform sampler2D texture;
        void main(void)
        {
           gl_FragColor = texture2D(texture, vuv);
        }
      `;i.shaderSource(_,w),i.compileShader(_);const T=i.createProgram();return i.attachShader(T,s),i.attachShader(T,_),i.deleteShader(s),i.deleteShader(_),i.linkProgram(T),i.useProgram(T),T}initializeCubism(){this.cubismOption.logFunction=Wt.printMessage,this.cubismOption.loggingLevel=Vi.LogLevel_Error,ee.startUp(this.cubismOption),ee.initialize(),Ee.initialize(),Wt.updateTime(),this.view.initializeSprite()}_resizeCanvas(){Ct.canvas.width=window.innerWidth,Ct.canvas.height=window.innerHeight}}function k2(c){if(Ct.instance.captured=!0,Ct.instance.view.released){Wt.printMessage("view released");return}const i=c.target.getBoundingClientRect(),s=c.pageX-i.left,o=c.pageY-i.top;Ct.instance.view.onTouchesBegan(s,o)}function M2(c){if(!Ct.instance.captured)return;if(Ct.instance.view.released){Wt.printMessage("view released");return}const i=c.target.getBoundingClientRect(),s=c.clientX-i.left,o=c.clientY-i.top;Ct.instance.view.onTouchesMoved(s,o)}function P2(c){if(Ct.instance.captured=!1,Ct.instance.view.released){Wt.printMessage("view released");return}const i=c.target.getBoundingClientRect(),s=c.clientX-i.left,o=c.clientY-i.top;Ct.instance.view.onTouchesEnded(s,o)}function v2(c){if(Ct.instance.captured=!0,Ct.instance.view.released){Wt.printMessage("view released");return}const i=c.target.getBoundingClientRect(),s=c.changedTouches[0].clientX-i.left,o=c.changedTouches[0].clientY-i.top;Ct.instance.view.onTouchesBegan(s,o)}function B2(c){if(!Ct.instance.captured)return;if(Ct.instance.view.released){Wt.printMessage("view released");return}const i=c.target.getBoundingClientRect(),s=c.changedTouches[0].clientX-i.left,o=c.changedTouches[0].clientY-i.top;Ct.instance.view.onTouchesMoved(s,o)}function Ba(c){if(Ct.instance.captured=!1,Ct.instance.view.released){Wt.printMessage("view released");return}const i=c.target.getBoundingClientRect(),s=c.changedTouches[0].clientX-i.left,o=c.changedTouches[0].clientY-i.top;Ct.instance.view.onTouchesEnded(s,o)}class I2{static eventListener={[Qt.Head]:[],[Qt.Body]:[],[Qt.Left]:[],[Qt.Right]:[],[Qt.Other]:[]};static get model(){return Ct.instance}static get scene(){return Ee.instance}static get view(){return this.model.view}static async init(i){Rr(i),this.model.initialize()&&(this.model.run(),this.listener())}static async release(){return this.model.release()}static listener(){window.addEventListener("beforeunload",()=>this.model.release()),window.addEventListener("resize",()=>me.canvas==="auto"&&this.model.onResize())}static on(i,s){this.eventListener[i]?.push(s)}static emit(i){this.eventListener[i]?.forEach(s=>s())}}return I2}();
//# sourceMappingURL=live2dWidget.iife.js.map
